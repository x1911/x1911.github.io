/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 2);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod);\n    global.databus = mod.exports;\n  }\n})(undefined, function (module) {\n  \"use strict\";\n\n  //所有变量集中地\n\n  var isWX = false;\n  // let isMobile = false\n  var DataBus = {\n    isWX: isWX,\n    isMobile: false,\n    isShowStats: isWX ? false : true,\n    // isAddOrrbit: isMobile ? false : true,\n    // isShowDataGUI: isWX ? false : true,\n\n    stats: null,\n    orbitControl: null,\n\n    // particles : null\n    invincibleTime: 5, //无敌时间\n    scoreText: null, //得分文字\n    score: null,\n    runDistanz: 0, //玩家跑过的距离\n    // hasCollided;\n    heroSphere: null, //英雄\n    // heroRollingSpeed : 0\n    rollingGroundSphere: null,\n    rollingSpeed: 0.001, //地面滚动速度 0.008\n    rollingSpeedMax: 0.02, //最高和最低移动速度\n    rollingSpeedMin: 0.001,\n    // treesPool //储存池\n\n\n    worldRadius: 126, //球面半径\n\n\n    //玩家模型数值\n    PlayerMeshFootRate: 0.2, //跑步速度 0.315\n\n    //存储变量\n    clock: null,\n    lerpVal: 0, //每帧区间间隔，通过 clock getDelta 获得\n\n    CE: null, //镜头效果\n    effect: null, //效果\n    dust: null, //脚底灰尘\n\n    cameraY: 2.5 + 1.2, //1.6,\n\n    //固定常用的值\n    WD: window.innerWidth,\n    WH: window.innerHeight - 4,\n\n    color: {\n      sun2: 0xffecba,\n      sun: 0xcdc1c5,\n      hightlight: 0xffffff, //0xfffafa,\n      shodow: 0xffffff, //0x747cb3,\n      sky: 0x90A0BD, //0xb8c4d2,\n      fog: 0xeeccc2, //0x3d4c6a,\n      ground: 0xECCEC4, //0xF0E1C4, //0xfffafa,\n\n      green: 0xb0ff33,\n      // green : 0x7fa062,\n      brown: 0x7c5437,\n      yellow: 0xf5ce85\n    }\n  };\n\n  module.exports = DataBus;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jbGllbnQvUm9ja1J1bi9kYXRhYnVzLmpzP2FmNTAiXSwic291cmNlc0NvbnRlbnQiOlsiLy/miYDmnInlj5jph4/pm4bkuK3lnLBcblxuY29uc3QgaXNXWCA9IGZhbHNlXG4vLyBsZXQgaXNNb2JpbGUgPSBmYWxzZVxubGV0IERhdGFCdXMgPSB7XG4gIGlzV1ggOiBpc1dYLFxuICBpc01vYmlsZSA6IGZhbHNlLFxuICBpc1Nob3dTdGF0cyA6IGlzV1ggPyBmYWxzZSA6IHRydWUsXG4gIC8vIGlzQWRkT3JyYml0OiBpc01vYmlsZSA/IGZhbHNlIDogdHJ1ZSxcbiAgLy8gaXNTaG93RGF0YUdVSTogaXNXWCA/IGZhbHNlIDogdHJ1ZSxcblxuICBzdGF0czogbnVsbCxcbiAgb3JiaXRDb250cm9sOiBudWxsLFxuXG4gIC8vIHBhcnRpY2xlcyA6IG51bGxcbiAgaW52aW5jaWJsZVRpbWU6IDUsICAvL+aXoOaVjOaXtumXtFxuICBzY29yZVRleHQ6IG51bGwsICAvL+W+l+WIhuaWh+Wtl1xuICBzY29yZTogbnVsbCxcbiAgcnVuRGlzdGFueiA6IDAsIC8v546p5a626LeR6L+H55qE6Led56a7XG4gIC8vIGhhc0NvbGxpZGVkO1xuICBoZXJvU3BoZXJlOiBudWxsLCAgLy/oi7Hpm4RcbiAgLy8gaGVyb1JvbGxpbmdTcGVlZCA6IDBcbiAgcm9sbGluZ0dyb3VuZFNwaGVyZTogbnVsbCxcbiAgcm9sbGluZ1NwZWVkOiAwLjAwMSwgIC8v5Zyw6Z2i5rua5Yqo6YCf5bqmIDAuMDA4XG4gIHJvbGxpbmdTcGVlZE1heDogMC4wMiwgIC8v5pyA6auY5ZKM5pyA5L2O56e75Yqo6YCf5bqmXG4gIHJvbGxpbmdTcGVlZE1pbjogMC4wMDEsXG4gIC8vIHRyZWVzUG9vbCAvL+WCqOWtmOaxoFxuXG5cbiAgd29ybGRSYWRpdXM6IDEyNiwgIC8v55CD6Z2i5Y2K5b6EXG5cblxuICAvL+eOqeWutuaooeWei+aVsOWAvFxuICBQbGF5ZXJNZXNoRm9vdFJhdGU6IDAuMiwgLy/ot5HmraXpgJ/luqYgMC4zMTVcblxuICAvL+WtmOWCqOWPmOmHj1xuICBjbG9jazogbnVsbCxcbiAgbGVycFZhbCA6IDAsIC8v5q+P5bin5Yy66Ze06Ze06ZqU77yM6YCa6L+HIGNsb2NrIGdldERlbHRhIOiOt+W+l1xuXG4gIENFOm51bGwsICAvL+mVnOWktOaViOaenFxuICBlZmZlY3Q6IG51bGwsIC8v5pWI5p6cXG4gIGR1c3Q6IG51bGwsIC8v6ISa5bqV54Gw5bCYXG5cbiAgY2FtZXJhWSA6IDIuNSArIDEuMiwgLy8xLjYsXG5cbiAgLy/lm7rlrprluLjnlKjnmoTlgLxcbiAgV0QgOiB3aW5kb3cuaW5uZXJXaWR0aCxcbiAgV0ggOiB3aW5kb3cuaW5uZXJIZWlnaHQgLSA0ICxcblxuICBjb2xvcjoge1xuICAgIHN1bjIgOiAweGZmZWNiYSxcbiAgICBzdW4gOiAweGNkYzFjNSxcbiAgICBoaWdodGxpZ2h0OiAweGZmZmZmZiwgLy8weGZmZmFmYSxcbiAgICBzaG9kb3cgOiAweGZmZmZmZiwgLy8weDc0N2NiMyxcbiAgICBza3kgOiAweDkwQTBCRCwgIC8vMHhiOGM0ZDIsXG4gICAgZm9nIDogMHhlZWNjYzIsIC8vMHgzZDRjNmEsXG4gICAgZ3JvdW5kIDogMHhFQ0NFQzQsIC8vMHhGMEUxQzQsIC8vMHhmZmZhZmEsXG5cbiAgICBncmVlbiA6IDB4YjBmZjMzLFxuICAgIC8vIGdyZWVuIDogMHg3ZmEwNjIsXG4gICAgYnJvd24gOiAweDdjNTQzNyxcbiAgICB5ZWxsb3cgOiAweGY1Y2U4NSxcbiAgfVxufVxuXG5cbm1vZHVsZS5leHBvcnRzID0gRGF0YUJ1c1xuXG5cblxuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2xpZW50L1JvY2tSdW4vZGF0YWJ1cy5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUE3Q0E7QUFDQTtBQTZEQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./databus'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.databus);\n    global.core = mod.exports;\n  }\n})(undefined, function (module, DB) {\n  'use strict';\n\n  ///////////////////////\n  ///      UTILS      ///\n  ///////////////////////\n\n  var core = {};\n  core.distance = function (p1, p2) {\n    var dx = p2.x - p1.x;\n    var dy = p2.y - p1.y;\n\n    return Math.sqrt(dx * dx + dy * dy);\n  };\n\n  core.angle = function (p1, p2) {\n    var dx = p2.x - p1.x;\n    var dy = p2.y - p1.y;\n\n    return core.degrees(Math.atan2(dy, dx));\n  };\n\n  // core.radian = function(p1, p2) {\n  //   var dx = p2.x - p1.x;\n  //   var dy = p2.y - p1.y;\n  //\n  //   return core.radians(Math.atan2(dy, dx));\n  // };\n\n  core.findCoord = function (p, d, a) {\n    var b = { x: 0, y: 0 };\n    a = core.radians(a);\n    b.x = p.x - d * Math.cos(a);\n    b.y = p.y - d * Math.sin(a);\n    return b;\n  };\n\n  core.radians = function (a) {\n    return a * (Math.PI / 180);\n  };\n\n  core.degrees = function (a) {\n    return a * (180 / Math.PI);\n  };\n\n  core.direction = function (rAngle) {\n    //弧度算方向\n    // var rAngle = obj.angle.radian;\n    var angle45 = 45; //Math.PI / 4;\n\n    var direction;\n    // Angular direction\n    //     \\  UP /\n    //      \\   /\n    // LEFT       RIGHT\n    //      /   \\\n    //     /DOWN \\\n    //\n    if (rAngle > angle45 && rAngle < angle45 * 3) {\n      direction = 'up';\n    } else if (rAngle > -angle45 && rAngle <= angle45) {\n      direction = 'left';\n    } else if (rAngle > -angle45 * 3 && rAngle <= -angle45) {\n      direction = 'down';\n    } else {\n      direction = 'right';\n    }\n    return direction;\n  };\n\n  //八个方向的控制\n  core.eightDirection = function (angle) {\n\n    var _direction;\n    if (angle > -22.5 && angle < 22.5) {\n      _direction = 'left';\n    } else if (angle > 22.5 && angle < 67.5) {\n      _direction = 'leftUp';\n    } else if (angle > 67.5 && angle < 112.5) {\n      _direction = 'up';\n    } else if (angle > 112.5 && angle < 157.5) {\n      _direction = 'rightUp';\n    } else if (angle > 157.5 && angle < 180 || angle < -157.5 && angle > -180) {\n      _direction = 'right';\n    } else if (angle < -112.5 && angle > -157.5) {\n      _direction = 'rightDown';\n    } else if (angle < -67.5 && angle > -112.5) {\n      _direction = 'down';\n    } else if (angle < -22.5 && angle > -67.5) {\n      _direction = 'leftDown';\n    }\n    return _direction;\n  };\n\n  // 设置2D贴图做\n  core.makeCanvasText = function (message, parameters) {\n    if (parameters === undefined) parameters = {};\n\n    var fontface = parameters.hasOwnProperty('fontface') ? parameters['fontface'] : 'Arial';\n\n    var fontsize = parameters.hasOwnProperty('fontsize') ? parameters['fontsize'] : 18;\n\n    var borderThickness = parameters.hasOwnProperty('borderThickness') ? parameters['borderThickness'] : 0.5;\n\n    var borderColor = parameters.hasOwnProperty('borderColor') ? parameters['borderColor'] : { r: 89, g: 51, b: 46, a: 0.9 };\n\n    var backgroundColor = parameters.hasOwnProperty('backgroundColor') ? parameters['backgroundColor'] : { r: 155, g: 155, b: 155, a: 0.5\n\n      //微信创建canvas\n    };var canvas = DB.isWX ? wx.createCanvas() : document.createElement('canvas');\n\n    canvas.width = parameters.width || 64;\n    canvas.height = parameters.height || 64;\n    var context = canvas.getContext('2d');\n    context.font = 'bold ' + fontsize + 'px ' + fontface;\n    // context.shadowColor=\"#333333\";\n    // context.shadowOffsetY = 1;\n    // 获取字体大小宽度\n    var metrics = context.measureText(message);\n    var textWidth = metrics.width;\n    // 子弹位置，使其居中\n    var textX = (canvas.width - textWidth) / 2;\n    // deb(textWidth);\n    //  字体颜色\n    context.fillStyle = parameters['color'] || 'rgba(255, 255, 255, 1.0)';\n    // 写名字 填充颜色  让字体居中\n    context.fillText(message, textX, fontsize + borderThickness);\n    // 描边颜色\n    context.strokeStyle = 'rgba(' + borderColor.r + ',' + borderColor.g + ',' + borderColor.b + ',' + borderColor.a + ')';\n    context.lineWidth = borderThickness;\n    context.strokeText(message, textX, fontsize + borderThickness);\n\n    // 背景颜色\n    context.fillStyle = 'rgba(' + backgroundColor.r + ',' + backgroundColor.g + ',' + backgroundColor.b + ',' + backgroundColor.a + ')';\n    return { canvas: canvas, context: context };\n  };\n\n  // 设置一个精灵\n  /*\n   var spritey = makeTextSprite( \" World! \",\n   { fontsize: 32, fontface: \"Georgia\", borderColor: {r:0, g:0, b:255, a:1.0} } );\n   spritey.position.set(55,105,55);\n   scene.add( spritey );\n   */\n  core.makeTextSprite = function (THREE, message, parameters) {\n    // canvas 2D内容\n    var mct = core.makeCanvasText(message, parameters);\n    var context = mct.context;\n    var canvas = mct.canvas;\n\n    // 画血槽\n    var size = { x: 2, y: 2, w: 64, h: 64 };\n    roundRect(context, size.x - 1, size.y - 1, size.w + 2, size.h + 2, 5);\n\n    // canvas contents will be used for a texture\n    var texture = new THREE.Texture(canvas);\n    // texture.needsUpdate = true;\n\n    var spriteMaterial = new THREE.SpriteMaterial({\n      map: texture,\n      // useScreenCoordinates: false,\n      fog: false\n    });\n    // 贴图更新\n    var sprite = new THREE.Sprite(spriteMaterial);\n    // sprite.scale.set(100, 100, 1.0)\n    // sprite.scale.set(2,1,1.0);  //ZZ:DEBUG\n\n    // 根据值换算血量\n    sprite.drawHP = function (value, teamType) {\n\n      // 血量\n      context.clearRect(size.x, size.y, 100, size.h);\n      // var color = (value<50)? \"#f25346\" : \"#68c3c0\";\n      var color = '#68c3c0'; // 自己\n      if (teamType == 1) {\n        // 队友\n        color = '#3e90b5';\n      } else if (teamType == 2) {\n        // 敌人\n        color = '#f25346';\n      }\n      context.fillStyle = color;\n      context.fillRect(size.x, size.y, value, size.h);\n      // roundRect(context,size.x,size.y,value,size.h, 5);\n      texture.needsUpdate = true;\n    };\n\n    return sprite;\n  };\n\n  // function for drawing rounded rectangles\n  function roundRect(ctx, x, y, w, h, r) {\n    ctx.beginPath();\n    ctx.moveTo(x + r, y);\n    ctx.lineTo(x + w - r, y);\n    ctx.quadraticCurveTo(x + w, y, x + w, y + r);\n    ctx.lineTo(x + w, y + h - r);\n    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n    ctx.lineTo(x + r, y + h);\n    ctx.quadraticCurveTo(x, y + h, x, y + h - r);\n    ctx.lineTo(x, y + r);\n    ctx.quadraticCurveTo(x, y, x + r, y);\n    ctx.closePath();\n    ctx.fill();\n    // ctx.stroke();\n  }\n\n  //用canvas画一个圆\n  core.spirteCircle = function (THREE) {\n    //微信创建canvas\n    var size = 128;\n    var scale = 0.6;\n    var canvas = DB.isWX ? wx.createCanvas() : document.createElement('canvas');\n    canvas.width = size;\n    canvas.height = size;\n    var drawingContext = canvas.getContext('2d');\n    // draw white background\n    drawingContext.fillStyle = \"#0099DD\";\n    drawingContext.fillRect(0, 0, size, size);\n\n    var cxt = drawingContext;\n    cxt.beginPath();\n    cxt.arc(size / 2, size / 2, size / 2 - 6, 0, 360, false);\n    cxt.lineWidth = 6;\n    cxt.strokeStyle = \"white\";\n    cxt.stroke(); //画空心圆\n    cxt.closePath();\n\n    var texture = new THREE.Texture(canvas);\n    texture.needsUpdate = true; // 贴图更新才能显示\n    var spriteMaterial = new THREE.SpriteMaterial({\n      map: texture,\n      fog: false\n    });\n    // spriteMaterial.map.needsUpdate = true;\n\n\n    // var ballMaterial = new THREE.SpriteMaterial( { map: ballTexture, useScreenCoordinates: true, alignment: THREE.SpriteAlignment.center } );\n\n\n    var sprite = new THREE.Sprite(spriteMaterial);\n    sprite.scale.set(scale, scale, 1); //控制大小\n    return sprite;\n  };\n\n  //测试一个盒子\n  core.testBox = function (THREE) {\n\n    var geometry = new THREE.BoxBufferGeometry(1, 1, 1);\n    var material = new THREE.MeshBasicMaterial({\n      color: 0x0044ff\n      // map : texture\n    });\n    material.map.needsUpdate = true;\n    var cube = new THREE.Mesh(geometry, material);\n    return cube;\n  };\n\n  // 检查是否是手机\n  core.isMobile = function () {\n    var isMobile = false; // initiate as false\n    // device detection\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0, 4))) isMobile = true;\n    return isMobile;\n  };\n\n  module.exports = core;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jbGllbnQvUm9ja1J1bi9jb3JlLmpzPzhkNDkiXSwic291cmNlc0NvbnRlbnQiOlsiXG5jb25zdCBEQiA9IHJlcXVpcmUoJy4vZGF0YWJ1cycpXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vICAgICAgVVRJTFMgICAgICAvLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbnZhciBjb3JlID0ge307XG5jb3JlLmRpc3RhbmNlID0gZnVuY3Rpb24gKHAxLCBwMikge1xuICB2YXIgZHggPSBwMi54IC0gcDEueDtcbiAgdmFyIGR5ID0gcDIueSAtIHAxLnk7XG5cbiAgcmV0dXJuIE1hdGguc3FydCgoZHggKiBkeCkgKyAoZHkgKiBkeSkpO1xufTtcblxuY29yZS5hbmdsZSA9IGZ1bmN0aW9uKHAxLCBwMikge1xuICB2YXIgZHggPSBwMi54IC0gcDEueDtcbiAgdmFyIGR5ID0gcDIueSAtIHAxLnk7XG5cbiAgcmV0dXJuIGNvcmUuZGVncmVlcyhNYXRoLmF0YW4yKGR5LCBkeCkpO1xufTtcblxuLy8gY29yZS5yYWRpYW4gPSBmdW5jdGlvbihwMSwgcDIpIHtcbi8vICAgdmFyIGR4ID0gcDIueCAtIHAxLng7XG4vLyAgIHZhciBkeSA9IHAyLnkgLSBwMS55O1xuLy9cbi8vICAgcmV0dXJuIGNvcmUucmFkaWFucyhNYXRoLmF0YW4yKGR5LCBkeCkpO1xuLy8gfTtcblxuY29yZS5maW5kQ29vcmQgPSBmdW5jdGlvbihwLCBkLCBhKSB7XG4gIHZhciBiID0ge3g6IDAsIHk6IDB9O1xuICBhID0gY29yZS5yYWRpYW5zKGEpO1xuICBiLnggPSBwLnggLSBkICogTWF0aC5jb3MoYSk7XG4gIGIueSA9IHAueSAtIGQgKiBNYXRoLnNpbihhKTtcbiAgcmV0dXJuIGI7XG59O1xuXG5jb3JlLnJhZGlhbnMgPSBmdW5jdGlvbihhKSB7XG4gIHJldHVybiBhICogKE1hdGguUEkgLyAxODApO1xufTtcblxuY29yZS5kZWdyZWVzID0gZnVuY3Rpb24oYSkge1xuICByZXR1cm4gYSAqICgxODAgLyBNYXRoLlBJKTtcbn07XG5cbmNvcmUuZGlyZWN0aW9uID0gZnVuY3Rpb24gKHJBbmdsZSkgeyAgLy/lvKfluqbnrpfmlrnlkJFcbiAgLy8gdmFyIHJBbmdsZSA9IG9iai5hbmdsZS5yYWRpYW47XG4gIHZhciBhbmdsZTQ1ID0gNDUgLy9NYXRoLlBJIC8gNDtcblxuICB2YXIgZGlyZWN0aW9uXG4gIC8vIEFuZ3VsYXIgZGlyZWN0aW9uXG4gIC8vICAgICBcXCAgVVAgL1xuICAvLyAgICAgIFxcICAgL1xuICAvLyBMRUZUICAgICAgIFJJR0hUXG4gIC8vICAgICAgLyAgIFxcXG4gIC8vICAgICAvRE9XTiBcXFxuICAvL1xuICBpZiAockFuZ2xlID4gYW5nbGU0NSAmJiByQW5nbGUgPCAoYW5nbGU0NSAqIDMpKSB7XG4gICAgZGlyZWN0aW9uID0gJ3VwJztcbiAgfSBlbHNlIGlmIChyQW5nbGUgPiAtYW5nbGU0NSAmJiByQW5nbGUgPD0gYW5nbGU0NSkge1xuICAgIGRpcmVjdGlvbiA9ICdsZWZ0JztcbiAgfSBlbHNlIGlmIChyQW5nbGUgPiAoLWFuZ2xlNDUgKiAzKSAmJiByQW5nbGUgPD0gLWFuZ2xlNDUpIHtcbiAgICBkaXJlY3Rpb24gPSAnZG93bic7XG4gIH0gZWxzZSB7XG4gICAgZGlyZWN0aW9uID0gJ3JpZ2h0JztcbiAgfVxuICByZXR1cm4gZGlyZWN0aW9uXG59XG5cbi8v5YWr5Liq5pa55ZCR55qE5o6n5Yi2XG5jb3JlLmVpZ2h0RGlyZWN0aW9uID0gZnVuY3Rpb24gKGFuZ2xlKSB7XG5cbiAgdmFyIF9kaXJlY3Rpb25cbiAgaWYoYW5nbGUgPiAtMjIuNSAmJiBhbmdsZSA8IDIyLjUpXG4gIHtcbiAgICBfZGlyZWN0aW9uPSdsZWZ0JztcbiAgfVxuICBlbHNlIGlmKGFuZ2xlID4gMjIuNSAmJiBhbmdsZSA8IDY3LjUpXG4gIHtcbiAgICBfZGlyZWN0aW9uPSdsZWZ0VXAnXG4gIH1cbiAgZWxzZSBpZihhbmdsZSA+IDY3LjUgJiYgYW5nbGUgPCAxMTIuNSlcbiAge1xuICAgIF9kaXJlY3Rpb249J3VwJ1xuICB9XG4gIGVsc2UgaWYoYW5nbGUgPiAxMTIuNSAmJiBhbmdsZSA8IDE1Ny41KVxuICB7XG4gICAgX2RpcmVjdGlvbj0ncmlnaHRVcCdcbiAgfVxuICBlbHNlIGlmKChhbmdsZSA+IDE1Ny41ICYmIGFuZ2xlIDwgMTgwKXx8KGFuZ2xlIDwgLTE1Ny41ICYmIGFuZ2xlID4gLTE4MCkpXG4gIHtcbiAgICBfZGlyZWN0aW9uPSdyaWdodCdcbiAgfVxuICBlbHNlIGlmKGFuZ2xlIDwgLTExMi41ICYmIGFuZ2xlID4gLTE1Ny41KVxuICB7XG4gICAgX2RpcmVjdGlvbj0ncmlnaHREb3duJ1xuICB9XG4gIGVsc2UgaWYoYW5nbGUgPCAtNjcuNSAmJiBhbmdsZSA+IC0xMTIuNSlcbiAge1xuICAgIF9kaXJlY3Rpb249J2Rvd24nXG4gIH1cbiAgZWxzZSBpZihhbmdsZSA8IC0yMi41ICYmIGFuZ2xlID4gLTY3LjUpXG4gIHtcbiAgICBfZGlyZWN0aW9uPSdsZWZ0RG93bidcbiAgfVxuICByZXR1cm4gX2RpcmVjdGlvblxufVxuXG5cblxuXG4vLyDorr7nva4yROi0tOWbvuWBmlxuY29yZS5tYWtlQ2FudmFzVGV4dCA9IGZ1bmN0aW9uIChtZXNzYWdlLCBwYXJhbWV0ZXJzKSB7XG4gIGlmIChwYXJhbWV0ZXJzID09PSB1bmRlZmluZWQpIHBhcmFtZXRlcnMgPSB7fVxuXG4gIHZhciBmb250ZmFjZSA9IHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoJ2ZvbnRmYWNlJylcbiAgICA/IHBhcmFtZXRlcnNbJ2ZvbnRmYWNlJ10gOiAnQXJpYWwnXG5cbiAgdmFyIGZvbnRzaXplID0gcGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eSgnZm9udHNpemUnKVxuICAgID8gcGFyYW1ldGVyc1snZm9udHNpemUnXSA6IDE4XG5cbiAgdmFyIGJvcmRlclRoaWNrbmVzcyA9IHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoJ2JvcmRlclRoaWNrbmVzcycpXG4gICAgPyBwYXJhbWV0ZXJzWydib3JkZXJUaGlja25lc3MnXSA6IDAuNVxuXG4gIHZhciBib3JkZXJDb2xvciA9IHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoJ2JvcmRlckNvbG9yJylcbiAgICA/IHBhcmFtZXRlcnNbJ2JvcmRlckNvbG9yJ10gOiB7IHI6IDg5LCBnOiA1MSwgYjogNDYsIGE6IDAuOSB9XG5cbiAgdmFyIGJhY2tncm91bmRDb2xvciA9IHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoJ2JhY2tncm91bmRDb2xvcicpXG4gICAgPyBwYXJhbWV0ZXJzWydiYWNrZ3JvdW5kQ29sb3InXSA6IHsgcjogMTU1LCBnOiAxNTUsIGI6IDE1NSwgYTogMC41IH1cblxuICAvL+W+ruS/oeWIm+W7umNhbnZhc1xuICB2YXIgY2FudmFzID0gREIuaXNXWCA/IHd4LmNyZWF0ZUNhbnZhcygpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcblxuXG4gIGNhbnZhcy53aWR0aCA9IHBhcmFtZXRlcnMud2lkdGggfHwgNjRcbiAgY2FudmFzLmhlaWdodCA9IHBhcmFtZXRlcnMuaGVpZ2h0IHx8IDY0XG4gIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJylcbiAgY29udGV4dC5mb250ID0gJ2JvbGQgJyArIGZvbnRzaXplICsgJ3B4ICcgKyBmb250ZmFjZVxuICAvLyBjb250ZXh0LnNoYWRvd0NvbG9yPVwiIzMzMzMzM1wiO1xuICAvLyBjb250ZXh0LnNoYWRvd09mZnNldFkgPSAxO1xuICAvLyDojrflj5blrZfkvZPlpKflsI/lrr3luqZcbiAgdmFyIG1ldHJpY3MgPSBjb250ZXh0Lm1lYXN1cmVUZXh0KG1lc3NhZ2UpXG4gIHZhciB0ZXh0V2lkdGggPSBtZXRyaWNzLndpZHRoXG4gIC8vIOWtkOW8ueS9jee9ru+8jOS9v+WFtuWxheS4rVxuICB2YXIgdGV4dFggPSAoY2FudmFzLndpZHRoIC0gdGV4dFdpZHRoKSAvIDJcbiAgLy8gZGViKHRleHRXaWR0aCk7XG4gIC8vICDlrZfkvZPpopzoibJcbiAgY29udGV4dC5maWxsU3R5bGUgPSBwYXJhbWV0ZXJzWydjb2xvciddIHx8ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDEuMCknXG4gIC8vIOWGmeWQjeWtlyDloavlhYXpopzoibIgIOiuqeWtl+S9k+WxheS4rVxuICBjb250ZXh0LmZpbGxUZXh0KG1lc3NhZ2UsIHRleHRYLCBmb250c2l6ZSArIGJvcmRlclRoaWNrbmVzcylcbiAgLy8g5o+P6L656aKc6ImyXG4gIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAncmdiYSgnICsgYm9yZGVyQ29sb3IuciArICcsJyArIGJvcmRlckNvbG9yLmcgKyAnLCcgKyBib3JkZXJDb2xvci5iICsgJywnICsgYm9yZGVyQ29sb3IuYSArICcpJ1xuICBjb250ZXh0LmxpbmVXaWR0aCA9IGJvcmRlclRoaWNrbmVzc1xuICBjb250ZXh0LnN0cm9rZVRleHQobWVzc2FnZSwgdGV4dFgsIGZvbnRzaXplICsgYm9yZGVyVGhpY2tuZXNzKVxuXG4gIC8vIOiDjOaZr+minOiJslxuICBjb250ZXh0LmZpbGxTdHlsZSA9ICdyZ2JhKCcgKyBiYWNrZ3JvdW5kQ29sb3IuciArICcsJyArIGJhY2tncm91bmRDb2xvci5nICsgJywnICtcbiAgICBiYWNrZ3JvdW5kQ29sb3IuYiArICcsJyArIGJhY2tncm91bmRDb2xvci5hICsgJyknXG4gIHJldHVybiB7Y2FudmFzOiBjYW52YXMsIGNvbnRleHQ6IGNvbnRleHR9XG59XG5cblxuXG4vLyDorr7nva7kuIDkuKrnsr7ngbVcbi8qXG4gdmFyIHNwcml0ZXkgPSBtYWtlVGV4dFNwcml0ZSggXCIgV29ybGQhIFwiLFxuIHsgZm9udHNpemU6IDMyLCBmb250ZmFjZTogXCJHZW9yZ2lhXCIsIGJvcmRlckNvbG9yOiB7cjowLCBnOjAsIGI6MjU1LCBhOjEuMH0gfSApO1xuIHNwcml0ZXkucG9zaXRpb24uc2V0KDU1LDEwNSw1NSk7XG4gc2NlbmUuYWRkKCBzcHJpdGV5ICk7XG4gKi9cbmNvcmUubWFrZVRleHRTcHJpdGUgPSBmdW5jdGlvbiAoVEhSRUUsIG1lc3NhZ2UsIHBhcmFtZXRlcnMpIHtcbiAgLy8gY2FudmFzIDJE5YaF5a65XG4gIHZhciBtY3QgPSBjb3JlLm1ha2VDYW52YXNUZXh0KG1lc3NhZ2UsIHBhcmFtZXRlcnMpXG4gIHZhciBjb250ZXh0ID0gbWN0LmNvbnRleHRcbiAgdmFyIGNhbnZhcyA9IG1jdC5jYW52YXNcblxuICAvLyDnlLvooYDmp71cbiAgdmFyIHNpemUgPSB7eDogMiwgeTogMiwgdzogNjQsIGg6IDY0fVxuICByb3VuZFJlY3QoY29udGV4dCwgc2l6ZS54IC0gMSwgc2l6ZS55IC0gMSwgc2l6ZS53ICsgMiwgc2l6ZS5oICsgMiwgNSlcblxuICAvLyBjYW52YXMgY29udGVudHMgd2lsbCBiZSB1c2VkIGZvciBhIHRleHR1cmVcbiAgdmFyIHRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZShjYW52YXMpXG4gIC8vIHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xuXG4gIHZhciBzcHJpdGVNYXRlcmlhbCA9IG5ldyBUSFJFRS5TcHJpdGVNYXRlcmlhbChcbiAgICB7XG4gICAgICBtYXA6IHRleHR1cmUsXG4gICAgICAvLyB1c2VTY3JlZW5Db29yZGluYXRlczogZmFsc2UsXG4gICAgICBmb2c6ZmFsc2VcbiAgICB9KVxuICAvLyDotLTlm77mm7TmlrBcbiAgdmFyIHNwcml0ZSA9IG5ldyBUSFJFRS5TcHJpdGUoc3ByaXRlTWF0ZXJpYWwpXG4gIC8vIHNwcml0ZS5zY2FsZS5zZXQoMTAwLCAxMDAsIDEuMClcbiAgLy8gc3ByaXRlLnNjYWxlLnNldCgyLDEsMS4wKTsgIC8vWlo6REVCVUdcblxuICAvLyDmoLnmja7lgLzmjaLnrpfooYDph49cbiAgc3ByaXRlLmRyYXdIUCA9IGZ1bmN0aW9uICh2YWx1ZSwgdGVhbVR5cGUpIHtcblxuICAgIC8vIOihgOmHj1xuICAgIGNvbnRleHQuY2xlYXJSZWN0KHNpemUueCwgc2l6ZS55LCAxMDAsIHNpemUuaClcbiAgICAvLyB2YXIgY29sb3IgPSAodmFsdWU8NTApPyBcIiNmMjUzNDZcIiA6IFwiIzY4YzNjMFwiO1xuICAgIHZhciBjb2xvciA9ICcjNjhjM2MwJyAvLyDoh6rlt7FcbiAgICBpZiAodGVhbVR5cGUgPT0gMSkgeyAvLyDpmJ/lj4tcbiAgICAgIGNvbG9yID0gJyMzZTkwYjUnXG4gICAgfSBlbHNlIGlmICh0ZWFtVHlwZSA9PSAyKSB7IC8vIOaVjOS6ulxuICAgICAgY29sb3IgPSAnI2YyNTM0NidcbiAgICB9XG4gICAgY29udGV4dC5maWxsU3R5bGUgPSBjb2xvclxuICAgIGNvbnRleHQuZmlsbFJlY3Qoc2l6ZS54LCBzaXplLnksIHZhbHVlLCBzaXplLmgpXG4gICAgLy8gcm91bmRSZWN0KGNvbnRleHQsc2l6ZS54LHNpemUueSx2YWx1ZSxzaXplLmgsIDUpO1xuICAgIHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlXG4gIH1cblxuICByZXR1cm4gc3ByaXRlXG59XG5cbi8vIGZ1bmN0aW9uIGZvciBkcmF3aW5nIHJvdW5kZWQgcmVjdGFuZ2xlc1xuZnVuY3Rpb24gcm91bmRSZWN0IChjdHgsIHgsIHksIHcsIGgsIHIpIHtcbiAgY3R4LmJlZ2luUGF0aCgpXG4gIGN0eC5tb3ZlVG8oeCArIHIsIHkpXG4gIGN0eC5saW5lVG8oeCArIHcgLSByLCB5KVxuICBjdHgucXVhZHJhdGljQ3VydmVUbyh4ICsgdywgeSwgeCArIHcsIHkgKyByKVxuICBjdHgubGluZVRvKHggKyB3LCB5ICsgaCAtIHIpXG4gIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHggKyB3LCB5ICsgaCwgeCArIHcgLSByLCB5ICsgaClcbiAgY3R4LmxpbmVUbyh4ICsgciwgeSArIGgpXG4gIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHkgKyBoLCB4LCB5ICsgaCAtIHIpXG4gIGN0eC5saW5lVG8oeCwgeSArIHIpXG4gIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHksIHggKyByLCB5KVxuICBjdHguY2xvc2VQYXRoKClcbiAgY3R4LmZpbGwoKVxuICAvLyBjdHguc3Ryb2tlKCk7XG59XG5cblxuLy/nlKhjYW52YXPnlLvkuIDkuKrlnIZcbmNvcmUuc3BpcnRlQ2lyY2xlID0gZnVuY3Rpb24gKFRIUkVFKSB7XG4gIC8v5b6u5L+h5Yib5bu6Y2FudmFzXG4gIGNvbnN0IHNpemUgPSAxMjhcbiAgY29uc3Qgc2NhbGUgPSAwLjZcbiAgY29uc3QgY2FudmFzID0gREIuaXNXWCA/IHd4LmNyZWF0ZUNhbnZhcygpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcbiAgY2FudmFzLndpZHRoID0gc2l6ZVxuICBjYW52YXMuaGVpZ2h0ID0gc2l6ZVxuICBjb25zdCBkcmF3aW5nQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCAnMmQnICk7XG4gIC8vIGRyYXcgd2hpdGUgYmFja2dyb3VuZFxuICBkcmF3aW5nQ29udGV4dC5maWxsU3R5bGUgPSBcIiMwMDk5RERcIjtcbiAgZHJhd2luZ0NvbnRleHQuZmlsbFJlY3QoIDAsIDAsIHNpemUsIHNpemUgKTtcblxuICBjb25zdCBjeHQgPSBkcmF3aW5nQ29udGV4dFxuICBjeHQuYmVnaW5QYXRoKCk7XG4gIGN4dC5hcmMoc2l6ZS8yLCBzaXplLzIsIHNpemUvMi02LDAsMzYwLGZhbHNlKTtcbiAgY3h0LmxpbmVXaWR0aD02O1xuICBjeHQuc3Ryb2tlU3R5bGU9XCJ3aGl0ZVwiO1xuICBjeHQuc3Ryb2tlKCk7Ly/nlLvnqbrlv4PlnIZcbiAgY3h0LmNsb3NlUGF0aCgpO1xuXG4gIGNvbnN0IHRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZShjYW52YXMpXG4gIHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlIC8vIOi0tOWbvuabtOaWsOaJjeiDveaYvuekulxuICBjb25zdCBzcHJpdGVNYXRlcmlhbCA9IG5ldyBUSFJFRS5TcHJpdGVNYXRlcmlhbChcbiAgICB7XG4gICAgICBtYXA6IHRleHR1cmUsXG4gICAgICBmb2c6ZmFsc2UsXG59KVxuICAvLyBzcHJpdGVNYXRlcmlhbC5tYXAubmVlZHNVcGRhdGUgPSB0cnVlO1xuXG5cbiAgLy8gdmFyIGJhbGxNYXRlcmlhbCA9IG5ldyBUSFJFRS5TcHJpdGVNYXRlcmlhbCggeyBtYXA6IGJhbGxUZXh0dXJlLCB1c2VTY3JlZW5Db29yZGluYXRlczogdHJ1ZSwgYWxpZ25tZW50OiBUSFJFRS5TcHJpdGVBbGlnbm1lbnQuY2VudGVyIH0gKTtcblxuXG4gIGNvbnN0IHNwcml0ZSA9IG5ldyBUSFJFRS5TcHJpdGUoc3ByaXRlTWF0ZXJpYWwpXG4gIHNwcml0ZS5zY2FsZS5zZXQoIHNjYWxlLCBzY2FsZSwgMSApOyAgLy/mjqfliLblpKflsI9cbiAgcmV0dXJuIHNwcml0ZVxufVxuXG5cbi8v5rWL6K+V5LiA5Liq55uS5a2QXG5jb3JlLnRlc3RCb3ggPSBmdW5jdGlvbiAoVEhSRUUpIHtcblxuICBjb25zdCBnZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hCdWZmZXJHZW9tZXRyeSggMSwgMSwgMSApO1xuICBjb25zdCBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCgge1xuICAgIGNvbG9yOiAweDAwNDRmZixcbiAgICAvLyBtYXAgOiB0ZXh0dXJlXG4gIH0gKTtcbiAgbWF0ZXJpYWwubWFwLm5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgY29uc3QgY3ViZSA9IG5ldyBUSFJFRS5NZXNoKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcbiAgcmV0dXJuIGN1YmVcblxuXG59XG5cblxuLy8g5qOA5p+l5piv5ZCm5piv5omL5py6XG5jb3JlLmlzTW9iaWxlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgaXNNb2JpbGUgPSBmYWxzZSAvLyBpbml0aWF0ZSBhcyBmYWxzZVxuLy8gZGV2aWNlIGRldGVjdGlvblxuICBpZiAoLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlwYWR8aXJpc3xraW5kbGV8QW5kcm9pZHxTaWxrfGxnZSB8bWFlbW98bWlkcHxtbXB8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgKGNlfHBob25lKXx4ZGF8eGlpbm8vaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpIHx8XG4gICAgLzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHNcXC0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8XFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XFwtKG58dSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG1cXC18Y2VsbHxjaHRtfGNsZGN8Y21kXFwtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjXFwtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnxcXC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXFwtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmXFwtNXxnXFwtbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZFxcLShtfHB8dCl8aGVpXFwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcXC1jfGh0KGMoXFwtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aVxcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcXC18XFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFxcLyl8a2xvbnxrcHQgfGt3Y1xcLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHxcXC1bYS13XSl8bGlid3xseW54fG0xXFwtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG1cXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcXC18IHxvfHYpfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMCgwfDIpfG41MCgwfDJ8NSl8bjcoMCgwfDEpfDEwKXxuZSgoY3xtKVxcLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8XFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXFwtMnxwbyhja3xydHxzZSl8cHJveHxwc2lvfHB0XFwtZ3xxYVxcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XFwtWzItN118aVxcLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcXC18b298cFxcLSl8c2RrXFwvfHNlKGMoXFwtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaFxcLXxzaGFyfHNpZShcXC18bSl8c2tcXC0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGhcXC18dlxcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFxcLXx0ZGdcXC18dGVsKGl8bSl8dGltXFwtfHRcXC1tb3x0byhwbHxzaCl8dHMoNzB8bVxcLXxtM3xtNSl8dHhcXC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXxcXC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKFxcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1xcLXx5b3VyfHpldG98enRlXFwtL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50LnN1YnN0cigwLCA0KSkpIGlzTW9iaWxlID0gdHJ1ZVxuICByZXR1cm4gaXNNb2JpbGVcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjb3JlXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNsaWVudC9Sb2NrUnVuL2NvcmUuanMiXSwibWFwcGluZ3MiOiI7Ozs7QUFDQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7Ozs7Ozs7QUFBQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFGQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(3)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(require('./main.js'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(global.main);\n    global.index = mod.exports;\n  }\n})(undefined, function (Main) {\n  'use strict';\n\n  // import Main from './main'\n  var main = Main(); // require(\"babel-polyfill\")\n  // require(\"babel-register\");\n\n  // require.register(\"./main.js\", function(module, exports, require){\n  //   // Module code goes here\n  //   module.exports = function(x) {\n  //     console.log('amodule',x);\n  //   };\n  // });\n\n  console.log('sdfasf', main);\n  main.THREE = THREE;\n  main.ctx = null;\n  // main.joystick = nipplejs\n  main.init();\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jbGllbnQvUm9ja1J1bi9pbmRleC5qcz9iNTNmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlcXVpcmUoXCJiYWJlbC1wb2x5ZmlsbFwiKVxuLy8gcmVxdWlyZShcImJhYmVsLXJlZ2lzdGVyXCIpO1xuXG4vLyByZXF1aXJlLnJlZ2lzdGVyKFwiLi9tYWluLmpzXCIsIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgcmVxdWlyZSl7XG4vLyAgIC8vIE1vZHVsZSBjb2RlIGdvZXMgaGVyZVxuLy8gICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHgpIHtcbi8vICAgICBjb25zb2xlLmxvZygnYW1vZHVsZScseCk7XG4vLyAgIH07XG4vLyB9KTtcblxuY29uc3QgTWFpbiA9IHJlcXVpcmUoJy4vbWFpbi5qcycpXG4vLyBpbXBvcnQgTWFpbiBmcm9tICcuL21haW4nXG5sZXQgbWFpbiA9IE1haW4oKVxuY29uc29sZS5sb2coJ3NkZmFzZicsIG1haW4pXG5tYWluLlRIUkVFID0gVEhSRUVcbm1haW4uY3R4ID0gbnVsbFxuLy8gbWFpbi5qb3lzdGljayA9IG5pcHBsZWpzXG5tYWluLmluaXQoKVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjbGllbnQvUm9ja1J1bi9pbmRleC5qcyJdLCJtYXBwaW5ncyI6Ijs7OztBQVVBO0FBQUE7QUFBQTtBQUFBOztBQUFBOzs7Ozs7OztBQUFBOzs7QUFDQTtBQUNBO0FBWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0), __webpack_require__(1), __webpack_require__(4), __webpack_require__(6), __webpack_require__(8), __webpack_require__(9), __webpack_require__(18), __webpack_require__(10), __webpack_require__(11), __webpack_require__(12), __webpack_require__(13), __webpack_require__(14), __webpack_require__(15), __webpack_require__(17)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./databus'), require('./core'), require('./scene'), require('./gameLogic'), require('./HUD'), require('./ground'), require('./Environment'), require('./Player'), require('./PlayerMesh'), require('./CameraEffect'), require('./effect'), require('./Dust'), require('./input'), require('./Loader'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.databus, global.core, global.scene, global.gameLogic, global.HUD, global.ground, global.Environment, global.Player, global.PlayerMesh, global.CameraEffect, global.effect, global.Dust, global.input, global.Loader);\n    global.main = mod.exports;\n  }\n})(undefined, function (module, DB, core, Scene, GameLogic, HUD, Ground, Environment, Player, PlayerMesh, CameraEffect, Effect, Dust, Input, LoadModel) {\n  'use strict';\n\n  // require(\"babel-polyfill\")\n  var Main = function Main() {\n    var GL = void 0,\n        Zscene = void 0,\n        hud = void 0,\n        env = void 0;\n\n    var self = {};\n    self.THREE = null;\n    // if(!self.THREE){ console.error('no three js lib'); return}\n    self.ctx = null;\n    // self.nipplejs = null\n\n    self.init = function () {\n      //普通运行，微信单独运行\n      LoadModel(function (mesh) {\n        // set up the scene\n        self.initGame(mesh);\n\n        //call game loop\n        render();\n      });\n    };\n\n    self.initGame = function (model) {\n      // DB = DataBus\n      // console.log('asdf', GameLogic,Scene, DB)\n      GL = new GameLogic(self.THREE);\n      Zscene = new Scene(self.THREE);\n      Zscene.ctx = self.ctx; //微信传入 chontext\n\n      if (!self.ctx) {\n        //启动屏幕\n        DB.isMobile = core.isMobile(); //不是微信的时候判断是否手机\n        var dom = document.getElementById('TutContainer');\n        dom.style.height = DB.WH;\n        Zscene.dom = dom; //创建场景\n        Zscene.init();\n        dom.appendChild(Zscene.renderer.domElement);\n      } else {\n        DB.isMobile = true; //直接判断是手机\n        Zscene.init();\n      }\n\n      //相机特效\n      DB.CE = new CameraEffect(Zscene.scene, Zscene.camera);\n\n      //启动UI\n      hud = new HUD(self.THREE);\n      hud.renderer = Zscene.renderer;\n      hud.init();\n\n      DB.heroSphere = new Player(self.THREE); //加玩家\n      DB.heroSphere.model = new PlayerMesh(model);\n      DB.heroSphere.camera = Zscene.cameraController; //传相机过来控制\n      DB.heroSphere.init();\n      console.log('启动UI', hud, DB.heroSphere.model);\n      Zscene.add(DB.heroSphere.model);\n\n      DB.rollingGroundSphere = new Ground(self.THREE, DB.worldRadius); //加世界\n      Zscene.add(DB.rollingGroundSphere);\n      env = new Environment(self.THREE); //增加地形以外的环境\n      Zscene.add(env.mesh);\n\n      GL.addWorldTrees();\n      GL.resetGame(); //游戏逻辑，重置游戏\n      GL.createTreesPool();\n\n      DB.effect = new Effect(self.THREE); //启动效果\n      Zscene.add(DB.effect.particles);\n      DB.dust = new Dust(self.THREE);\n      Zscene.add(DB.dust.particles);\n\n      var input = new Input(self.THREE); //启动手柄控制\n      var joyDiv = DB.isWX ? canvas : document.getElementById('TutContainer').lastElementChild;\n      input.dom = joyDiv;\n      input.init();\n\n      // Zscene.add( input.touch.indicator )\n      input.touch.HUD = hud; //将界面中的指示传给input\n      // console.log('joy 元素', joyDiv, input.touch.HUD, hud)\n    }; //结束启动 initgame\n\n    function update() {\n      //每帧更新内容    //动画部分\n      //计算水平位置之间的插值\n      DB.lerpVal = 2 * DB.clock.getDelta(); //delta\n      DB.lerpVal *= DB.isWX ? 1000 : 1;\n\n      if (DB.isShowStats) {\n        //DEBUG\n        DB.stats.update();\n      }\n\n      //相机特效\n      if (DB.CE) {\n        DB.CE.update();\n      }\n\n      // console.log(heroSphere)\n      //旋转地面\n      if (DB.rollingGroundSphere) {\n        DB.rollingGroundSphere.animation(DB.rollingSpeed);\n      }\n      if (env) {\n        env.animation(DB.rollingSpeed);\n      } //环境动画\n      if (DB.heroSphere) {\n        DB.heroSphere.animation();\n      } //英雄本身动画\n      //效果\n      if (DB.effect) {\n        DB.effect.doExplosionLogic();\n      }\n      if (DB.dust) {\n        DB.dust.dustUpdate();\n      }\n    }\n\n    //慢速循环\n    var fixedCount = 0;\n\n    function fixedUpdate() {\n      fixedCount += 1;\n      if (fixedCount < 6) return;\n      fixedCount = 0;\n\n      //逻辑部分\n      if (!GL) return;\n      GL.fixUpdateByTime(); //计算得分\n      GL.fixUpdateByDistanz(); //游戏逻辑固定更新\n      GL.doTreeLogic(); //树的碰撞计算\n    }\n\n    self.rend = function () {\n      //给微信外部调用\n      update();\n      fixedUpdate();\n      if (Zscene) Zscene.rend();\n      if (hud) hud.rend(); //UI层刷新\n      // if(DB.CE) DB.CE.shake.update() //相机特效\n    };\n\n    function render() {\n      self.rend();\n      requestAnimationFrame(render); //request next update\n    }\n\n    return self;\n  };\n  // const Tree = require('./tree')\n\n  module.exports = Main;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jbGllbnQvUm9ja1J1bi9tYWluLmpzPzk0NWMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcmVxdWlyZShcImJhYmVsLXBvbHlmaWxsXCIpXG5jb25zdCBEQiA9IHJlcXVpcmUoJy4vZGF0YWJ1cycpXG5jb25zdCBjb3JlID0gcmVxdWlyZSgnLi9jb3JlJylcbmNvbnN0IFNjZW5lID0gcmVxdWlyZSgnLi9zY2VuZScpXG5jb25zdCBHYW1lTG9naWMgPSByZXF1aXJlKCcuL2dhbWVMb2dpYycpXG5jb25zdCBIVUQgPSByZXF1aXJlKCcuL0hVRCcpXG5jb25zdCBHcm91bmQgPSByZXF1aXJlKCcuL2dyb3VuZCcpXG5jb25zdCBFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vRW52aXJvbm1lbnQnKVxuXG5jb25zdCBQbGF5ZXIgPSByZXF1aXJlKCcuL1BsYXllcicpXG5jb25zdCBQbGF5ZXJNZXNoID0gcmVxdWlyZSgnLi9QbGF5ZXJNZXNoJylcbi8vIGNvbnN0IFRyZWUgPSByZXF1aXJlKCcuL3RyZWUnKVxuXG5jb25zdCBDYW1lcmFFZmZlY3QgPSByZXF1aXJlKCcuL0NhbWVyYUVmZmVjdCcpXG5jb25zdCBFZmZlY3QgPSByZXF1aXJlKCcuL2VmZmVjdCcpXG5jb25zdCBEdXN0ID0gcmVxdWlyZSgnLi9EdXN0JylcblxuY29uc3QgSW5wdXQgPSByZXF1aXJlKCcuL2lucHV0JylcblxuY29uc3QgTG9hZE1vZGVsID0gcmVxdWlyZSgnLi9Mb2FkZXInKVxuXG5jb25zdCBNYWluID0gZnVuY3Rpb24gKCkge1xuICBsZXQgR0wsIFpzY2VuZSwgaHVkLCBlbnZcblxuICBsZXQgc2VsZiA9IHt9XG4gIHNlbGYuVEhSRUUgPSBudWxsXG4gIC8vIGlmKCFzZWxmLlRIUkVFKXsgY29uc29sZS5lcnJvcignbm8gdGhyZWUganMgbGliJyk7IHJldHVybn1cbiAgc2VsZi5jdHggPSBudWxsXG4gIC8vIHNlbGYubmlwcGxlanMgPSBudWxsXG5cbiAgc2VsZi5pbml0ID0gZnVuY3Rpb24oKSB7IC8v5pmu6YCa6L+Q6KGM77yM5b6u5L+h5Y2V54us6L+Q6KGMXG4gICAgTG9hZE1vZGVsKGZ1bmN0aW9uIChtZXNoKSB7XG4gICAgLy8gc2V0IHVwIHRoZSBzY2VuZVxuICAgICAgc2VsZi5pbml0R2FtZShtZXNoKTtcblxuICAgICAgLy9jYWxsIGdhbWUgbG9vcFxuICAgICAgcmVuZGVyKCk7XG4gICAgfSlcblxuICB9XG5cbiAgc2VsZi5pbml0R2FtZSA9IGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgLy8gREIgPSBEYXRhQnVzXG4gICAgLy8gY29uc29sZS5sb2coJ2FzZGYnLCBHYW1lTG9naWMsU2NlbmUsIERCKVxuICAgIEdMID0gbmV3IEdhbWVMb2dpYyhzZWxmLlRIUkVFKVxuICAgIFpzY2VuZSA9IG5ldyBTY2VuZShzZWxmLlRIUkVFKVxuICAgIFpzY2VuZS5jdHggPSBzZWxmLmN0eCAvL+W+ruS/oeS8oOWFpSBjaG9udGV4dFxuXG4gICAgaWYoICFzZWxmLmN0eCApIHsgIC8v5ZCv5Yqo5bGP5bmVXG4gICAgICBEQi5pc01vYmlsZSA9IGNvcmUuaXNNb2JpbGUoKSAvL+S4jeaYr+W+ruS/oeeahOaXtuWAmeWIpOaWreaYr+WQpuaJi+aculxuICAgICAgY29uc3QgZG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1R1dENvbnRhaW5lcicpO1xuICAgICAgZG9tLnN0eWxlLmhlaWdodCA9IERCLldIXG4gICAgICBac2NlbmUuZG9tID0gZG9tIC8v5Yib5bu65Zy65pmvXG4gICAgICBac2NlbmUuaW5pdCgpXG4gICAgICBkb20uYXBwZW5kQ2hpbGQoWnNjZW5lLnJlbmRlcmVyLmRvbUVsZW1lbnQpXG4gICAgfVxuICAgIGVsc2V7XG4gICAgICBEQi5pc01vYmlsZSA9IHRydWUgLy/nm7TmjqXliKTmlq3mmK/miYvmnLpcbiAgICAgIFpzY2VuZS5pbml0KClcbiAgICB9XG5cblxuICAgIC8v55u45py654m55pWIXG4gICAgREIuQ0UgPSBuZXcgQ2FtZXJhRWZmZWN0KFpzY2VuZS5zY2VuZSwgWnNjZW5lLmNhbWVyYSlcblxuICAgIC8v5ZCv5YqoVUlcbiAgICBodWQgPSBuZXcgSFVEKHNlbGYuVEhSRUUpXG4gICAgaHVkLnJlbmRlcmVyID0gWnNjZW5lLnJlbmRlcmVyXG4gICAgaHVkLmluaXQoKVxuXG4gICAgREIuaGVyb1NwaGVyZSA9IG5ldyBQbGF5ZXIoc2VsZi5USFJFRSkgIC8v5Yqg546p5a62XG4gICAgREIuaGVyb1NwaGVyZS5tb2RlbCA9IG5ldyBQbGF5ZXJNZXNoKCBtb2RlbCApXG4gICAgREIuaGVyb1NwaGVyZS5jYW1lcmEgPSBac2NlbmUuY2FtZXJhQ29udHJvbGxlciAvL+S8oOebuOacuui/h+adpeaOp+WItlxuICAgIERCLmhlcm9TcGhlcmUuaW5pdCgpXG4gICAgY29uc29sZS5sb2coJ+WQr+WKqFVJJywgaHVkLCBEQi5oZXJvU3BoZXJlLm1vZGVsKVxuICAgIFpzY2VuZS5hZGQoREIuaGVyb1NwaGVyZS5tb2RlbClcblxuICAgIERCLnJvbGxpbmdHcm91bmRTcGhlcmUgPSBuZXcgR3JvdW5kKHNlbGYuVEhSRUUsIERCLndvcmxkUmFkaXVzKSAgLy/liqDkuJbnlYxcbiAgICBac2NlbmUuYWRkKERCLnJvbGxpbmdHcm91bmRTcGhlcmUpO1xuICAgIGVudiA9IG5ldyBFbnZpcm9ubWVudChzZWxmLlRIUkVFKSAvL+WinuWKoOWcsOW9ouS7peWklueahOeOr+Wig1xuICAgIFpzY2VuZS5hZGQoZW52Lm1lc2gpXG5cbiAgICBHTC5hZGRXb3JsZFRyZWVzKCk7XG4gICAgR0wucmVzZXRHYW1lKCkgIC8v5ri45oiP6YC76L6R77yM6YeN572u5ri45oiPXG4gICAgR0wuY3JlYXRlVHJlZXNQb29sKCk7XG5cbiAgICBEQi5lZmZlY3QgPSBuZXcgRWZmZWN0KHNlbGYuVEhSRUUpICAvL+WQr+WKqOaViOaenFxuICAgIFpzY2VuZS5hZGQoREIuZWZmZWN0LnBhcnRpY2xlcyk7XG4gICAgREIuZHVzdCA9IG5ldyBEdXN0KHNlbGYuVEhSRUUpXG4gICAgWnNjZW5lLmFkZChEQi5kdXN0LnBhcnRpY2xlcylcblxuICAgIGNvbnN0IGlucHV0ID0gbmV3IElucHV0KHNlbGYuVEhSRUUpICAvL+WQr+WKqOaJi+afhOaOp+WItlxuICAgIGNvbnN0IGpveURpdiA9IERCLmlzV1ggP1xuICAgICAgY2FudmFzIDpcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdUdXRDb250YWluZXInKS5sYXN0RWxlbWVudENoaWxkXG4gICAgaW5wdXQuZG9tID0gam95RGl2XG4gICAgaW5wdXQuaW5pdCgpXG5cblxuICAgIC8vIFpzY2VuZS5hZGQoIGlucHV0LnRvdWNoLmluZGljYXRvciApXG4gICAgaW5wdXQudG91Y2guSFVEID0gaHVkIC8v5bCG55WM6Z2i5Lit55qE5oyH56S65Lyg57uZaW5wdXRcbiAgICAvLyBjb25zb2xlLmxvZygnam95IOWFg+e0oCcsIGpveURpdiwgaW5wdXQudG91Y2guSFVELCBodWQpXG5cbiAgfSAvL+e7k+adn+WQr+WKqCBpbml0Z2FtZVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSAoKSB7ICAvL+avj+W4p+abtOaWsOWGheWuuSAgICAvL+WKqOeUu+mDqOWIhlxuICAgIC8v6K6h566X5rC05bmz5L2N572u5LmL6Ze055qE5o+S5YC8XG4gICAgREIubGVycFZhbCA9IDIgKiBEQi5jbG9jay5nZXREZWx0YSgpICAvL2RlbHRhXG4gICAgREIubGVycFZhbCAqPSBEQi5pc1dYID8gMTAwMCA6IDFcblxuICAgIGlmIChEQi5pc1Nob3dTdGF0cykgeyAvL0RFQlVHXG4gICAgICBEQi5zdGF0cy51cGRhdGUoKTtcbiAgICB9XG5cbiAgICAvL+ebuOacuueJueaViFxuICAgIGlmKERCLkNFKXtcbiAgICAgIERCLkNFLnVwZGF0ZSgpXG4gICAgfVxuXG4vLyBjb25zb2xlLmxvZyhoZXJvU3BoZXJlKVxuICAgIC8v5peL6L2s5Zyw6Z2iXG4gICAgaWYgKERCLnJvbGxpbmdHcm91bmRTcGhlcmUpIHtcbiAgICAgIERCLnJvbGxpbmdHcm91bmRTcGhlcmUuYW5pbWF0aW9uKERCLnJvbGxpbmdTcGVlZClcbiAgICB9XG4gICAgaWYgKGVudikgeyBlbnYuYW5pbWF0aW9uKERCLnJvbGxpbmdTcGVlZCkgfSAvL+eOr+Wig+WKqOeUu1xuICAgIGlmIChEQi5oZXJvU3BoZXJlKSB7IERCLmhlcm9TcGhlcmUuYW5pbWF0aW9uKCkgfSAvL+iLsembhOacrOi6q+WKqOeUu1xuICAgIC8v5pWI5p6cXG4gICAgaWYgKERCLmVmZmVjdCkgeyBEQi5lZmZlY3QuZG9FeHBsb3Npb25Mb2dpYygpOyB9XG4gICAgaWYgKERCLmR1c3QpIHsgREIuZHVzdC5kdXN0VXBkYXRlKCk7IH1cblxuICB9XG5cbi8v5oWi6YCf5b6q546vXG4gIGxldCBmaXhlZENvdW50ID0gMFxuXG4gIGZ1bmN0aW9uIGZpeGVkVXBkYXRlICgpIHtcbiAgICBmaXhlZENvdW50ICs9IDFcbiAgICBpZiAoZml4ZWRDb3VudCA8IDYpIHJldHVyblxuICAgIGZpeGVkQ291bnQgPSAwXG5cbiAgICAvL+mAu+i+kemDqOWIhlxuICAgIGlmICghR0wpIHJldHVyblxuICAgIEdMLmZpeFVwZGF0ZUJ5VGltZSgpICAvL+iuoeeul+W+l+WIhlxuICAgIEdMLmZpeFVwZGF0ZUJ5RGlzdGFueigpIC8v5ri45oiP6YC76L6R5Zu65a6a5pu05pawXG4gICAgR0wuZG9UcmVlTG9naWMoKTsgIC8v5qCR55qE56Kw5pKe6K6h566XXG4gIH1cblxuICBzZWxmLnJlbmQgPSBmdW5jdGlvbiAoKSB7ICAvL+e7meW+ruS/oeWklumDqOiwg+eUqFxuICAgIHVwZGF0ZSgpXG4gICAgZml4ZWRVcGRhdGUoKVxuICAgIGlmIChac2NlbmUpIFpzY2VuZS5yZW5kKClcbiAgICBpZiAoaHVkKSBodWQucmVuZCgpICAvL1VJ5bGC5Yi35pawXG4gICAgLy8gaWYoREIuQ0UpIERCLkNFLnNoYWtlLnVwZGF0ZSgpIC8v55u45py654m55pWIXG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXIgKCkge1xuICAgIHNlbGYucmVuZCgpXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7Ly9yZXF1ZXN0IG5leHQgdXBkYXRlXG4gIH1cblxuXG5cbiAgcmV0dXJuIHNlbGZcblxufVxubW9kdWxlLmV4cG9ydHMgPSBNYWluXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNsaWVudC9Sb2NrUnVuL21haW4uanMiXSwibWFwcGluZ3MiOiI7Ozs7QUFDQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7Ozs7Ozs7QUFBQTs7O0FBREE7QUFxQkE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQXpKQTtBQUNBO0FBeUpBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./databus'), require('./stats'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.databus, global.stats);\n    global.scene = mod.exports;\n  }\n})(undefined, function (module, DB, Stats) {\n  'use strict';\n\n  // const HUD = require('./HUD')\n\n  /*\n  如果是微信有可能出现spotlight影子不正常的情况\n  spotLight.shadow.camera.near = 50;\n   */\n\n  //创建场景\n  var Scene = function Scene(THREE) {\n    var scene = void 0,\n        camera = void 0; //, hud\n\n    var self = {};\n    self.renderer = null;\n    self.dom = null;\n    self.ctx = null;\n    self.camera = null; //控制相机的object3D  这个用于控制effect\n    self.cameraController = null; //给外部用控制相机移动\n    self.scene = null; //给外部调用\n\n    self.addScene = function () {\n      var sceneWidth = DB.WD;\n      var sceneHeight = DB.WH;\n      scene = new THREE.Scene(); //the 3d scene\n      // scene.fog = new THREE.FogExp2(0xf0fff0, 0.14);  //创建雾\n      scene.fog = new THREE.FogExp2(DB.color.fog, 0.1); //创建雾\n      camera = new THREE.PerspectiveCamera(60, sceneWidth / sceneHeight, 0.1, 1000); //perspective camera\n      var option = { alpha: true //renderer with transparent backdrop\n      };if (self.ctx) {\n        option.context = self.ctx;\n      }\n      self.renderer = new THREE.WebGLRenderer(option);\n      // self.renderer.setClearColor(0xfffafa, 1);  //背景颜色\n      self.renderer.setClearColor(DB.color.sky, 1); //背景颜色\n      self.renderer.shadowMap.enabled = true; //enable shadow\n      self.renderer.shadowMap.type = THREE.PCFSoftShadowMap; //更加柔和的阴影\n      self.renderer.setSize(sceneWidth, sceneHeight);\n\n      //允许叠加2D在上面\n      self.renderer.autoClear = false; // To allow render overlay on top of sprited sphere\n\n\n      //DEBUG:\n      if (DB.isShowStats) {\n        //判断是否显示刷新值\n\n        self.dom = self.dom || self.ctx.canvas.parentElement;\n        DB.stats = new Stats.ZStats(self.dom); //new Stats();\n      }\n      if (!DB.isMobile) {\n        //不是手机就加旋转\n        Stats.ZOribit(camera, self.renderer);\n      }\n      if (!DB.isMobile) {\n        //不是微信的情况，提供速度修改 骨骼修改\n        new Stats.ZDataGUI(DB);\n      }\n\n      //相机位置\n      camera.position.z = 6.5 + 0.5;\n      camera.position.y = DB.cameraY;\n      camera.lookAt(new THREE.Vector3(0, 0, 0));\n\n      //传camera给玩家动作调用  添加一个obj方便跟踪玩家  嵌套两层用于给相机效果\n      self.camera = new THREE.Object3D();\n      self.cameraController = new THREE.Object3D();\n      self.camera.position.set(0, 0, 0);\n      self.cameraController.position.set(0, 0, 0);\n\n      self.cameraController.add(self.camera);\n      self.camera.add(camera);\n\n      scene.add(self.cameraController);\n      // console.log('camera', camera)\n\n      self.scene = scene;\n\n      //控制屏幕缩放\n      window.addEventListener('resize', onWindowResize, false); //resize callback\n    };\n\n    //添加灯光\n    function addLight() {\n      //创建一个天空的环境光\n      // var hemisphereLight = new THREE.HemisphereLight(0xfffafa, 0x000000, .9)\n      var hemisphereLight = new THREE.HemisphereLight(DB.color.hightlight, DB.color.shodow, 0.9);\n      scene.add(hemisphereLight);\n\n      // const globalLight = new THREE.AmbientLight(0xffffff, 0.1);\n      // scene.add(globalLight)\n\n      // var sun = new THREE.DirectionalLight(0xcdc1c5, 0.9);\n      var sun = new THREE.DirectionalLight(DB.color.sun, 0.6);\n      sun.position.set(12, 8, -7);\n      sun.castShadow = true;\n      scene.add(sun);\n      //Set up shadow properties for the sun light\n      sun.shadow.mapSize.width = 512;\n      sun.shadow.mapSize.height = 512;\n      sun.shadow.camera.near = 0.5;\n      sun.shadow.camera.far = 50;\n    }\n\n    //添加UI\n    function addUI() {\n      var scoreText = document.createElement('div');\n      scoreText.style.position = 'absolute';\n      //text2.style.zIndex = 1;    // if you still don't see the label, try uncommenting this\n      scoreText.style.width = 100;\n      scoreText.style.height = 100;\n      //scoreText.style.backgroundColor = \"blue\";\n      scoreText.innerHTML = \"0\";\n      scoreText.style.top = 50 + 'px';\n      scoreText.style.right = 10 + 'px';\n      document.body.appendChild(scoreText);\n      DB.scoreText = scoreText;\n\n      var infoText = document.createElement('div');\n      infoText.style.position = 'absolute';\n      infoText.style.width = 100;\n      infoText.style.height = 100;\n      infoText.style.backgroundColor = \"yellow\";\n      infoText.innerHTML = \"UP - Jump, Left/Right - Move\";\n      infoText.style.top = 10 + 'px';\n      infoText.style.right = 10 + 'px';\n      document.body.appendChild(infoText);\n    }\n\n    function onWindowResize() {\n      //resize & align\n      var sceneHeight = DB.WD;\n      var sceneWidth = DB.WH;\n      self.renderer.setSize(sceneWidth, sceneHeight);\n      camera.aspect = sceneWidth / sceneHeight;\n      camera.updateProjectionMatrix();\n    }\n\n    //启动设置\n    self.init = function () {\n      self.addScene();\n      addLight();\n      addUI();\n      // hud = new HUD(THREE)\n      // hud.renderer = self.renderer\n      // hud.init()\n    };\n\n    self.add = function (e) {\n      scene.add(e);\n    };\n\n    self.rend = function () {\n      //每帧渲染\n      self.renderer.clear();\n      self.renderer.render(scene, camera); //draw\n      self.renderer.clearDepth();\n      // if(hud) hud.rend()\n    };\n\n    return self;\n  };\n\n  module.exports = Scene;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jbGllbnQvUm9ja1J1bi9zY2VuZS5qcz9jNjc3Il0sInNvdXJjZXNDb250ZW50IjpbIlxuY29uc3QgREIgPSByZXF1aXJlKCcuL2RhdGFidXMnKVxuY29uc3QgU3RhdHMgPSByZXF1aXJlKCcuL3N0YXRzJylcbi8vIGNvbnN0IEhVRCA9IHJlcXVpcmUoJy4vSFVEJylcblxuLypcbuWmguaenOaYr+W+ruS/oeacieWPr+iDveWHuueOsHNwb3RsaWdodOW9seWtkOS4jeato+W4uOeahOaDheWGtVxuc3BvdExpZ2h0LnNoYWRvdy5jYW1lcmEubmVhciA9IDUwO1xuICovXG5cbi8v5Yib5bu65Zy65pmvXG5jb25zdCBTY2VuZSA9IGZ1bmN0aW9uIChUSFJFRSkge1xuICBsZXQgc2NlbmUsIGNhbWVyYS8vLCBodWRcblxuICBjb25zdCBzZWxmID0ge31cbiAgc2VsZi5yZW5kZXJlciA9IG51bGxcbiAgc2VsZi5kb20gPSBudWxsXG4gIHNlbGYuY3R4ID0gbnVsbFxuICBzZWxmLmNhbWVyYSA9IG51bGwgLy/mjqfliLbnm7jmnLrnmoRvYmplY3QzRCAg6L+Z5Liq55So5LqO5o6n5Yi2ZWZmZWN0XG4gIHNlbGYuY2FtZXJhQ29udHJvbGxlciA9IG51bGwgLy/nu5nlpJbpg6jnlKjmjqfliLbnm7jmnLrnp7vliqhcbiAgc2VsZi5zY2VuZSA9IG51bGwgLy/nu5nlpJbpg6josIPnlKhcblxuICBzZWxmLmFkZFNjZW5lID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHNjZW5lV2lkdGggPSBEQi5XRDtcbiAgICBjb25zdCBzY2VuZUhlaWdodCA9IERCLldIO1xuICAgIHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7Ly90aGUgM2Qgc2NlbmVcbiAgICAvLyBzY2VuZS5mb2cgPSBuZXcgVEhSRUUuRm9nRXhwMigweGYwZmZmMCwgMC4xNCk7ICAvL+WIm+W7uumbvlxuICAgIHNjZW5lLmZvZyA9IG5ldyBUSFJFRS5Gb2dFeHAyKERCLmNvbG9yLmZvZywgMC4xKTsgIC8v5Yib5bu66Zu+XG4gICAgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDYwLCBzY2VuZVdpZHRoIC8gc2NlbmVIZWlnaHQsIDAuMSxcbiAgICAgIDEwMDApOy8vcGVyc3BlY3RpdmUgY2FtZXJhXG4gICAgY29uc3Qgb3B0aW9uID0ge2FscGhhOiB0cnVlfS8vcmVuZGVyZXIgd2l0aCB0cmFuc3BhcmVudCBiYWNrZHJvcFxuICAgIGlmIChzZWxmLmN0eCkge1xuICAgICAgb3B0aW9uLmNvbnRleHQgPSBzZWxmLmN0eFxuICAgIH1cbiAgICBzZWxmLnJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIob3B0aW9uKTtcbiAgICAvLyBzZWxmLnJlbmRlcmVyLnNldENsZWFyQ29sb3IoMHhmZmZhZmEsIDEpOyAgLy/og4zmma/popzoibJcbiAgICBzZWxmLnJlbmRlcmVyLnNldENsZWFyQ29sb3IoREIuY29sb3Iuc2t5LCAxKTsgIC8v6IOM5pmv6aKc6ImyXG4gICAgc2VsZi5yZW5kZXJlci5zaGFkb3dNYXAuZW5hYmxlZCA9IHRydWU7ICAvL2VuYWJsZSBzaGFkb3dcbiAgICBzZWxmLnJlbmRlcmVyLnNoYWRvd01hcC50eXBlID0gVEhSRUUuUENGU29mdFNoYWRvd01hcDsgLy/mm7TliqDmn5TlkoznmoTpmLTlvbFcbiAgICBzZWxmLnJlbmRlcmVyLnNldFNpemUoc2NlbmVXaWR0aCwgc2NlbmVIZWlnaHQpO1xuXG4gICAgLy/lhYHorrjlj6DliqAyROWcqOS4iumdolxuICAgIHNlbGYucmVuZGVyZXIuYXV0b0NsZWFyID0gZmFsc2U7IC8vIFRvIGFsbG93IHJlbmRlciBvdmVybGF5IG9uIHRvcCBvZiBzcHJpdGVkIHNwaGVyZVxuXG5cbiAgICAvL0RFQlVHOlxuICAgIGlmIChEQi5pc1Nob3dTdGF0cykgeyAgLy/liKTmlq3mmK/lkKbmmL7npLrliLfmlrDlgLxcblxuICAgICAgc2VsZi5kb20gPSBzZWxmLmRvbSB8fCBzZWxmLmN0eC5jYW52YXMucGFyZW50RWxlbWVudFxuICAgICAgREIuc3RhdHMgPSBuZXcgU3RhdHMuWlN0YXRzKHNlbGYuZG9tKSAvL25ldyBTdGF0cygpO1xuICAgIH1cbiAgICBpZiAoIURCLmlzTW9iaWxlKSB7IC8v5LiN5piv5omL5py65bCx5Yqg5peL6L2sXG4gICAgICBTdGF0cy5aT3JpYml0KGNhbWVyYSwgc2VsZi5yZW5kZXJlcilcbiAgICB9XG4gICAgaWYoIURCLmlzTW9iaWxlKXsgLy/kuI3mmK/lvq7kv6HnmoTmg4XlhrXvvIzmj5DkvpvpgJ/luqbkv67mlLkg6aqo6aq85L+u5pS5XG4gICAgICBuZXcgU3RhdHMuWkRhdGFHVUkoIERCIClcbiAgICB9XG5cblxuICAgIC8v55u45py65L2N572uXG4gICAgY2FtZXJhLnBvc2l0aW9uLnogPSA2LjUgKyAwLjVcbiAgICBjYW1lcmEucG9zaXRpb24ueSA9IERCLmNhbWVyYVlcbiAgICBjYW1lcmEubG9va0F0KCBuZXcgVEhSRUUuVmVjdG9yMygwLDAsMCkgKVxuXG4gICAgLy/kvKBjYW1lcmHnu5nnjqnlrrbliqjkvZzosIPnlKggIOa3u+WKoOS4gOS4qm9iauaWueS+v+i3n+i4queOqeWutiAg5bWM5aWX5Lik5bGC55So5LqO57uZ55u45py65pWI5p6cXG4gICAgc2VsZi5jYW1lcmEgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKVxuICAgIHNlbGYuY2FtZXJhQ29udHJvbGxlciA9IG5ldyBUSFJFRS5PYmplY3QzRCgpXG4gICAgc2VsZi5jYW1lcmEucG9zaXRpb24uc2V0KDAsIDAsIDApXG4gICAgc2VsZi5jYW1lcmFDb250cm9sbGVyLnBvc2l0aW9uLnNldCgwLCAwLCAwKVxuXG4gICAgc2VsZi5jYW1lcmFDb250cm9sbGVyLmFkZChzZWxmLmNhbWVyYSlcbiAgICBzZWxmLmNhbWVyYS5hZGQoY2FtZXJhKVxuXG4gICAgc2NlbmUuYWRkKHNlbGYuY2FtZXJhQ29udHJvbGxlcilcbi8vIGNvbnNvbGUubG9nKCdjYW1lcmEnLCBjYW1lcmEpXG5cbiAgICBzZWxmLnNjZW5lID0gc2NlbmVcblxuICAgIC8v5o6n5Yi25bGP5bmV57yp5pS+XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uV2luZG93UmVzaXplLCBmYWxzZSk7Ly9yZXNpemUgY2FsbGJhY2tcblxuICB9XG5cbi8v5re75Yqg54Gv5YWJXG4gIGZ1bmN0aW9uIGFkZExpZ2h0KCkge1xuICAgIC8v5Yib5bu65LiA5Liq5aSp56m655qE546v5aKD5YWJXG4gICAgLy8gdmFyIGhlbWlzcGhlcmVMaWdodCA9IG5ldyBUSFJFRS5IZW1pc3BoZXJlTGlnaHQoMHhmZmZhZmEsIDB4MDAwMDAwLCAuOSlcbiAgICB2YXIgaGVtaXNwaGVyZUxpZ2h0ID0gbmV3IFRIUkVFLkhlbWlzcGhlcmVMaWdodChEQi5jb2xvci5oaWdodGxpZ2h0LCBEQi5jb2xvci5zaG9kb3csIDAuOSlcbiAgICBzY2VuZS5hZGQoaGVtaXNwaGVyZUxpZ2h0KTtcblxuICAgIC8vIGNvbnN0IGdsb2JhbExpZ2h0ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCgweGZmZmZmZiwgMC4xKTtcbiAgICAvLyBzY2VuZS5hZGQoZ2xvYmFsTGlnaHQpXG5cbiAgICAvLyB2YXIgc3VuID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhjZGMxYzUsIDAuOSk7XG4gICAgdmFyIHN1biA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KERCLmNvbG9yLnN1biwgMC42KTtcbiAgICBzdW4ucG9zaXRpb24uc2V0KDEyLCA4LCAtNyk7XG4gICAgc3VuLmNhc3RTaGFkb3cgPSB0cnVlO1xuICAgIHNjZW5lLmFkZChzdW4pO1xuICAgIC8vU2V0IHVwIHNoYWRvdyBwcm9wZXJ0aWVzIGZvciB0aGUgc3VuIGxpZ2h0XG4gICAgc3VuLnNoYWRvdy5tYXBTaXplLndpZHRoID0gNTEyO1xuICAgIHN1bi5zaGFkb3cubWFwU2l6ZS5oZWlnaHQgPSA1MTI7XG4gICAgc3VuLnNoYWRvdy5jYW1lcmEubmVhciA9IDAuNTtcbiAgICBzdW4uc2hhZG93LmNhbWVyYS5mYXIgPSA1MDtcbiAgfVxuXG4vL+a3u+WKoFVJXG4gIGZ1bmN0aW9uIGFkZFVJICgpIHtcbiAgICB2YXIgc2NvcmVUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgc2NvcmVUZXh0LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAvL3RleHQyLnN0eWxlLnpJbmRleCA9IDE7ICAgIC8vIGlmIHlvdSBzdGlsbCBkb24ndCBzZWUgdGhlIGxhYmVsLCB0cnkgdW5jb21tZW50aW5nIHRoaXNcbiAgICBzY29yZVRleHQuc3R5bGUud2lkdGggPSAxMDA7XG4gICAgc2NvcmVUZXh0LnN0eWxlLmhlaWdodCA9IDEwMDtcbiAgICAvL3Njb3JlVGV4dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImJsdWVcIjtcbiAgICBzY29yZVRleHQuaW5uZXJIVE1MID0gXCIwXCI7XG4gICAgc2NvcmVUZXh0LnN0eWxlLnRvcCA9IDUwICsgJ3B4JztcbiAgICBzY29yZVRleHQuc3R5bGUucmlnaHQgPSAxMCArICdweCc7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY29yZVRleHQpO1xuICAgIERCLnNjb3JlVGV4dCA9IHNjb3JlVGV4dFxuXG4gICAgdmFyIGluZm9UZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgaW5mb1RleHQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIGluZm9UZXh0LnN0eWxlLndpZHRoID0gMTAwO1xuICAgIGluZm9UZXh0LnN0eWxlLmhlaWdodCA9IDEwMDtcbiAgICBpbmZvVGV4dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInllbGxvd1wiO1xuICAgIGluZm9UZXh0LmlubmVySFRNTCA9IFwiVVAgLSBKdW1wLCBMZWZ0L1JpZ2h0IC0gTW92ZVwiO1xuICAgIGluZm9UZXh0LnN0eWxlLnRvcCA9IDEwICsgJ3B4JztcbiAgICBpbmZvVGV4dC5zdHlsZS5yaWdodCA9IDEwICsgJ3B4JztcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGluZm9UZXh0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uV2luZG93UmVzaXplICgpIHtcbiAgICAvL3Jlc2l6ZSAmIGFsaWduXG4gICAgdmFyIHNjZW5lSGVpZ2h0ID0gREIuV0Q7XG4gICAgdmFyIHNjZW5lV2lkdGggPSBEQi5XSDtcbiAgICBzZWxmLnJlbmRlcmVyLnNldFNpemUoc2NlbmVXaWR0aCwgc2NlbmVIZWlnaHQpO1xuICAgIGNhbWVyYS5hc3BlY3QgPSBzY2VuZVdpZHRoIC8gc2NlbmVIZWlnaHQ7XG4gICAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgfVxuXG5cbiAgLy/lkK/liqjorr7nva5cbiAgc2VsZi5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIHNlbGYuYWRkU2NlbmUoKVxuICAgIGFkZExpZ2h0KClcbiAgICBhZGRVSSgpXG4gICAgLy8gaHVkID0gbmV3IEhVRChUSFJFRSlcbiAgICAvLyBodWQucmVuZGVyZXIgPSBzZWxmLnJlbmRlcmVyXG4gICAgLy8gaHVkLmluaXQoKVxuICB9XG5cbiAgc2VsZi5hZGQgPSBmdW5jdGlvbiAoZSkge1xuICAgIHNjZW5lLmFkZChlKVxuICB9XG5cbiAgc2VsZi5yZW5kID0gZnVuY3Rpb24oKXsgIC8v5q+P5bin5riy5p+TXG4gICAgc2VsZi5yZW5kZXJlci5jbGVhcigpO1xuICAgIHNlbGYucmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpOy8vZHJhd1xuICAgIHNlbGYucmVuZGVyZXIuY2xlYXJEZXB0aCgpO1xuICAgIC8vIGlmKGh1ZCkgaHVkLnJlbmQoKVxuICB9XG5cblxuICByZXR1cm4gc2VsZlxufVxuXG5cbm1vZHVsZS5leHBvcnRzID0gU2NlbmVcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjbGllbnQvUm9ja1J1bi9zY2VuZS5qcyJdLCJtYXBwaW5ncyI6Ijs7OztBQUNBO0FBQUE7QUFBQTtBQUFBOztBQUFBOzs7Ozs7OztBQUFBOzs7QUFFQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports);\n    global.stats = mod.exports;\n  }\n})(undefined, function (exports) {\n  'use strict';\n\n  //初始化统计对象\n\n\n  var ZStats = function ZStats(dom) {\n    var self = {};\n\n    // self.stats = initStats();\n\n    self.update = function () {\n      self.stats.update();\n    };\n\n    //初始化统计对象\n    self.initStats = function () {\n      self.stats = new Stats();\n      //设置统计模式\n      self.stats.setMode(0); // 0: fps, 1: ms\n      // self.stats.domElement.style = 'position:absolute;top:0px;left:0px;width:80px';\n      self.stats.domElement.style.position = 'absolute';\n      self.stats.domElement.style.top = '0px';\n      self.stats.domElement.style.left = '0px';\n      // $(\"#container\").append( stats.domElement );\n      dom.appendChild(self.stats.domElement);\n      // dom.appendChild(self.stats.dom);\n    };\n\n    self.initStats();\n    return self;\n  };\n\n  var ZOribit = function ZOribit(camera, renderer) {\n\n    var orbit = void 0;\n\n    var orbitControl = new THREE.OrbitControls(camera, renderer.domElement); //helper to rotate around in scene\n    // orbitControl.addEventListener( 'change', updateControls );// remove when using animation loop\n    orbitControl.noKeys = true;\n    orbitControl.noPan = true;\n    // orbitControl.enableZoom = false;\n    // orbitControl.minPolarAngle = 1.1;\n    // orbitControl.maxPolarAngle = 1.1;\n    // orbitControl.minAzimuthAngle = -0.2;\n    // orbitControl.maxAzimuthAngle = 0.2;\n    // orbit = orbitControl\n\n    // remove when using animation loop\n    //   function updateControls() {\n    //     if(!orbit) return\n    //     orbit.update();\n    //   }\n  };\n\n  //界面调整内容\n  var ZDataGUI = function ZDataGUI(options) {\n\n    var gui = new dat.GUI();\n    var f1 = gui.addFolder('玩家数据');\n    f1.add(options, 'PlayerMeshFootRate', 0, 1).step(0.001);\n    f1.add(options, 'rollingSpeed', -0.0001, 0.02).step(0.0001);\n    f1.open();\n\n    // const bonesNames = [\n    //   \"mainBone\", \"headBone\", \"leftArm\", \"rightArm\",  \"downBone\", \"rightLeg\", \"leftLeg\"\n    // ]\n    //\n    // let ff\n    // for (let [index, elem] of bonesNames.entries()) {\n    //   // console.log(index, elem);\n    //   ff = gui.addFolder(elem);\n    //   ff.add(options, 'bone'+index+'x', -5, 5).step(0.1);\n    //   ff.add(options, 'bone'+index+'y', -5, 5).step(0.1);\n    //   ff.add(options, 'bone'+index+'z', -5, 5).step(0.1);\n    //   if( index === 0 || index === 4 ){ continue }\n    //   ff.open()\n    // }\n  };\n\n  exports.ZStats = ZStats;\n  exports.ZOribit = ZOribit;\n  exports.ZDataGUI = ZDataGUI;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jbGllbnQvUm9ja1J1bi9zdGF0cy5qcz8xMjhhIl0sInNvdXJjZXNDb250ZW50IjpbIi8v5Yid5aeL5YyW57uf6K6h5a+56LGhXG5cblxuY29uc3QgWlN0YXRzID0gZnVuY3Rpb24gKCBkb20gKSB7XG4gIHZhciBzZWxmID0ge31cblxuICAvLyBzZWxmLnN0YXRzID0gaW5pdFN0YXRzKCk7XG5cbiAgc2VsZi51cGRhdGUgPSBmdW5jdGlvbigpe1xuICAgIHNlbGYuc3RhdHMudXBkYXRlKCk7XG4gIH1cblxuICAvL+WIneWni+WMlue7n+iuoeWvueixoVxuICBzZWxmLmluaXRTdGF0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICBzZWxmLnN0YXRzID0gbmV3IFN0YXRzKCk7XG4gICAgLy/orr7nva7nu5/orqHmqKHlvI9cbiAgICBzZWxmLnN0YXRzLnNldE1vZGUoMCk7IC8vIDA6IGZwcywgMTogbXNcbiAgICAvLyBzZWxmLnN0YXRzLmRvbUVsZW1lbnQuc3R5bGUgPSAncG9zaXRpb246YWJzb2x1dGU7dG9wOjBweDtsZWZ0OjBweDt3aWR0aDo4MHB4JztcbiAgICBzZWxmLnN0YXRzLmRvbUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHNlbGYuc3RhdHMuZG9tRWxlbWVudC5zdHlsZS50b3AgPSAnMHB4JztcbiAgICBzZWxmLnN0YXRzLmRvbUVsZW1lbnQuc3R5bGUubGVmdCA9ICcwcHgnO1xuICAgIC8vICQoXCIjY29udGFpbmVyXCIpLmFwcGVuZCggc3RhdHMuZG9tRWxlbWVudCApO1xuICAgIGRvbS5hcHBlbmRDaGlsZChzZWxmLnN0YXRzLmRvbUVsZW1lbnQpO1xuICAgIC8vIGRvbS5hcHBlbmRDaGlsZChzZWxmLnN0YXRzLmRvbSk7XG4gIH1cblxuICBzZWxmLmluaXRTdGF0cygpXG4gIHJldHVybiBzZWxmXG59XG5cbmNvbnN0IFpPcmliaXQgPSBmdW5jdGlvbiAoY2FtZXJhLCByZW5kZXJlcikge1xuXG4gIGxldCBvcmJpdFxuXG5cbiAgICB2YXIgb3JiaXRDb250cm9sID0gbmV3IFRIUkVFLk9yYml0Q29udHJvbHMoIGNhbWVyYSwgcmVuZGVyZXIuZG9tRWxlbWVudCApOy8vaGVscGVyIHRvIHJvdGF0ZSBhcm91bmQgaW4gc2NlbmVcbiAgICAvLyBvcmJpdENvbnRyb2wuYWRkRXZlbnRMaXN0ZW5lciggJ2NoYW5nZScsIHVwZGF0ZUNvbnRyb2xzICk7Ly8gcmVtb3ZlIHdoZW4gdXNpbmcgYW5pbWF0aW9uIGxvb3BcbiAgICBvcmJpdENvbnRyb2wubm9LZXlzID0gdHJ1ZTtcbiAgICBvcmJpdENvbnRyb2wubm9QYW4gPSB0cnVlO1xuICAgIC8vIG9yYml0Q29udHJvbC5lbmFibGVab29tID0gZmFsc2U7XG4gICAgLy8gb3JiaXRDb250cm9sLm1pblBvbGFyQW5nbGUgPSAxLjE7XG4gICAgLy8gb3JiaXRDb250cm9sLm1heFBvbGFyQW5nbGUgPSAxLjE7XG4gICAgLy8gb3JiaXRDb250cm9sLm1pbkF6aW11dGhBbmdsZSA9IC0wLjI7XG4gICAgLy8gb3JiaXRDb250cm9sLm1heEF6aW11dGhBbmdsZSA9IDAuMjtcbiAgICAvLyBvcmJpdCA9IG9yYml0Q29udHJvbFxuXG4vLyByZW1vdmUgd2hlbiB1c2luZyBhbmltYXRpb24gbG9vcFxuLy8gICBmdW5jdGlvbiB1cGRhdGVDb250cm9scygpIHtcbi8vICAgICBpZighb3JiaXQpIHJldHVyblxuLy8gICAgIG9yYml0LnVwZGF0ZSgpO1xuLy8gICB9XG5cbn1cblxuXG4vL+eVjOmdouiwg+aVtOWGheWuuVxuY29uc3QgWkRhdGFHVUkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXG4gIGNvbnN0IGd1aSA9IG5ldyBkYXQuR1VJKCk7XG4gIGNvbnN0IGYxID0gZ3VpLmFkZEZvbGRlcign546p5a625pWw5o2uJyk7XG4gIGYxLmFkZChvcHRpb25zLCAnUGxheWVyTWVzaEZvb3RSYXRlJywgMCwgMSkuc3RlcCgwLjAwMSk7XG4gIGYxLmFkZChvcHRpb25zLCAncm9sbGluZ1NwZWVkJywgLTAuMDAwMSwgMC4wMikuc3RlcCgwLjAwMDEpO1xuICBmMS5vcGVuKClcblxuICAvLyBjb25zdCBib25lc05hbWVzID0gW1xuICAvLyAgIFwibWFpbkJvbmVcIiwgXCJoZWFkQm9uZVwiLCBcImxlZnRBcm1cIiwgXCJyaWdodEFybVwiLCAgXCJkb3duQm9uZVwiLCBcInJpZ2h0TGVnXCIsIFwibGVmdExlZ1wiXG4gIC8vIF1cbiAgLy9cbiAgLy8gbGV0IGZmXG4gIC8vIGZvciAobGV0IFtpbmRleCwgZWxlbV0gb2YgYm9uZXNOYW1lcy5lbnRyaWVzKCkpIHtcbiAgLy8gICAvLyBjb25zb2xlLmxvZyhpbmRleCwgZWxlbSk7XG4gIC8vICAgZmYgPSBndWkuYWRkRm9sZGVyKGVsZW0pO1xuICAvLyAgIGZmLmFkZChvcHRpb25zLCAnYm9uZScraW5kZXgrJ3gnLCAtNSwgNSkuc3RlcCgwLjEpO1xuICAvLyAgIGZmLmFkZChvcHRpb25zLCAnYm9uZScraW5kZXgrJ3knLCAtNSwgNSkuc3RlcCgwLjEpO1xuICAvLyAgIGZmLmFkZChvcHRpb25zLCAnYm9uZScraW5kZXgrJ3onLCAtNSwgNSkuc3RlcCgwLjEpO1xuICAvLyAgIGlmKCBpbmRleCA9PT0gMCB8fCBpbmRleCA9PT0gNCApeyBjb250aW51ZSB9XG4gIC8vICAgZmYub3BlbigpXG4gIC8vIH1cbn1cblxuZXhwb3J0cy5aU3RhdHMgPSBaU3RhdHNcbmV4cG9ydHMuWk9yaWJpdCA9IFpPcmliaXRcbmV4cG9ydHMuWkRhdGFHVUkgPSBaRGF0YUdVSVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjbGllbnQvUm9ja1J1bi9zdGF0cy5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./databus'), require('./tree'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.databus, global.tree);\n    global.gameLogic = mod.exports;\n  }\n})(undefined, function (module, DB, Tree) {\n  'use strict';\n\n  //游戏逻辑\n\n  function GameLogic(THREE) {\n\n    var treesPool = void 0;\n    var treesInPath = void 0;\n    var sphericalHelper = new THREE.Spherical(); //模型帮助\n    // let pathAngleValues = [1.52, 1.57, 1.62];  //每个位置倾斜的角度\n    var pathAngleValues = [1.55, 1.57, 1.59]; //每个位置倾斜的角度\n    var outsidePath = [1.54, 1.60];\n    var hasCollided = void 0;\n    var treeReleaseInterval = DB.isWX ? 0.0005 : 0.5; //tree释放间隔\n\n    var self = {};\n    self.resetGame = function () {\n      //重置内容\n\n      DB.score = 0; //积分归零\n      DB.clock = new THREE.Clock(); //创建时间\n      DB.clock.start();\n\n      //人物的滚动速度\n      // DB.heroRollingSpeed = (rollingSpeed * worldRadius / heroRadius) / 5;\n      if (DB.heroSphere) {\n        DB.heroSphere.setSpeed();\n      }\n\n      hasCollided = false; //没有碰撞\n      // sphericalHelper = new THREE.Spherical();\n      treesPool = []; //重置池子\n      treesInPath = [];\n    };\n\n    //创造缓存池\n    self.createTreesPool = function () {\n      var maxTreesInPool = 20;\n      var newTree = void 0;\n      for (var i = 0; i < maxTreesInPool; i++) {\n        newTree = new Tree(THREE);\n        treesPool.push(newTree);\n      }\n    };\n\n    //添加道路之外的树\n    self.addWorldTrees = function () {\n      var numTrees = 236;\n      // let gap = 6.28 / numTrees;\n      var gap = 6.28 / numTrees;\n      for (var i = 0; i < numTrees; i++) {\n        addTree(false, i * gap, true);\n        addTree(false, i * gap, false);\n      }\n    };\n\n    //添加道路上的树\n    function addPathTree() {\n      var options = [0, 1, 2]; //随机左中右三条路\n      var lane = Math.floor(Math.random() * 3);\n      addTree(true, lane); //在路上加树\n      options.splice(lane, 1); //删除已经加了树的路\n      if (Math.random() > 0.5) {\n        lane = Math.floor(Math.random() * 2);\n        addTree(true, options[lane]);\n      }\n    }\n\n    //生成树\n    function addTree(inPath, row, isLeft) {\n      var newTree = void 0;\n      if (inPath) {\n        if (treesPool.length == 0) return;\n        newTree = treesPool.pop();\n        newTree.visible = true;\n        //console.log(\"add tree\");\n        treesInPath.push(newTree);\n        sphericalHelper.set(DB.worldRadius - 0.3, pathAngleValues[row], -DB.rollingGroundSphere.rotation.x + 4);\n      } else {\n        newTree = new Tree(THREE);\n        var forestAreaAngle = 0; //[1.52,1.57,1.62];\n        if (isLeft) {\n          forestAreaAngle = outsidePath[1] + Math.random() * 0.03;\n        } else {\n          forestAreaAngle = outsidePath[0] - Math.random() * 0.03;\n        }\n        sphericalHelper.set(DB.worldRadius - 0.3, forestAreaAngle, row);\n      }\n      newTree.position.setFromSpherical(sphericalHelper);\n      var rollingGroundVector = DB.rollingGroundSphere.position.clone().normalize();\n      var treeVector = newTree.position.clone().normalize();\n      newTree.quaternion.setFromUnitVectors(treeVector, rollingGroundVector);\n      newTree.rotation.x += Math.random() * (2 * Math.PI / 10) + -Math.PI / 10;\n\n      DB.rollingGroundSphere.add(newTree);\n    }\n\n    //根据时间固定更新\n    self.fixUpdateByTime = function () {\n      //根据时间来放树\n      if (DB.clock.getElapsedTime() < treeReleaseInterval) {\n        return;\n      } //时钟已运行时间 超过释放间隔\n      DB.clock.start(); //重新计时\n      // addPathTree();  //在路线上加新树\n      if (!hasCollided) {\n        //没有碰撞就算分\n        DB.score += 2 * treeReleaseInterval;\n        // DB.scoreText.innerHTML = DB.score.toString();\n      }\n      //计算玩家跑过的距离\n      DB.runDistanz = DB.rollingGroundSphere.rotation.x * Math.PI * DB.worldRadius * 2;\n    };\n\n    //根据距离固定更新 加入游戏内容\n    var distanz = 0;\n    self.fixUpdateByDistanz = function () {\n      distanz += DB.rollingSpeed * DB.worldRadius;\n      // console.log('distanz', distanz, DB.rollingGroundSphere.rotation.x * Math.PI * DB.worldRadius * 2)\n      if (distanz < 1) return;\n      distanz = 0;\n\n      //按地面滚动速度加入树\n      addPathTree();\n      acceleration();\n    };\n\n    //判断是否被撞以后的无敌时间\n    var invTime = 0;\n    self.doTreeLogic = function () {\n      if (invTime > 0) {\n        //还在无敌就返回\n        invTime -= 1;\n        return;\n      }\n      self.checkCollided();\n    };\n\n    //检查碰撞\n    self.checkCollided = function () {\n      var oneTree = void 0;\n      var treePos = new THREE.Vector3();\n      var treesToRemove = [];\n\n      for (var i = 0; i < treesInPath.length; i++) {\n        oneTree = treesInPath[i];\n        //Sets this vector to the position elements of the transformation matrix\n        treePos.setFromMatrixPosition(oneTree.matrixWorld); //获取并记录世界坐标\n        if (treePos.z > 6 && oneTree.visible) {\n          //如果位置已超出可见区域\n          treesToRemove.push(oneTree);\n          continue;\n        }\n\n        if (!DB.heroSphere.position) return; //没有玩家模型就不测算碰撞\n        //碰撞范围超出就跳过\n        if (treePos.distanceTo(DB.heroSphere.position) > 0.7) {\n          continue;\n        }\n\n        hasCollided = true; //被撞\n        invTime = DB.invincibleTime; //赋予无敌时间\n        DB.heroSphere.getHit();\n      }\n\n      var fromWhere = void 0;\n      for (var _i = 0; _i < treesToRemove.length; _i++) {\n        oneTree = treesToRemove[_i];\n        fromWhere = treesInPath.indexOf(oneTree); //找到所在数组位置\n        treesInPath.splice(fromWhere, 1); //分割并存回池子\n        treesPool.push(oneTree);\n        oneTree.visible = false; //隐藏数\n        // console.log(\"remove tree\");\n      }\n    };\n\n    var speedLevel = 0;\n    //到达一定距离提速\n    function acceleration() {\n      // if(DB.runDistanz)\n      speedLevel = Math.floor(DB.runDistanz / 2000); //2000是跑一圈\n      console.log('跑出距离', DB.runDistanz, speedLevel);\n    }\n\n    //游戏结束\n    function gameOver() {\n      //cancelAnimationFrame( globalRenderID );\n      //window.clearInterval( powerupSpawnIntervalID );\n    }\n\n    return self;\n  }\n\n  module.exports = GameLogic;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jbGllbnQvUm9ja1J1bi9nYW1lTG9naWMuanM/ZGNiNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IERCID0gcmVxdWlyZSgnLi9kYXRhYnVzJylcbmNvbnN0IFRyZWUgPSByZXF1aXJlKCcuL3RyZWUnKVxuXG4vL+a4uOaIj+mAu+i+kVxuXG5mdW5jdGlvbiBHYW1lTG9naWMoVEhSRUUpIHtcblxuICBsZXQgdHJlZXNQb29sXG4gIGxldCB0cmVlc0luUGF0aDtcbiAgbGV0IHNwaGVyaWNhbEhlbHBlciA9IG5ldyBUSFJFRS5TcGhlcmljYWwoKTsgLy/mqKHlnovluK7liqlcbiAgLy8gbGV0IHBhdGhBbmdsZVZhbHVlcyA9IFsxLjUyLCAxLjU3LCAxLjYyXTsgIC8v5q+P5Liq5L2N572u5YC+5pac55qE6KeS5bqmXG4gIGxldCBwYXRoQW5nbGVWYWx1ZXMgPSBbMS41NSwgMS41NywgMS41OV07ICAvL+avj+S4quS9jee9ruWAvuaWnOeahOinkuW6plxuICBjb25zdCBvdXRzaWRlUGF0aCA9IFsxLjU0LCAxLjYwXVxuICBsZXQgaGFzQ29sbGlkZWRcbiAgbGV0IHRyZWVSZWxlYXNlSW50ZXJ2YWw9IERCLmlzV1ggPyAwLjAwMDUgOiAwLjU7ICAvL3RyZWXph4rmlL7pl7TpmpRcblxuICBsZXQgc2VsZiA9IHt9XG4gIHNlbGYucmVzZXRHYW1lID0gZnVuY3Rpb24gICgpIHsgLy/ph43nva7lhoXlrrlcblxuICAgIERCLnNjb3JlID0gMDsgIC8v56ev5YiG5b2S6Zu2XG4gICAgREIuY2xvY2sgPSBuZXcgVEhSRUUuQ2xvY2soKTsgLy/liJvlu7rml7bpl7RcbiAgICBEQi5jbG9jay5zdGFydCgpO1xuXG4gICAgLy/kurrniannmoTmu5rliqjpgJ/luqZcbiAgICAvLyBEQi5oZXJvUm9sbGluZ1NwZWVkID0gKHJvbGxpbmdTcGVlZCAqIHdvcmxkUmFkaXVzIC8gaGVyb1JhZGl1cykgLyA1O1xuICAgIGlmKERCLmhlcm9TcGhlcmUpeyBEQi5oZXJvU3BoZXJlLnNldFNwZWVkKCkgfVxuXG4gICAgaGFzQ29sbGlkZWQgPSBmYWxzZTsgIC8v5rKh5pyJ56Kw5pKeXG4gICAgLy8gc3BoZXJpY2FsSGVscGVyID0gbmV3IFRIUkVFLlNwaGVyaWNhbCgpO1xuICAgIHRyZWVzUG9vbCA9IFtdOyAgLy/ph43nva7msaDlrZBcbiAgICB0cmVlc0luUGF0aCA9IFtdO1xuICB9XG5cbiAgLy/liJvpgKDnvJPlrZjmsaBcbiAgc2VsZi5jcmVhdGVUcmVlc1Bvb2wgPSBmdW5jdGlvbiAgKCkge1xuICAgIGxldCBtYXhUcmVlc0luUG9vbCA9IDIwO1xuICAgIGxldCBuZXdUcmVlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4VHJlZXNJblBvb2w7IGkrKykge1xuICAgICAgbmV3VHJlZSA9IG5ldyBUcmVlKFRIUkVFKTtcbiAgICAgIHRyZWVzUG9vbC5wdXNoKG5ld1RyZWUpO1xuICAgIH1cbiAgfVxuXG4vL+a3u+WKoOmBk+i3r+S5i+WklueahOagkVxuICBzZWxmLmFkZFdvcmxkVHJlZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IG51bVRyZWVzID0gMjM2O1xuICAgIC8vIGxldCBnYXAgPSA2LjI4IC8gbnVtVHJlZXM7XG4gICAgbGV0IGdhcCA9IDYuMjggLyBudW1UcmVlcztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bVRyZWVzOyBpKyspIHtcbiAgICAgIGFkZFRyZWUoZmFsc2UsIGkgKiBnYXAsIHRydWUpO1xuICAgICAgYWRkVHJlZShmYWxzZSwgaSAqIGdhcCwgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4vL+a3u+WKoOmBk+i3r+S4iueahOagkVxuICBmdW5jdGlvbiBhZGRQYXRoVHJlZSAoKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBbMCwgMSwgMl07IC8v6ZqP5py65bem5Lit5Y+z5LiJ5p2h6LevXG4gICAgbGV0IGxhbmUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzKTtcbiAgICBhZGRUcmVlKHRydWUsIGxhbmUpOyAgLy/lnKjot6/kuIrliqDmoJFcbiAgICBvcHRpb25zLnNwbGljZShsYW5lLCAxKTsgLy/liKDpmaTlt7Lnu4/liqDkuobmoJHnmoTot69cbiAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xuICAgICAgbGFuZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpO1xuICAgICAgYWRkVHJlZSh0cnVlLCBvcHRpb25zW2xhbmVdKTtcbiAgICB9XG4gIH1cblxuICAvL+eUn+aIkOagkVxuICBmdW5jdGlvbiBhZGRUcmVlIChpblBhdGgsIHJvdywgaXNMZWZ0KSB7XG4gICAgbGV0IG5ld1RyZWU7XG4gICAgaWYgKGluUGF0aCkge1xuICAgICAgaWYgKHRyZWVzUG9vbC5sZW5ndGggPT0gMCkgcmV0dXJuO1xuICAgICAgbmV3VHJlZSA9IHRyZWVzUG9vbC5wb3AoKTtcbiAgICAgIG5ld1RyZWUudmlzaWJsZSA9IHRydWU7XG4gICAgICAvL2NvbnNvbGUubG9nKFwiYWRkIHRyZWVcIik7XG4gICAgICB0cmVlc0luUGF0aC5wdXNoKG5ld1RyZWUpO1xuICAgICAgc3BoZXJpY2FsSGVscGVyLnNldChEQi53b3JsZFJhZGl1cyAtIDAuMyxcbiAgICAgICAgcGF0aEFuZ2xlVmFsdWVzW3Jvd10sIC1EQi5yb2xsaW5nR3JvdW5kU3BoZXJlLnJvdGF0aW9uLnggKyA0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3VHJlZSA9IG5ldyBUcmVlKFRIUkVFKTtcbiAgICAgIHZhciBmb3Jlc3RBcmVhQW5nbGUgPSAwOy8vWzEuNTIsMS41NywxLjYyXTtcbiAgICAgIGlmIChpc0xlZnQpIHtcbiAgICAgICAgZm9yZXN0QXJlYUFuZ2xlID0gb3V0c2lkZVBhdGhbMV0gKyBNYXRoLnJhbmRvbSgpICogMC4wMztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvcmVzdEFyZWFBbmdsZSA9IG91dHNpZGVQYXRoWzBdIC0gTWF0aC5yYW5kb20oKSAqIDAuMDM7XG4gICAgICB9XG4gICAgICBzcGhlcmljYWxIZWxwZXIuc2V0KERCLndvcmxkUmFkaXVzIC0gMC4zLCBmb3Jlc3RBcmVhQW5nbGUsIHJvdyk7XG4gICAgfVxuICAgIG5ld1RyZWUucG9zaXRpb24uc2V0RnJvbVNwaGVyaWNhbChzcGhlcmljYWxIZWxwZXIpO1xuICAgIHZhciByb2xsaW5nR3JvdW5kVmVjdG9yID0gREIucm9sbGluZ0dyb3VuZFNwaGVyZS5wb3NpdGlvbi5jbG9uZSgpLm5vcm1hbGl6ZSgpO1xuICAgIHZhciB0cmVlVmVjdG9yID0gbmV3VHJlZS5wb3NpdGlvbi5jbG9uZSgpLm5vcm1hbGl6ZSgpO1xuICAgIG5ld1RyZWUucXVhdGVybmlvbi5zZXRGcm9tVW5pdFZlY3RvcnModHJlZVZlY3Rvciwgcm9sbGluZ0dyb3VuZFZlY3Rvcik7XG4gICAgbmV3VHJlZS5yb3RhdGlvbi54ICs9IChNYXRoLnJhbmRvbSgpICogKDIgKiBNYXRoLlBJIC8gMTApKSArIC1NYXRoLlBJIC8gMTA7XG5cbiAgICBEQi5yb2xsaW5nR3JvdW5kU3BoZXJlLmFkZChuZXdUcmVlKTtcbiAgfVxuXG4vL+agueaNruaXtumXtOWbuuWumuabtOaWsFxuICBzZWxmLmZpeFVwZGF0ZUJ5VGltZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvL+agueaNruaXtumXtOadpeaUvuagkVxuICAgIGlmIChEQi5jbG9jay5nZXRFbGFwc2VkVGltZSgpIDwgdHJlZVJlbGVhc2VJbnRlcnZhbCkgeyByZXR1cm4gfSAvL+aXtumSn+W3sui/kOihjOaXtumXtCDotoXov4fph4rmlL7pl7TpmpRcbiAgICBEQi5jbG9jay5zdGFydCgpOyAgLy/ph43mlrDorqHml7ZcbiAgICAvLyBhZGRQYXRoVHJlZSgpOyAgLy/lnKjot6/nur/kuIrliqDmlrDmoJFcbiAgICBpZiAoIWhhc0NvbGxpZGVkKSB7ICAvL+ayoeacieeisOaSnuWwseeul+WIhlxuICAgICAgREIuc2NvcmUgKz0gMiAqIHRyZWVSZWxlYXNlSW50ZXJ2YWw7XG4gICAgICAvLyBEQi5zY29yZVRleHQuaW5uZXJIVE1MID0gREIuc2NvcmUudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgLy/orqHnrpfnjqnlrrbot5Hov4fnmoTot53nprtcbiAgICBEQi5ydW5EaXN0YW56ID0gREIucm9sbGluZ0dyb3VuZFNwaGVyZS5yb3RhdGlvbi54ICogTWF0aC5QSSAqIERCLndvcmxkUmFkaXVzICogMlxuICB9XG5cbiAgLy/moLnmja7ot53nprvlm7rlrprmm7TmlrAg5Yqg5YWl5ri45oiP5YaF5a65XG4gIGxldCBkaXN0YW56ID0gMFxuICBzZWxmLmZpeFVwZGF0ZUJ5RGlzdGFueiA9IGZ1bmN0aW9uICgpIHtcbiAgICBkaXN0YW56ICs9IERCLnJvbGxpbmdTcGVlZCAqIERCLndvcmxkUmFkaXVzXG4gICAgLy8gY29uc29sZS5sb2coJ2Rpc3RhbnonLCBkaXN0YW56LCBEQi5yb2xsaW5nR3JvdW5kU3BoZXJlLnJvdGF0aW9uLnggKiBNYXRoLlBJICogREIud29ybGRSYWRpdXMgKiAyKVxuICAgIGlmKGRpc3RhbnogPCAxKSByZXR1cm5cbiAgICBkaXN0YW56ID0gMFxuXG4gICAgLy/mjInlnLDpnaLmu5rliqjpgJ/luqbliqDlhaXmoJFcbiAgICBhZGRQYXRoVHJlZSgpXG4gICAgYWNjZWxlcmF0aW9uKClcbiAgfVxuXG4gIC8v5Yik5pat5piv5ZCm6KKr5pKe5Lul5ZCO55qE5peg5pWM5pe26Ze0XG4gIGxldCBpbnZUaW1lID0gMFxuICBzZWxmLmRvVHJlZUxvZ2ljID0gZnVuY3Rpb24oKSB7XG4gICAgaWYoIGludlRpbWUgPiAwICkgeyAvL+i/mOWcqOaXoOaVjOWwsei/lOWbnlxuICAgICAgaW52VGltZSAtPSAxXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgc2VsZi5jaGVja0NvbGxpZGVkKClcbiAgfVxuXG4vL+ajgOafpeeisOaSnlxuICBzZWxmLmNoZWNrQ29sbGlkZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IG9uZVRyZWU7XG4gICAgbGV0IHRyZWVQb3MgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgIGxldCB0cmVlc1RvUmVtb3ZlID0gW107XG5cbiAgICBmb3IoIGxldCBpPTA7IGk8dHJlZXNJblBhdGgubGVuZ3RoOyBpKysgKXtcbiAgICAgIG9uZVRyZWUgPSB0cmVlc0luUGF0aFtpXTtcbiAgICAgIC8vU2V0cyB0aGlzIHZlY3RvciB0byB0aGUgcG9zaXRpb24gZWxlbWVudHMgb2YgdGhlIHRyYW5zZm9ybWF0aW9uIG1hdHJpeFxuICAgICAgdHJlZVBvcy5zZXRGcm9tTWF0cml4UG9zaXRpb24ob25lVHJlZS5tYXRyaXhXb3JsZCk7IC8v6I635Y+W5bm26K6w5b2V5LiW55WM5Z2Q5qCHXG4gICAgICBpZiAodHJlZVBvcy56ID4gNiAmJiBvbmVUcmVlLnZpc2libGUpeyAvL+WmguaenOS9jee9ruW3sui2heWHuuWPr+ingeWMuuWfn1xuICAgICAgICB0cmVlc1RvUmVtb3ZlLnB1c2gob25lVHJlZSk7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGlmKCFEQi5oZXJvU3BoZXJlLnBvc2l0aW9uKSByZXR1cm4gLy/msqHmnInnjqnlrrbmqKHlnovlsLHkuI3mtYvnrpfnorDmkp5cbiAgICAgIC8v56Kw5pKe6IyD5Zu06LaF5Ye65bCx6Lez6L+HXG4gICAgICBpZiAodHJlZVBvcy5kaXN0YW5jZVRvKERCLmhlcm9TcGhlcmUucG9zaXRpb24pID4gMC43KSB7IGNvbnRpbnVlIH1cblxuICAgICAgaGFzQ29sbGlkZWQgPSB0cnVlOyAvL+iiq+aSnlxuICAgICAgaW52VGltZSA9IERCLmludmluY2libGVUaW1lICAvL+i1i+S6iOaXoOaVjOaXtumXtFxuICAgICAgREIuaGVyb1NwaGVyZS5nZXRIaXQoKVxuICAgIH1cblxuICAgIGxldCBmcm9tV2hlcmU7XG4gICAgZm9yKCBsZXQgaT0wOyBpPHRyZWVzVG9SZW1vdmUubGVuZ3RoOyBpKysgKXtcbiAgICAgIG9uZVRyZWUgPSB0cmVlc1RvUmVtb3ZlW2ldO1xuICAgICAgZnJvbVdoZXJlID0gdHJlZXNJblBhdGguaW5kZXhPZihvbmVUcmVlKTsgIC8v5om+5Yiw5omA5Zyo5pWw57uE5L2N572uXG4gICAgICB0cmVlc0luUGF0aC5zcGxpY2UoZnJvbVdoZXJlLCAxKTsgLy/liIblibLlubblrZjlm57msaDlrZBcbiAgICAgIHRyZWVzUG9vbC5wdXNoKG9uZVRyZWUpO1xuICAgICAgb25lVHJlZS52aXNpYmxlID0gZmFsc2U7ICAvL+makOiXj+aVsFxuICAgICAgLy8gY29uc29sZS5sb2coXCJyZW1vdmUgdHJlZVwiKTtcbiAgICB9XG5cblxuICB9XG5cblxuICBsZXQgc3BlZWRMZXZlbCA9IDBcbiAgLy/liLDovr7kuIDlrprot53nprvmj5DpgJ9cbiAgZnVuY3Rpb24gYWNjZWxlcmF0aW9uICgpIHtcbiAgICAvLyBpZihEQi5ydW5EaXN0YW56KVxuICAgIHNwZWVkTGV2ZWwgPSBNYXRoLmZsb29yKERCLnJ1bkRpc3RhbnogLyAyMDAwKSAgLy8yMDAw5piv6LeR5LiA5ZyIXG4gICAgY29uc29sZS5sb2coJ+i3keWHuui3neemuycsIERCLnJ1bkRpc3RhbnosIHNwZWVkTGV2ZWwpXG4gIH1cblxuLy/muLjmiI/nu5PmnZ9cbiAgZnVuY3Rpb24gZ2FtZU92ZXIgKCkge1xuICAgIC8vY2FuY2VsQW5pbWF0aW9uRnJhbWUoIGdsb2JhbFJlbmRlcklEICk7XG4gICAgLy93aW5kb3cuY2xlYXJJbnRlcnZhbCggcG93ZXJ1cFNwYXduSW50ZXJ2YWxJRCApO1xuICB9XG5cblxuICByZXR1cm4gc2VsZlxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWVMb2dpY1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNsaWVudC9Sb2NrUnVuL2dhbWVMb2dpYy5qcyJdLCJtYXBwaW5ncyI6Ijs7OztBQUNBO0FBQUE7QUFBQTtBQUFBOztBQUFBOzs7Ozs7OztBQUFBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./databus'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.databus);\n    global.tree = mod.exports;\n  }\n})(undefined, function (module, DB) {\n  'use strict';\n\n  //创建数模型\n  var Tree = function Tree(THREE) {\n\n    var sides = 8;\n    var tiers = 6;\n    var scalarMultiplier = Math.random() * (0.25 - 0.1) + 0.05;\n    var midPointVector = new THREE.Vector3();\n    var vertexVector = new THREE.Vector3();\n    var treeGeometry = new THREE.ConeGeometry(0.5, 1, sides, tiers);\n    var treeMaterial = new THREE.MeshStandardMaterial({\n      // var treeMaterial = new THREE.MeshPhongMaterial( {\n      // color: 0x33ff33,\n      color: DB.color.green,\n      flatShading: true\n    });\n    var offset;\n    midPointVector = treeGeometry.vertices[0].clone();\n    var currentTier = 0;\n    var vertexIndex;\n    blowUpTree(treeGeometry.vertices, sides, 0, scalarMultiplier);\n    tightenTree(treeGeometry.vertices, sides, 1);\n    blowUpTree(treeGeometry.vertices, sides, 2, scalarMultiplier * 1.1, true);\n    tightenTree(treeGeometry.vertices, sides, 3);\n    blowUpTree(treeGeometry.vertices, sides, 4, scalarMultiplier * 1.2);\n    tightenTree(treeGeometry.vertices, sides, 5);\n\n    var treeBuff = new THREE.BufferGeometry().fromGeometry(treeGeometry);\n    var treeTop = new THREE.Mesh(treeBuff, treeMaterial);\n    treeTop.castShadow = true;\n    treeTop.receiveShadow = false;\n    treeTop.position.y = 0.9;\n    treeTop.rotation.y = Math.random() * Math.PI;\n    // var treeTrunkGeometry = new THREE.CylinderGeometry( 0.1, 0.1,0.5);\n    var treeTrunkGeometry = new THREE.CylinderBufferGeometry(0.1, 0.1, 0.5);\n    // var trunkMaterial = new THREE.MeshStandardMaterial( {\n    var trunkMaterial = new THREE.MeshBasicMaterial({\n      // color: 0x886633,\n      color: DB.color.brown,\n      flatShading: true\n    });\n    var treeTrunk = new THREE.Mesh(treeTrunkGeometry, trunkMaterial);\n    treeTrunk.position.y = 0.25;\n    var tree = new THREE.Object3D();\n    tree.add(treeTrunk);\n    tree.add(treeTop);\n    return tree;\n\n    function blowUpTree(vertices, sides, currentTier, scalarMultiplier, odd) {\n      var vertexIndex;\n      var vertexVector = new THREE.Vector3();\n      var midPointVector = vertices[0].clone();\n      var offset;\n      for (var i = 0; i < sides; i++) {\n        vertexIndex = currentTier * sides + 1;\n        vertexVector = vertices[i + vertexIndex].clone();\n        midPointVector.y = vertexVector.y;\n        offset = vertexVector.sub(midPointVector);\n        if (odd) {\n          if (i % 2 === 0) {\n            offset.normalize().multiplyScalar(scalarMultiplier / 6);\n            vertices[i + vertexIndex].add(offset);\n          } else {\n            offset.normalize().multiplyScalar(scalarMultiplier);\n            vertices[i + vertexIndex].add(offset);\n            vertices[i + vertexIndex].y = vertices[i + vertexIndex + sides].y + 0.05;\n          }\n        } else {\n          if (i % 2 !== 0) {\n            offset.normalize().multiplyScalar(scalarMultiplier / 6);\n            vertices[i + vertexIndex].add(offset);\n          } else {\n            offset.normalize().multiplyScalar(scalarMultiplier);\n            vertices[i + vertexIndex].add(offset);\n            vertices[i + vertexIndex].y = vertices[i + vertexIndex + sides].y + 0.05;\n          }\n        }\n      }\n    }\n    function tightenTree(vertices, sides, currentTier) {\n      var vertexIndex;\n      var vertexVector = new THREE.Vector3();\n      var midPointVector = vertices[0].clone();\n      var offset;\n      for (var i = 0; i < sides; i++) {\n        vertexIndex = currentTier * sides + 1;\n        vertexVector = vertices[i + vertexIndex].clone();\n        midPointVector.y = vertexVector.y;\n        offset = vertexVector.sub(midPointVector);\n        offset.normalize().multiplyScalar(0.06);\n        vertices[i + vertexIndex].sub(offset);\n      }\n    }\n  };\n\n  // if(module){\n  module.exports = Tree;\n  // }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jbGllbnQvUm9ja1J1bi90cmVlLmpzPzkwYzAiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgREIgPSByZXF1aXJlKCcuL2RhdGFidXMnKVxuXG4vL+WIm+W7uuaVsOaooeWei1xudmFyIFRyZWUgPSBmdW5jdGlvbiAoVEhSRUUpIHtcblxuICAgIHZhciBzaWRlcz04O1xuICAgIHZhciB0aWVycz02O1xuICAgIHZhciBzY2FsYXJNdWx0aXBsaWVyPShNYXRoLnJhbmRvbSgpKigwLjI1LTAuMSkpKzAuMDU7XG4gICAgdmFyIG1pZFBvaW50VmVjdG9yPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgIHZhciB2ZXJ0ZXhWZWN0b3I9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgdmFyIHRyZWVHZW9tZXRyeSA9IG5ldyBUSFJFRS5Db25lR2VvbWV0cnkoIDAuNSwgMSwgc2lkZXMsIHRpZXJzKTtcbiAgICB2YXIgdHJlZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKCB7XG4gICAgLy8gdmFyIHRyZWVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCgge1xuICAgICAgLy8gY29sb3I6IDB4MzNmZjMzLFxuICAgICAgY29sb3I6IERCLmNvbG9yLmdyZWVuLFxuICAgICAgZmxhdFNoYWRpbmcgOiB0cnVlXG4gICAgfSApO1xuICAgIHZhciBvZmZzZXQ7XG4gICAgbWlkUG9pbnRWZWN0b3I9dHJlZUdlb21ldHJ5LnZlcnRpY2VzWzBdLmNsb25lKCk7XG4gICAgdmFyIGN1cnJlbnRUaWVyPTA7XG4gICAgdmFyIHZlcnRleEluZGV4O1xuICAgIGJsb3dVcFRyZWUodHJlZUdlb21ldHJ5LnZlcnRpY2VzLHNpZGVzLDAsc2NhbGFyTXVsdGlwbGllcik7XG4gICAgdGlnaHRlblRyZWUodHJlZUdlb21ldHJ5LnZlcnRpY2VzLHNpZGVzLDEpO1xuICAgIGJsb3dVcFRyZWUodHJlZUdlb21ldHJ5LnZlcnRpY2VzLHNpZGVzLDIsc2NhbGFyTXVsdGlwbGllcioxLjEsdHJ1ZSk7XG4gICAgdGlnaHRlblRyZWUodHJlZUdlb21ldHJ5LnZlcnRpY2VzLHNpZGVzLDMpO1xuICAgIGJsb3dVcFRyZWUodHJlZUdlb21ldHJ5LnZlcnRpY2VzLHNpZGVzLDQsc2NhbGFyTXVsdGlwbGllcioxLjIpO1xuICAgIHRpZ2h0ZW5UcmVlKHRyZWVHZW9tZXRyeS52ZXJ0aWNlcyxzaWRlcyw1KTtcblxuICAgIHZhciB0cmVlQnVmZiA9IG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpLmZyb21HZW9tZXRyeSh0cmVlR2VvbWV0cnkpXG4gICAgdmFyIHRyZWVUb3AgPSBuZXcgVEhSRUUuTWVzaCggdHJlZUJ1ZmYsIHRyZWVNYXRlcmlhbCApO1xuICAgIHRyZWVUb3AuY2FzdFNoYWRvdz10cnVlO1xuICAgIHRyZWVUb3AucmVjZWl2ZVNoYWRvdz1mYWxzZTtcbiAgICB0cmVlVG9wLnBvc2l0aW9uLnk9MC45O1xuICAgIHRyZWVUb3Aucm90YXRpb24ueT0oTWF0aC5yYW5kb20oKSooTWF0aC5QSSkpO1xuICAgIC8vIHZhciB0cmVlVHJ1bmtHZW9tZXRyeSA9IG5ldyBUSFJFRS5DeWxpbmRlckdlb21ldHJ5KCAwLjEsIDAuMSwwLjUpO1xuICAgIHZhciB0cmVlVHJ1bmtHZW9tZXRyeSA9IG5ldyBUSFJFRS5DeWxpbmRlckJ1ZmZlckdlb21ldHJ5KCAwLjEsIDAuMSwwLjUpO1xuICAgIC8vIHZhciB0cnVua01hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKCB7XG4gICAgdmFyIHRydW5rTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoIHtcbiAgICAgIC8vIGNvbG9yOiAweDg4NjYzMyxcbiAgICAgIGNvbG9yOiBEQi5jb2xvci5icm93bixcbiAgICAgIGZsYXRTaGFkaW5nIDogdHJ1ZVxuICAgIH0gKTtcbiAgICB2YXIgdHJlZVRydW5rID0gbmV3IFRIUkVFLk1lc2goIHRyZWVUcnVua0dlb21ldHJ5LCB0cnVua01hdGVyaWFsICk7XG4gICAgdHJlZVRydW5rLnBvc2l0aW9uLnk9MC4yNTtcbiAgICB2YXIgdHJlZSA9bmV3IFRIUkVFLk9iamVjdDNEKCk7XG4gICAgdHJlZS5hZGQodHJlZVRydW5rKTtcbiAgICB0cmVlLmFkZCh0cmVlVG9wKTtcbiAgICByZXR1cm4gdHJlZTtcblxuICBmdW5jdGlvbiBibG93VXBUcmVlKHZlcnRpY2VzLHNpZGVzLGN1cnJlbnRUaWVyLHNjYWxhck11bHRpcGxpZXIsb2RkKXtcbiAgICB2YXIgdmVydGV4SW5kZXg7XG4gICAgdmFyIHZlcnRleFZlY3Rvcj0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICB2YXIgbWlkUG9pbnRWZWN0b3I9dmVydGljZXNbMF0uY2xvbmUoKTtcbiAgICB2YXIgb2Zmc2V0O1xuICAgIGZvcih2YXIgaT0wO2k8c2lkZXM7aSsrKXtcbiAgICAgIHZlcnRleEluZGV4PShjdXJyZW50VGllcipzaWRlcykrMTtcbiAgICAgIHZlcnRleFZlY3Rvcj12ZXJ0aWNlc1tpK3ZlcnRleEluZGV4XS5jbG9uZSgpO1xuICAgICAgbWlkUG9pbnRWZWN0b3IueT12ZXJ0ZXhWZWN0b3IueTtcbiAgICAgIG9mZnNldD12ZXJ0ZXhWZWN0b3Iuc3ViKG1pZFBvaW50VmVjdG9yKTtcbiAgICAgIGlmKG9kZCl7XG4gICAgICAgIGlmKGklMj09PTApe1xuICAgICAgICAgIG9mZnNldC5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcihzY2FsYXJNdWx0aXBsaWVyLzYpO1xuICAgICAgICAgIHZlcnRpY2VzW2krdmVydGV4SW5kZXhdLmFkZChvZmZzZXQpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICBvZmZzZXQubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIoc2NhbGFyTXVsdGlwbGllcik7XG4gICAgICAgICAgdmVydGljZXNbaSt2ZXJ0ZXhJbmRleF0uYWRkKG9mZnNldCk7XG4gICAgICAgICAgdmVydGljZXNbaSt2ZXJ0ZXhJbmRleF0ueT12ZXJ0aWNlc1tpK3ZlcnRleEluZGV4K3NpZGVzXS55KzAuMDU7XG4gICAgICAgIH1cbiAgICAgIH1lbHNle1xuICAgICAgICBpZihpJTIhPT0wKXtcbiAgICAgICAgICBvZmZzZXQubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIoc2NhbGFyTXVsdGlwbGllci82KTtcbiAgICAgICAgICB2ZXJ0aWNlc1tpK3ZlcnRleEluZGV4XS5hZGQob2Zmc2V0KTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgb2Zmc2V0Lm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHNjYWxhck11bHRpcGxpZXIpO1xuICAgICAgICAgIHZlcnRpY2VzW2krdmVydGV4SW5kZXhdLmFkZChvZmZzZXQpO1xuICAgICAgICAgIHZlcnRpY2VzW2krdmVydGV4SW5kZXhdLnk9dmVydGljZXNbaSt2ZXJ0ZXhJbmRleCtzaWRlc10ueSswLjA1O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHRpZ2h0ZW5UcmVlKHZlcnRpY2VzLHNpZGVzLGN1cnJlbnRUaWVyKXtcbiAgICB2YXIgdmVydGV4SW5kZXg7XG4gICAgdmFyIHZlcnRleFZlY3Rvcj0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICB2YXIgbWlkUG9pbnRWZWN0b3I9dmVydGljZXNbMF0uY2xvbmUoKTtcbiAgICB2YXIgb2Zmc2V0O1xuICAgIGZvcih2YXIgaT0wO2k8c2lkZXM7aSsrKXtcbiAgICAgIHZlcnRleEluZGV4PShjdXJyZW50VGllcipzaWRlcykrMTtcbiAgICAgIHZlcnRleFZlY3Rvcj12ZXJ0aWNlc1tpK3ZlcnRleEluZGV4XS5jbG9uZSgpO1xuICAgICAgbWlkUG9pbnRWZWN0b3IueT12ZXJ0ZXhWZWN0b3IueTtcbiAgICAgIG9mZnNldD12ZXJ0ZXhWZWN0b3Iuc3ViKG1pZFBvaW50VmVjdG9yKTtcbiAgICAgIG9mZnNldC5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcigwLjA2KTtcbiAgICAgIHZlcnRpY2VzW2krdmVydGV4SW5kZXhdLnN1YihvZmZzZXQpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBpZihtb2R1bGUpe1xuICBtb2R1bGUuZXhwb3J0cyA9IFRyZWVcbi8vIH1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2xpZW50L1JvY2tSdW4vdHJlZS5qcyJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBOzs7Ozs7OztBQUFBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7\n");

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./databus'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.databus);\n    global.HUD = mod.exports;\n  }\n})(undefined, function (module, DB) {\n  'use strict';\n\n  var HUD = function HUD(THREE) {\n    var self = {};\n\n    // let sceneHUD,cameraHUD;\n\n    var cameraOrtho = void 0,\n        sceneOrtho = void 0;\n    self.indicatorBG = null; //触摸输入的背景和指示\n    self.indicator = null;\n    // ,spriteTL\n\n    var size = 64;\n\n    self.renderer = null;\n    // self.indicator = null\n\n\n    var width = DB.WD;\n    var height = DB.WH;\n    var imageWidth = size / 2; //material.map.image.width / 2;\n    var imageHeight = size / 2; //material.map.image.height / 2;\n    var Hwidth = DB.WD / 2;\n    var Hheight = DB.WH / 2;\n\n    self.init = function () {\n      self.initSet();\n      self.addTouchIndicator();\n      self.addTouchIndicatorBG(); //加个触摸起始背景\n\n      // updateHUDSprites()//设置按钮位置\n      // self.indicator = spriteTL\n    };\n\n    self.initSet = function () {\n      //启动界面\n      //创建相机\n      cameraOrtho = new THREE.OrthographicCamera(-Hwidth, Hwidth, Hheight, -Hheight, 1, 10);\n      cameraOrtho.position.z = 10;\n      sceneOrtho = new THREE.Scene();\n    };\n\n    self.rend = function () {\n      //传render进来渲染\n      if (!self.renderer) {\n        console.error('not renderer');return;\n      }\n      if (!sceneOrtho) {\n        console.error('not sceneOrtho');return;\n      }\n      if (!cameraOrtho) {\n        console.error('not cameraOrtho');return;\n      }\n      self.renderer.render(sceneOrtho, cameraOrtho);\n    };\n\n    //转换鼠标传入位置\n    self.convertMousePos = function (model, pos) {\n      if (!model) {\n        console.error('no indicator');return;\n      }\n      // const width = material.map.image.width\n      // const Theight = model.material.map.image.height\n\n      model.position.set(pos.x - Hwidth, -pos.y + Hheight, 1);\n      // model.position.y += 64  //用stats会造成移位\n      // console.log('鼠标传入位置', pos, model.position)\n    };\n\n    /*\n      function updateHUDSprites() {\n    \n        // var material = spriteTL.material;\n    \n        // spriteTL.position.set( -Uwidth + imageWidth,   Uheight - imageHeight, 1 ); // top left\n        // spriteTR.position.set(   width - imageWidth,   height - imageHeight, 1 ); // top right\n        spriteTL.position.set( - Hwidth + imageWidth, - Hheight + imageHeight, 1 ); // bottom left\n        // spriteBR.position.set(   width - imageWidth, - height + imageHeight, 1 ); // bottom right\n        // spriteC.position.set( 0, 0, 1 ); // center\n        // console.log('spriteTL位置是', spriteTL.position)\n      }\n    */\n\n    //加个触摸起始背景 白色 空心圆\n    self.addTouchIndicatorBG = function () {\n      var size = 128;\n      var texture = makeTexture(THREE, 1, size, 'white');\n      var material = new THREE.SpriteMaterial({ map: texture });\n      // var width = material.map.image.width;\n      // var height = material.map.image.height;\n      self.indicatorBG = new THREE.Sprite(material);\n      // spriteTL.scale.set( width, height, 1 );\n      self.indicatorBG.scale.set(size, size, 1);\n      sceneOrtho.add(self.indicatorBG);\n    };\n    self.moveIndicatorBG = function (pos) {\n      self.convertMousePos(self.indicatorBG, pos);\n    };\n\n    //加个触摸 白色圆\n    self.addTouchIndicator = function () {\n      var size = 64;\n      var texture = makeTexture(THREE, 0, size, 'white');\n      var material = new THREE.SpriteMaterial({ map: texture });\n      self.indicator = new THREE.Sprite(material);\n      self.indicator.scale.set(size, size, 1);\n      sceneOrtho.add(self.indicator);\n    };\n    self.moveIndicator = function (pos) {\n      self.convertMousePos(self.indicator, pos);\n    };\n\n    return self;\n  };\n\n  function makeTexture(THREE, type, size, color) {\n    //创建canvas贴图\n\n    var canvas = DB.isWX ? wx.createCanvas() : document.createElement('canvas');\n    canvas.width = size;\n    canvas.height = size;\n    var ctx = canvas.getContext('2d');\n\n    if (type === 0) {\n      Circle(ctx, size, color); //圆\n    } else if (type === 1) {\n      HollowCircle(ctx, size, color); //空心圆\n    } else if (type === 2) {\n      Square(ctx, size, color); //画个正方形\n    }\n\n    var texture = new THREE.Texture(canvas);\n    texture.needsUpdate = true; // 贴图更新才能显示\n    return texture;\n  }\n\n  function Circle(cxt, size, color) {\n    //画一个实心圆\n    cxt.beginPath();\n    cxt.arc(size / 2, size / 2, size / 2, 0, 360, false);\n    cxt.fillStyle = color; //填充颜色,默认是黑色\n    cxt.fill(); //画实心圆\n    cxt.closePath();\n  }\n\n  //空心圆\n  function HollowCircle(cxt, size, color) {\n    cxt.beginPath();\n    cxt.arc(size / 2, size / 2, size / 2 - 6, 0, 360, false);\n    cxt.lineWidth = 6;\n    cxt.strokeStyle = color;\n    cxt.stroke(); //画空心圆\n    cxt.closePath();\n  }\n\n  //正方形\n  function Square(drawingContext, size, color) {\n    // draw white background\n    drawingContext.fillStyle = color;\n    drawingContext.fillRect(0, 0, size, size);\n  }\n\n  module.exports = HUD;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jbGllbnQvUm9ja1J1bi9IVUQuanM/MzQwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBEQiA9IHJlcXVpcmUoJy4vZGF0YWJ1cycpXG5cbmNvbnN0IEhVRCA9IGZ1bmN0aW9uIChUSFJFRSkge1xuICBsZXQgc2VsZiA9IHt9XG5cbiAgLy8gbGV0IHNjZW5lSFVELGNhbWVyYUhVRDtcblxuICBsZXQgY2FtZXJhT3J0aG8sIHNjZW5lT3J0aG87XG4gIHNlbGYuaW5kaWNhdG9yQkcgPSBudWxsICAgLy/op6bmkbjovpPlhaXnmoTog4zmma/lkozmjIfnpLpcbiAgc2VsZi5pbmRpY2F0b3IgPSBudWxsXG4gICAgLy8gLHNwcml0ZVRMXG5cbiAgY29uc3Qgc2l6ZSA9IDY0XG5cbiAgc2VsZi5yZW5kZXJlciA9IG51bGxcbiAgLy8gc2VsZi5pbmRpY2F0b3IgPSBudWxsXG5cblxuICBjb25zdCB3aWR0aCA9IERCLldEO1xuICBjb25zdCBoZWlnaHQgPSBEQi5XSDtcbiAgY29uc3QgaW1hZ2VXaWR0aCA9IHNpemUgLyAyIC8vbWF0ZXJpYWwubWFwLmltYWdlLndpZHRoIC8gMjtcbiAgY29uc3QgaW1hZ2VIZWlnaHQgPSBzaXplIC8gMiAgLy9tYXRlcmlhbC5tYXAuaW1hZ2UuaGVpZ2h0IC8gMjtcbiAgY29uc3QgSHdpZHRoID0gREIuV0QgLyAyO1xuICBjb25zdCBIaGVpZ2h0ID0gREIuV0ggLyAyO1xuXG5cblxuICBzZWxmLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgc2VsZi5pbml0U2V0KClcbiAgICBzZWxmLmFkZFRvdWNoSW5kaWNhdG9yKClcbiAgICBzZWxmLmFkZFRvdWNoSW5kaWNhdG9yQkcoKSAvL+WKoOS4quinpuaRuOi1t+Wni+iDjOaZr1xuXG4gICAgLy8gdXBkYXRlSFVEU3ByaXRlcygpLy/orr7nva7mjInpkq7kvY3nva5cbiAgICAvLyBzZWxmLmluZGljYXRvciA9IHNwcml0ZVRMXG4gIH1cblxuICBzZWxmLmluaXRTZXQgPSBmdW5jdGlvbiAoKSB7ICAvL+WQr+WKqOeVjOmdolxuICAgIC8v5Yib5bu655u45py6XG4gICAgY2FtZXJhT3J0aG8gPSBuZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKCAtIEh3aWR0aCwgSHdpZHRoLCBIaGVpZ2h0LCAtIEhoZWlnaHQsIDEsIDEwICk7XG4gICAgY2FtZXJhT3J0aG8ucG9zaXRpb24ueiA9IDEwO1xuICAgIHNjZW5lT3J0aG8gPSBuZXcgVEhSRUUuU2NlbmUoKTtcbiAgfVxuXG4gIHNlbGYucmVuZCA9IGZ1bmN0aW9uICgpIHsgIC8v5LygcmVuZGVy6L+b5p2l5riy5p+TXG4gICAgaWYoIXNlbGYucmVuZGVyZXIpIHsgY29uc29sZS5lcnJvcignbm90IHJlbmRlcmVyJyk7IHJldHVybiB9XG4gICAgaWYoIXNjZW5lT3J0aG8pIHsgY29uc29sZS5lcnJvcignbm90IHNjZW5lT3J0aG8nKTsgcmV0dXJuIH1cbiAgICBpZighY2FtZXJhT3J0aG8pIHsgY29uc29sZS5lcnJvcignbm90IGNhbWVyYU9ydGhvJyk7IHJldHVybiB9XG4gICAgc2VsZi5yZW5kZXJlci5yZW5kZXIoIHNjZW5lT3J0aG8sIGNhbWVyYU9ydGhvICk7XG4gIH1cblxuICAvL+i9rOaNoum8oOagh+S8oOWFpeS9jee9rlxuICBzZWxmLmNvbnZlcnRNb3VzZVBvcyA9IGZ1bmN0aW9uIChtb2RlbCwgcG9zKSB7XG4gICAgaWYoIW1vZGVsKSB7IGNvbnNvbGUuZXJyb3IoJ25vIGluZGljYXRvcicpOyByZXR1cm59XG4gICAgLy8gY29uc3Qgd2lkdGggPSBtYXRlcmlhbC5tYXAuaW1hZ2Uud2lkdGhcbiAgICAvLyBjb25zdCBUaGVpZ2h0ID0gbW9kZWwubWF0ZXJpYWwubWFwLmltYWdlLmhlaWdodFxuXG4gICAgbW9kZWwucG9zaXRpb24uc2V0KCBwb3MueCAtIEh3aWR0aCwgLXBvcy55ICsgSGhlaWdodCwgMSApO1xuICAgIC8vIG1vZGVsLnBvc2l0aW9uLnkgKz0gNjQgIC8v55Soc3RhdHPkvJrpgKDmiJDnp7vkvY1cbiAgICAvLyBjb25zb2xlLmxvZygn6byg5qCH5Lyg5YWl5L2N572uJywgcG9zLCBtb2RlbC5wb3NpdGlvbilcbiAgfVxuXG4vKlxuICBmdW5jdGlvbiB1cGRhdGVIVURTcHJpdGVzKCkge1xuXG4gICAgLy8gdmFyIG1hdGVyaWFsID0gc3ByaXRlVEwubWF0ZXJpYWw7XG5cbiAgICAvLyBzcHJpdGVUTC5wb3NpdGlvbi5zZXQoIC1Vd2lkdGggKyBpbWFnZVdpZHRoLCAgIFVoZWlnaHQgLSBpbWFnZUhlaWdodCwgMSApOyAvLyB0b3AgbGVmdFxuICAgIC8vIHNwcml0ZVRSLnBvc2l0aW9uLnNldCggICB3aWR0aCAtIGltYWdlV2lkdGgsICAgaGVpZ2h0IC0gaW1hZ2VIZWlnaHQsIDEgKTsgLy8gdG9wIHJpZ2h0XG4gICAgc3ByaXRlVEwucG9zaXRpb24uc2V0KCAtIEh3aWR0aCArIGltYWdlV2lkdGgsIC0gSGhlaWdodCArIGltYWdlSGVpZ2h0LCAxICk7IC8vIGJvdHRvbSBsZWZ0XG4gICAgLy8gc3ByaXRlQlIucG9zaXRpb24uc2V0KCAgIHdpZHRoIC0gaW1hZ2VXaWR0aCwgLSBoZWlnaHQgKyBpbWFnZUhlaWdodCwgMSApOyAvLyBib3R0b20gcmlnaHRcbiAgICAvLyBzcHJpdGVDLnBvc2l0aW9uLnNldCggMCwgMCwgMSApOyAvLyBjZW50ZXJcbiAgICAvLyBjb25zb2xlLmxvZygnc3ByaXRlVEzkvY3nva7mmK8nLCBzcHJpdGVUTC5wb3NpdGlvbilcbiAgfVxuKi9cblxuXG5cblxuICAvL+WKoOS4quinpuaRuOi1t+Wni+iDjOaZryDnmb3oibIg56m65b+D5ZyGXG4gIHNlbGYuYWRkVG91Y2hJbmRpY2F0b3JCRyA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBzaXplID0gMTI4XG4gICAgY29uc3QgdGV4dHVyZSA9IG1ha2VUZXh0dXJlKFRIUkVFLCAxLCBzaXplLCAnd2hpdGUnKVxuICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IFRIUkVFLlNwcml0ZU1hdGVyaWFsKCB7IG1hcDogdGV4dHVyZSB9ICk7XG4gICAgLy8gdmFyIHdpZHRoID0gbWF0ZXJpYWwubWFwLmltYWdlLndpZHRoO1xuICAgIC8vIHZhciBoZWlnaHQgPSBtYXRlcmlhbC5tYXAuaW1hZ2UuaGVpZ2h0O1xuICAgIHNlbGYuaW5kaWNhdG9yQkcgPSBuZXcgVEhSRUUuU3ByaXRlKCBtYXRlcmlhbCApO1xuICAgIC8vIHNwcml0ZVRMLnNjYWxlLnNldCggd2lkdGgsIGhlaWdodCwgMSApO1xuICAgIHNlbGYuaW5kaWNhdG9yQkcuc2NhbGUuc2V0KCBzaXplLCBzaXplLCAxICk7XG4gICAgc2NlbmVPcnRoby5hZGQoIHNlbGYuaW5kaWNhdG9yQkcgKTtcbiAgfVxuICBzZWxmLm1vdmVJbmRpY2F0b3JCRyA9IGZ1bmN0aW9uIChwb3MpIHtcbiAgICBzZWxmLmNvbnZlcnRNb3VzZVBvcyggc2VsZi5pbmRpY2F0b3JCRywgcG9zKVxuICB9XG5cbiAgLy/liqDkuKrop6bmkbgg55m96Imy5ZyGXG4gIHNlbGYuYWRkVG91Y2hJbmRpY2F0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3Qgc2l6ZSA9IDY0XG4gICAgY29uc3QgdGV4dHVyZSA9IG1ha2VUZXh0dXJlKFRIUkVFLCAwLCBzaXplLCAnd2hpdGUnKVxuICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IFRIUkVFLlNwcml0ZU1hdGVyaWFsKCB7IG1hcDogdGV4dHVyZSB9ICk7XG4gICAgc2VsZi5pbmRpY2F0b3IgPSBuZXcgVEhSRUUuU3ByaXRlKCBtYXRlcmlhbCApO1xuICAgIHNlbGYuaW5kaWNhdG9yLnNjYWxlLnNldCggc2l6ZSwgc2l6ZSwgMSApO1xuICAgIHNjZW5lT3J0aG8uYWRkKCBzZWxmLmluZGljYXRvciApO1xuICB9XG4gIHNlbGYubW92ZUluZGljYXRvciA9IGZ1bmN0aW9uIChwb3MpIHtcbiAgICBzZWxmLmNvbnZlcnRNb3VzZVBvcyggc2VsZi5pbmRpY2F0b3IsIHBvcylcbiAgfVxuXG5cbiAgcmV0dXJuIHNlbGZcbn1cblxuXG5mdW5jdGlvbiBtYWtlVGV4dHVyZShUSFJFRSwgdHlwZSAsc2l6ZSwgY29sb3IpIHsgIC8v5Yib5bu6Y2FudmFz6LS05Zu+XG5cbiAgY29uc3QgY2FudmFzID0gREIuaXNXWCA/IHd4LmNyZWF0ZUNhbnZhcygpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcbiAgY2FudmFzLndpZHRoID0gc2l6ZVxuICBjYW52YXMuaGVpZ2h0ID0gc2l6ZVxuICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICBpZih0eXBlID09PSAwKXtcbiAgICBDaXJjbGUoIGN0eCwgc2l6ZSwgY29sb3IgKSAgLy/lnIZcbiAgfVxuICBlbHNlIGlmICh0eXBlID09PSAxKXtcbiAgICBIb2xsb3dDaXJjbGUoY3R4LCBzaXplLCBjb2xvcikgIC8v56m65b+D5ZyGXG4gIH1cbiAgZWxzZSBpZiAodHlwZSA9PT0gMil7XG4gICAgU3F1YXJlKGN0eCwgc2l6ZSwgY29sb3IpLy/nlLvkuKrmraPmlrnlvaJcbiAgfVxuXG5cbiAgY29uc3QgdGV4dHVyZSA9IG5ldyBUSFJFRS5UZXh0dXJlKGNhbnZhcylcbiAgdGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWUgLy8g6LS05Zu+5pu05paw5omN6IO95pi+56S6XG4gIHJldHVybiB0ZXh0dXJlXG59XG5cbmZ1bmN0aW9uIENpcmNsZSAoY3h0LCBzaXplLCBjb2xvcikge1xuLy/nlLvkuIDkuKrlrp7lv4PlnIZcbiAgY3h0LmJlZ2luUGF0aCgpO1xuICBjeHQuYXJjKHNpemUvMixzaXplLzIsc2l6ZS8yLDAsMzYwLGZhbHNlKTtcbiAgY3h0LmZpbGxTdHlsZT0gY29sb3IgOy8v5aGr5YWF6aKc6ImyLOm7mOiupOaYr+m7keiJslxuICBjeHQuZmlsbCgpOy8v55S75a6e5b+D5ZyGXG4gIGN4dC5jbG9zZVBhdGgoKTtcbn1cblxuLy/nqbrlv4PlnIZcbmZ1bmN0aW9uIEhvbGxvd0NpcmNsZShjeHQsIHNpemUsIGNvbG9yKSB7XG4gIGN4dC5iZWdpblBhdGgoKTtcbiAgY3h0LmFyYyhzaXplLzIsIHNpemUvMiwgc2l6ZS8yLTYsMCwzNjAsZmFsc2UpO1xuICBjeHQubGluZVdpZHRoPTY7XG4gIGN4dC5zdHJva2VTdHlsZT0gY29sb3I7XG4gIGN4dC5zdHJva2UoKTsvL+eUu+epuuW/g+WchlxuICBjeHQuY2xvc2VQYXRoKCk7XG59XG5cbi8v5q2j5pa55b2iXG5mdW5jdGlvbiBTcXVhcmUgKGRyYXdpbmdDb250ZXh0LCBzaXplLCBjb2xvcikge1xuICAvLyBkcmF3IHdoaXRlIGJhY2tncm91bmRcbiAgZHJhd2luZ0NvbnRleHQuZmlsbFN0eWxlID0gY29sb3I7XG4gIGRyYXdpbmdDb250ZXh0LmZpbGxSZWN0KCAwLCAwLCBzaXplLCBzaXplICk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gSFVEXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNsaWVudC9Sb2NrUnVuL0hVRC5qcyJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBOzs7Ozs7OztBQUFBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8\n");

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./databus'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.databus);\n    global.ground = mod.exports;\n  }\n})(undefined, function (module, DB) {\n  'use strict';\n\n  function Ground(THREE, wRadius) {\n    var sides = 140;\n    var tiers = 140;\n    var sphereGeometry = new THREE.SphereGeometry(wRadius, sides, tiers);\n    //防止中线一直同一条\n    sphereGeometry.applyMatrix(new THREE.Matrix4().makeRotationX(-Math.PI / 4));\n\n    var sphereMaterial = new THREE.MeshStandardMaterial({\n      // var sphereMaterial = new THREE.MeshPhongMaterial( {\n      color: 0xfffafa,\n      // color: DB.color.ground ,\n      flatShading: true,\n      vertexColors: THREE.VertexColors\n      // wireframe:true\n    });\n\n    var vertexIndex;\n    var vertexVector = new THREE.Vector3();\n    var nextVertexVector = new THREE.Vector3();\n    var firstVertexVector = new THREE.Vector3();\n    var offset = new THREE.Vector3();\n    var currentTier = 1;\n    var lerpValue = 0.5;\n    var heightValue;\n    var maxHeight = 0.07;\n    for (var j = 1; j < tiers - 2; j++) {\n      currentTier = j;\n      for (var i = 0; i < sides; i++) {\n        vertexIndex = currentTier * sides + 1;\n        vertexVector = sphereGeometry.vertices[i + vertexIndex].clone();\n        if (j % 2 !== 0) {\n          if (i == 0) {\n            firstVertexVector = vertexVector.clone();\n          }\n          nextVertexVector = sphereGeometry.vertices[i + vertexIndex + 1].clone();\n          if (i == sides - 1) {\n            nextVertexVector = firstVertexVector;\n          }\n          lerpValue = Math.random() * (0.75 - 0.25) + 0.25;\n          vertexVector.lerp(nextVertexVector, lerpValue);\n        }\n        heightValue = Math.random() * maxHeight - maxHeight / 2;\n        offset = vertexVector.clone().normalize().multiplyScalar(heightValue);\n        sphereGeometry.vertices[i + vertexIndex] = vertexVector.add(offset);\n      }\n    }\n\n    var faceIndices = ['a', 'b', 'c']; //顶点索引\n    var f = void 0,\n        p = void 0,\n        color = void 0,\n        t = void 0;\n    for (var _i = 0; _i < sphereGeometry.faces.length; _i++) {\n      f = sphereGeometry.faces[_i];\n\n      for (var j = 0; j < 3; j++) {\n        vertexIndex = f[faceIndices[j]];\n        p = sphereGeometry.vertices[vertexIndex];\n        color = new THREE.Color(0xffffff);\n        // t = Math.max(( p.z / wRadius + 1 ), 0.4)\n        t = 1; //Math.random() + 0.5\n        // console.log('set color', p, t)\n        color.setRGB(235 / 255 * t, 218 / 255 * t, 182 / 255 * t);\n        // color.setRGB( ( p.y / wRadius + 1 ) / 2 , 0.5 , 0 )\n        // color.setHSL( ( p.y / wRadius + 1 ) / 2, 1.0, 0.5 );\n        f.vertexColors[j] = color;\n      }\n    }\n\n    var bufferGeo = new THREE.BufferGeometry().fromGeometry(sphereGeometry);\n    sphereGeometry = null;\n    var rollingGroundSphere = new THREE.Mesh(bufferGeo, sphereMaterial);\n    rollingGroundSphere.receiveShadow = true;\n    rollingGroundSphere.castShadow = false;\n    rollingGroundSphere.rotation.z = -Math.PI / 2;\n\n    // rollingGroundSphere.position.y=-24;\n    rollingGroundSphere.position.y = -wRadius;\n    // rollingGroundSphere.position.z=2;\n\n    //动画\n    rollingGroundSphere.animation = function (val) {\n      rollingGroundSphere.rotation.x += val; //旋转地面\n    };\n\n    return rollingGroundSphere;\n  }\n\n  // if(module){\n  module.exports = Ground;\n  // }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jbGllbnQvUm9ja1J1bi9ncm91bmQuanM/YTQzMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IERCID0gcmVxdWlyZSgnLi9kYXRhYnVzJylcblxuXG5mdW5jdGlvbiBHcm91bmQgKFRIUkVFLCB3UmFkaXVzKSB7XG4gIHZhciBzaWRlcz0xNDA7XG4gIHZhciB0aWVycz0xNDA7XG4gIHZhciBzcGhlcmVHZW9tZXRyeSA9IG5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeSggd1JhZGl1cywgc2lkZXMsdGllcnMpO1xuICAvL+mYsuatouS4ree6v+S4gOebtOWQjOS4gOadoVxuICBzcGhlcmVHZW9tZXRyeS5hcHBseU1hdHJpeChuZXcgVEhSRUUuTWF0cml4NCgpLm1ha2VSb3RhdGlvblgoLU1hdGguUEkvNCkpO1xuXG5cbiAgdmFyIHNwaGVyZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKCB7XG4gIC8vIHZhciBzcGhlcmVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCgge1xuICAgIGNvbG9yOiAweGZmZmFmYSAsXG4gICAgLy8gY29sb3I6IERCLmNvbG9yLmdyb3VuZCAsXG4gICAgZmxhdFNoYWRpbmcgOiB0cnVlLFxuICAgIHZlcnRleENvbG9yczogVEhSRUUuVmVydGV4Q29sb3JzLFxuICAvLyB3aXJlZnJhbWU6dHJ1ZVxuICB9IClcblxuICB2YXIgdmVydGV4SW5kZXg7XG4gIHZhciB2ZXJ0ZXhWZWN0b3I9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gIHZhciBuZXh0VmVydGV4VmVjdG9yPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICB2YXIgZmlyc3RWZXJ0ZXhWZWN0b3I9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gIHZhciBvZmZzZXQ9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gIHZhciBjdXJyZW50VGllcj0xO1xuICB2YXIgbGVycFZhbHVlPTAuNTtcbiAgdmFyIGhlaWdodFZhbHVlO1xuICB2YXIgbWF4SGVpZ2h0PTAuMDc7XG4gIGZvcih2YXIgaj0xO2o8dGllcnMtMjtqKyspe1xuICAgIGN1cnJlbnRUaWVyPWo7XG4gICAgZm9yKHZhciBpPTA7aTxzaWRlcztpKyspe1xuICAgICAgdmVydGV4SW5kZXg9KGN1cnJlbnRUaWVyKnNpZGVzKSsxO1xuICAgICAgdmVydGV4VmVjdG9yPXNwaGVyZUdlb21ldHJ5LnZlcnRpY2VzW2krdmVydGV4SW5kZXhdLmNsb25lKCk7XG4gICAgICBpZihqJTIhPT0wKXtcbiAgICAgICAgaWYoaT09MCl7XG4gICAgICAgICAgZmlyc3RWZXJ0ZXhWZWN0b3I9dmVydGV4VmVjdG9yLmNsb25lKCk7XG4gICAgICAgIH1cbiAgICAgICAgbmV4dFZlcnRleFZlY3Rvcj1zcGhlcmVHZW9tZXRyeS52ZXJ0aWNlc1tpK3ZlcnRleEluZGV4KzFdLmNsb25lKCk7XG4gICAgICAgIGlmKGk9PXNpZGVzLTEpe1xuICAgICAgICAgIG5leHRWZXJ0ZXhWZWN0b3I9Zmlyc3RWZXJ0ZXhWZWN0b3I7XG4gICAgICAgIH1cbiAgICAgICAgbGVycFZhbHVlPShNYXRoLnJhbmRvbSgpKigwLjc1LTAuMjUpKSswLjI1O1xuICAgICAgICB2ZXJ0ZXhWZWN0b3IubGVycChuZXh0VmVydGV4VmVjdG9yLGxlcnBWYWx1ZSk7XG4gICAgICB9XG4gICAgICBoZWlnaHRWYWx1ZT0oTWF0aC5yYW5kb20oKSptYXhIZWlnaHQpLShtYXhIZWlnaHQvMik7XG4gICAgICBvZmZzZXQ9dmVydGV4VmVjdG9yLmNsb25lKCkubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIoaGVpZ2h0VmFsdWUpO1xuICAgICAgc3BoZXJlR2VvbWV0cnkudmVydGljZXNbaSt2ZXJ0ZXhJbmRleF09KHZlcnRleFZlY3Rvci5hZGQob2Zmc2V0KSk7XG4gICAgfVxuICB9XG5cblxuICBjb25zdCBmYWNlSW5kaWNlcyA9IFsgJ2EnLCAnYicsICdjJyBdOyAgLy/pobbngrnntKLlvJVcbiAgbGV0IGYsIHAsIGNvbG9yLCB0XG4gIGZvciAoIGxldCBpID0gMDsgaSA8IHNwaGVyZUdlb21ldHJ5LmZhY2VzLmxlbmd0aDsgaSArKyApIHtcbiAgICBmICA9IHNwaGVyZUdlb21ldHJ5LmZhY2VzWyBpIF07XG5cbiAgICBmb3IgKCB2YXIgaiA9IDA7IGogPCAzOyBqICsrICkge1xuICAgICAgdmVydGV4SW5kZXggPSBmWyBmYWNlSW5kaWNlc1sgaiBdIF07XG4gICAgICBwID0gc3BoZXJlR2VvbWV0cnkudmVydGljZXNbIHZlcnRleEluZGV4IF07XG4gICAgICBjb2xvciA9IG5ldyBUSFJFRS5Db2xvciggMHhmZmZmZmYgKTtcbiAgICAgIC8vIHQgPSBNYXRoLm1heCgoIHAueiAvIHdSYWRpdXMgKyAxICksIDAuNClcbiAgICAgIHQgPSAxIC8vTWF0aC5yYW5kb20oKSArIDAuNVxuICAgICAgLy8gY29uc29sZS5sb2coJ3NldCBjb2xvcicsIHAsIHQpXG4gICAgICBjb2xvci5zZXRSR0IoICgyMzUvMjU1KSp0ICwgMjE4LzI1NSp0LCAxODIvMjU1KnQgKVxuICAgICAgLy8gY29sb3Iuc2V0UkdCKCAoIHAueSAvIHdSYWRpdXMgKyAxICkgLyAyICwgMC41ICwgMCApXG4gICAgICAvLyBjb2xvci5zZXRIU0woICggcC55IC8gd1JhZGl1cyArIDEgKSAvIDIsIDEuMCwgMC41ICk7XG4gICAgICBmLnZlcnRleENvbG9yc1sgaiBdID0gY29sb3I7XG4gICAgfVxuXG4gIH1cblxuICBjb25zdCBidWZmZXJHZW8gPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKS5mcm9tR2VvbWV0cnkoc3BoZXJlR2VvbWV0cnkpXG4gIHNwaGVyZUdlb21ldHJ5ID0gbnVsbFxuICBjb25zdCByb2xsaW5nR3JvdW5kU3BoZXJlID0gbmV3IFRIUkVFLk1lc2goIGJ1ZmZlckdlbywgc3BoZXJlTWF0ZXJpYWwgKTtcbiAgcm9sbGluZ0dyb3VuZFNwaGVyZS5yZWNlaXZlU2hhZG93ID0gdHJ1ZTtcbiAgcm9sbGluZ0dyb3VuZFNwaGVyZS5jYXN0U2hhZG93PWZhbHNlO1xuICByb2xsaW5nR3JvdW5kU3BoZXJlLnJvdGF0aW9uLno9LU1hdGguUEkvMjtcblxuXG4gIC8vIHJvbGxpbmdHcm91bmRTcGhlcmUucG9zaXRpb24ueT0tMjQ7XG4gIHJvbGxpbmdHcm91bmRTcGhlcmUucG9zaXRpb24ueSA9IC13UmFkaXVzO1xuICAvLyByb2xsaW5nR3JvdW5kU3BoZXJlLnBvc2l0aW9uLno9MjtcblxuLy/liqjnlLtcbiAgcm9sbGluZ0dyb3VuZFNwaGVyZS5hbmltYXRpb24gPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgcm9sbGluZ0dyb3VuZFNwaGVyZS5yb3RhdGlvbi54ICs9IHZhbCA7IC8v5peL6L2s5Zyw6Z2iXG4gIH1cblxuICByZXR1cm4gcm9sbGluZ0dyb3VuZFNwaGVyZVxufVxuXG4vLyBpZihtb2R1bGUpe1xuICBtb2R1bGUuZXhwb3J0cyA9IEdyb3VuZFxuLy8gfVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjbGllbnQvUm9ja1J1bi9ncm91bmQuanMiXSwibWFwcGluZ3MiOiI7Ozs7QUFDQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7Ozs7Ozs7QUFBQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9\n");

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./databus'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.databus);\n    global.Player = mod.exports;\n  }\n})(undefined, function (module, DB) {\n  'use strict';\n  //玩家类\n\n  var Player = function Player(THREE) {\n\n    var self = {};\n    self.model = null; //建立完成后，外部存入模型\n    self.camera = null; //外部存入相机方便动作控制\n\n    var cameraObj = null; //用于控制相机，保证相机自己的位置受effect控制\n\n    var jumping = false;\n    var heroRadius = 0.2; //英雄半径\n    var heroBaseY = 0; //1.98  //地面高度\n    var isOnFloor = true; //是否在地面上\n\n    var leftLane = -2.5; //英雄所在线的位置\n    var rightLane = 2.5;\n    var middleLane = 0;\n    var currentLane = void 0;\n    var bounceValue = 0.1; //弹跳值\n    var gravity = 0.005; //重力值\n\n    // let horiSpeed = 0  //用于计算插值间隔\n\n    //人物的滚动速度\n    self.setSpeed = function () {\n      //根据不同速度设置人物速度\n      // DB.rollingSpeed += 0.001  //根据级别加速\n      heroRollingSpeed = DB.rollingSpeed * DB.worldRadius / heroRadius / 5;\n    };\n    var heroRollingSpeed = self.setSpeed();\n\n    self.init = function () {\n      jumping = false;\n      // self.model = DB.heroSphere.model\n      // LoadModel(function (mesh) {\n      //\n      //   self.model = new PlayerMesh( mesh )\n      //   cb(self.model)\n      // })\n      /*\n      const sphereGeometry = new THREE.DodecahedronGeometry( heroRadius, 1);\n      const sphereMaterial = new THREE.MeshStandardMaterial( { color: 0xe5f2f2 ,\n        flatShading : true\n        // flatShading : true\n      } )\n       self.model = new THREE.Mesh( sphereGeometry, sphereMaterial );\n      */\n      self.model.receiveShadow = true;\n      self.model.castShadow = true;\n\n      self.model.position.y = heroBaseY;\n      self.model.position.z = 4.8;\n      currentLane = middleLane; //位置 重置\n      self.model.position.x = currentLane;\n\n      self.position = self.model.position; //复制位置给外部\n      console.log('创建成功', self.model.position);\n    };\n\n    self.animation = function () {\n      if (!self.model) {\n        console.error('没有自己');return;\n      }\n      self.model.animate(); //人物刷新\n      //相机位置跟随移动\n      self.camera.position.x = THREE.Math.lerp(self.camera.position.x, currentLane, DB.lerpVal / 1.2);\n      self.camera.position.y = THREE.Math.lerp(self.camera.position.y, self.model.position.y - 1.98, DB.lerpVal / 1.5); //偏移模型高度，相机跟随跳跃\n      // console.log('模型高度', self.model.position.y)\n\n      //垂直位置计算\n      if (isOnFloor) {\n        jumping = false;\n        bounceValue = 0;\n        // self.model.setControl({moveForward:true}) //传导方向给模型\n        if (DB.dust) {\n          DB.dust.follow(DB.heroSphere.position);\n        } //激发效果\n      } else if (self.model.position.y <= heroBaseY) {\n        //模型矮过基础值，就是落在地面的情况\n        jumping = false;\n        isOnFloor = true; //落在地面\n        self.model.position.y = heroBaseY;\n        bounceValue = gravity + 0.001; //角色在地面时的跳动值\n        self.model.setControl({ moveForward: true }); //传导方向给模型\n        if (DB.dust) {\n          DB.dust.explode(DB.heroSphere.position);\n        } //激发效果\n        if (DB.CE) {\n          DB.CE.shake.set(Math.random() * 0.3 + 0.2, 0.3); //落地时随机抖一下\n        }\n      } else {\n        bounceValue -= gravity; //持续减少弹跳值\n        if (DB.dust) DB.dust.stop();\n      }\n\n      self.model.position.y += bounceValue; //固定刷新本地高度\n\n      //计算水平位置之间的插值  放到main中给大家用\n      // horiSpeed = 2 * DB.clock.getDelta()\n      // horiSpeed *= DB.isWX ? 1000 : 1\n      // 根据 第一 和 第二 个参数，用第三个值计算这之间的中间值\n      self.model.position.x = THREE.Math.lerp(self.model.position.x, currentLane, DB.lerpVal); //该函数本次调用和上次调用之间的时间间隔。\n    };\n\n    self.animation2 = function () {\n      if (!self.model) {\n        console.error('没有自己');return;\n      }\n      // self.model.rotation.x -= heroRollingSpeed;  //人物本身动作\n      self.model.animate(); //人物刷新\n\n      if (self.model.position.y <= heroBaseY) {\n        jumping = false;\n        bounceValue = Math.random() * 0.02 + gravity; //角色在地面时的跳动值\n\n        self.model.setControl({ moveForward: true }); //传导方向给模型\n      }\n      self.model.position.y += bounceValue;\n      //计算位置之间的插值\n      // horiSpeed = 2 * DB.clock.getDelta()\n      // horiSpeed *= DB.isWX ? 1000 : 1\n      // 根据 第一 和 第二 个参数，用第三个值计算这之间的中间值\n      self.model.position.x = THREE.Math.lerp(self.model.position.x, currentLane, DB.lerpVal); //该函数本次调用和上次调用之间的时间间隔。\n      //clock.getElapsedTime()); //时钟已运行时间。\n      bounceValue -= gravity; //持续减少弹跳值\n    };\n\n    //移动英雄\n    var validMove = void 0;\n    self.move = function (direction) {\n      // console.log('移动方向', direction)\n      if (jumping) return; //判断是否在移动或跳跃中\n      validMove = true;\n      switch (direction) {\n        case 'left':\n          //按左\n          if (currentLane == middleLane) {\n            currentLane = leftLane;\n          } else if (currentLane == rightLane) {\n            currentLane = middleLane;\n          } else {\n            validMove = false;\n          }\n          break;\n        case 'right':\n          //右\n          if (currentLane == middleLane) {\n            currentLane = rightLane;\n          } else if (currentLane == leftLane) {\n            currentLane = middleLane;\n          } else {\n            validMove = false;\n          }\n          break;\n        case 'up':\n          //跳跃\n          bounceValue = 0.1;\n          jumping = true;\n          isOnFloor = false;\n          validMove = false;\n          // console.log('player位置',self.model.position.y, bounceValue)\n          break;\n        case 'superUp':\n          bounceValue = 0.13;\n          jumping = true;\n          isOnFloor = false;\n          validMove = false;\n          break;\n        case 'superUp2':\n          bounceValue = 0.16;\n          jumping = true;\n          isOnFloor = false;\n          validMove = false;\n          break;\n        default:\n          break;\n      }\n\n      if (validMove) {\n        //移动有效，就把当前状态切换\n        jumping = true;\n        bounceValue = 0.06;\n\n        isOnFloor = false;\n        if (!self.model) return; //没有模型就不跳跃移动了\n        var data = {};\n        if (direction === 'up') direction = 'moveForward';\n        data[direction] = true;\n        self.model.setControl(data); //传导方向给模型\n\n        // DB.CE.slow.set(10, 3)\n        // DB.CE.shake.set(1, 0.2)\n      }\n\n      if (jumping) {\n        //添加跳跃前定一下\n        DB.CE.sleep.set(4);\n      }\n    }; //self.move\n\n    //被撞中的效果\n    self.getHit = function () {\n      if (DB.CE) {\n        DB.CE.sleep.set(3 + Math.random() * 5);\n        DB.CE.shake.set(Math.random() * 1 + 1, 0.08);\n        // DB.CE.slow.set(8, 3)\n      }\n      if (DB.effect) {\n        DB.effect.explode(DB.heroSphere.position);\n      } //激发效果\n      self.model.emissive(); //变色\n      // DB.rollingGroundSphere.rotation.x -= 0.01\n      DB.rollingSpeed = 0.0003;\n    };\n\n    //控制跑步行进速度\n    self.controlSpeed = function (val) {\n      if (val === 'up') {\n        DB.rollingSpeed += 0.0001;\n        DB.rollingSpeed = Math.min(DB.rollingSpeed, DB.rollingSpeedMax);\n      } else if (val === 'down') {\n        DB.rollingSpeed -= 0.0001;\n        DB.rollingSpeed = Math.max(DB.rollingSpeed, 0.0005);\n      }\n\n      if (DB.dust) DB.dust.setColor();\n    };\n\n    return self;\n  };\n\n  // if(module){\n  module.exports = Player;\n  // }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY2xpZW50L1JvY2tSdW4vUGxheWVyLmpzP2YxYWEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG4vL+eOqeWutuexu1xuY29uc3QgREIgPSByZXF1aXJlKCcuL2RhdGFidXMnKVxuXG5cblxuY29uc3QgUGxheWVyID0gZnVuY3Rpb24gKFRIUkVFKSB7XG5cbiAgbGV0IHNlbGYgPSB7fVxuICBzZWxmLm1vZGVsID0gbnVsbCAgLy/lu7rnq4vlrozmiJDlkI7vvIzlpJbpg6jlrZjlhaXmqKHlnotcbiAgc2VsZi5jYW1lcmEgPSBudWxsIC8v5aSW6YOo5a2Y5YWl55u45py65pa55L6/5Yqo5L2c5o6n5Yi2XG5cbiAgbGV0IGNhbWVyYU9iaiA9IG51bGwgLy/nlKjkuo7mjqfliLbnm7jmnLrvvIzkv53or4Hnm7jmnLroh6rlt7HnmoTkvY3nva7lj5dlZmZlY3TmjqfliLZcblxuICBsZXQganVtcGluZyA9IGZhbHNlXG4gIGxldCBoZXJvUmFkaXVzID0gMC4yIC8v6Iux6ZuE5Y2K5b6EXG4gIGxldCBoZXJvQmFzZVkgPSAwIC8vMS45OCAgLy/lnLDpnaLpq5jluqZcbiAgbGV0IGlzT25GbG9vciA9IHRydWUgLy/mmK/lkKblnKjlnLDpnaLkuIpcblxuICBsZXQgbGVmdExhbmU9LTIuNTsgIC8v6Iux6ZuE5omA5Zyo57q/55qE5L2N572uXG4gIGxldCByaWdodExhbmU9Mi41O1xuICBsZXQgbWlkZGxlTGFuZT0wO1xuICBsZXQgY3VycmVudExhbmU7XG4gIGxldCBib3VuY2VWYWx1ZSA9IDAuMTsgLy/lvLnot7PlgLxcbiAgbGV0IGdyYXZpdHk9MC4wMDU7IC8v6YeN5Yqb5YC8XG5cbiAgLy8gbGV0IGhvcmlTcGVlZCA9IDAgIC8v55So5LqO6K6h566X5o+S5YC86Ze06ZqUXG5cbiAgLy/kurrniannmoTmu5rliqjpgJ/luqZcbiAgc2VsZi5zZXRTcGVlZCA9IGZ1bmN0aW9uKCl7ICAvL+agueaNruS4jeWQjOmAn+W6puiuvue9ruS6uueJqemAn+W6plxuICAgIC8vIERCLnJvbGxpbmdTcGVlZCArPSAwLjAwMSAgLy/moLnmja7nuqfliKvliqDpgJ9cbiAgICBoZXJvUm9sbGluZ1NwZWVkID0gKERCLnJvbGxpbmdTcGVlZCAqIERCLndvcmxkUmFkaXVzIC8gaGVyb1JhZGl1cykgLyA1O1xuICB9XG4gIGxldCBoZXJvUm9sbGluZ1NwZWVkID0gc2VsZi5zZXRTcGVlZCgpXG5cblxuXG4gIHNlbGYuaW5pdCA9IGZ1bmN0aW9uICgpe1xuICAgIGp1bXBpbmcgPSBmYWxzZTtcbiAgICAvLyBzZWxmLm1vZGVsID0gREIuaGVyb1NwaGVyZS5tb2RlbFxuICAgIC8vIExvYWRNb2RlbChmdW5jdGlvbiAobWVzaCkge1xuICAgIC8vXG4gICAgLy8gICBzZWxmLm1vZGVsID0gbmV3IFBsYXllck1lc2goIG1lc2ggKVxuICAgIC8vICAgY2Ioc2VsZi5tb2RlbClcbiAgICAvLyB9KVxuICAgIC8qXG4gICAgY29uc3Qgc3BoZXJlR2VvbWV0cnkgPSBuZXcgVEhSRUUuRG9kZWNhaGVkcm9uR2VvbWV0cnkoIGhlcm9SYWRpdXMsIDEpO1xuICAgIGNvbnN0IHNwaGVyZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKCB7IGNvbG9yOiAweGU1ZjJmMiAsXG4gICAgICBmbGF0U2hhZGluZyA6IHRydWVcbiAgICAgIC8vIGZsYXRTaGFkaW5nIDogdHJ1ZVxuICAgIH0gKVxuXG4gICAgc2VsZi5tb2RlbCA9IG5ldyBUSFJFRS5NZXNoKCBzcGhlcmVHZW9tZXRyeSwgc3BoZXJlTWF0ZXJpYWwgKTtcbiAgICAqL1xuICAgIHNlbGYubW9kZWwucmVjZWl2ZVNoYWRvdyA9IHRydWU7XG4gICAgc2VsZi5tb2RlbC5jYXN0U2hhZG93PXRydWU7XG5cbiAgICBzZWxmLm1vZGVsLnBvc2l0aW9uLnkgPSBoZXJvQmFzZVk7XG4gICAgc2VsZi5tb2RlbC5wb3NpdGlvbi56ID0gNC44O1xuICAgIGN1cnJlbnRMYW5lID0gbWlkZGxlTGFuZTsgLy/kvY3nva4g6YeN572uXG4gICAgc2VsZi5tb2RlbC5wb3NpdGlvbi54ID0gY3VycmVudExhbmU7XG5cbiAgICBzZWxmLnBvc2l0aW9uID0gc2VsZi5tb2RlbC5wb3NpdGlvbiAvL+WkjeWItuS9jee9rue7meWklumDqFxuICAgIGNvbnNvbGUubG9nKCfliJvlu7rmiJDlip8nLHNlbGYubW9kZWwucG9zaXRpb24pXG4gIH1cblxuICBzZWxmLmFuaW1hdGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgaWYoIXNlbGYubW9kZWwpe2NvbnNvbGUuZXJyb3IoJ+ayoeacieiHquW3sScpOyByZXR1cm4gfVxuICAgIHNlbGYubW9kZWwuYW5pbWF0ZSgpIC8v5Lq654mp5Yi35pawXG4gICAgLy/nm7jmnLrkvY3nva7ot5/pmo/np7vliqhcbiAgICBzZWxmLmNhbWVyYS5wb3NpdGlvbi54ID0gVEhSRUUuTWF0aC5sZXJwKHNlbGYuY2FtZXJhLnBvc2l0aW9uLngsIGN1cnJlbnRMYW5lLCBEQi5sZXJwVmFsIC8gMS4yKTtcbiAgICBzZWxmLmNhbWVyYS5wb3NpdGlvbi55ID0gVEhSRUUuTWF0aC5sZXJwKHNlbGYuY2FtZXJhLnBvc2l0aW9uLnksIHNlbGYubW9kZWwucG9zaXRpb24ueSAtIDEuOTgsIERCLmxlcnBWYWwgLyAxLjUpOyAvL+WBj+enu+aooeWei+mrmOW6pu+8jOebuOacuui3n+maj+i3s+i3g1xuLy8gY29uc29sZS5sb2coJ+aooeWei+mrmOW6picsIHNlbGYubW9kZWwucG9zaXRpb24ueSlcblxuICAgIC8v5Z6C55u05L2N572u6K6h566XXG4gICAgaWYoaXNPbkZsb29yKXtcbiAgICAgIGp1bXBpbmcgPSBmYWxzZTtcbiAgICAgIGJvdW5jZVZhbHVlID0gMFxuICAgICAgLy8gc2VsZi5tb2RlbC5zZXRDb250cm9sKHttb3ZlRm9yd2FyZDp0cnVlfSkgLy/kvKDlr7zmlrnlkJHnu5nmqKHlnotcbiAgICAgIGlmIChEQi5kdXN0KSB7IERCLmR1c3QuZm9sbG93KERCLmhlcm9TcGhlcmUucG9zaXRpb24pIH0gLy/mv4Dlj5HmlYjmnpxcbiAgICB9XG4gICAgZWxzZSBpZihzZWxmLm1vZGVsLnBvc2l0aW9uLnkgPD0gaGVyb0Jhc2VZKXsgIC8v5qih5Z6L55+u6L+H5Z+656GA5YC877yM5bCx5piv6JC95Zyo5Zyw6Z2i55qE5oOF5Ya1XG4gICAgICBqdW1waW5nID0gZmFsc2U7XG4gICAgICBpc09uRmxvb3IgPSB0cnVlIC8v6JC95Zyo5Zyw6Z2iXG4gICAgICBzZWxmLm1vZGVsLnBvc2l0aW9uLnkgPSBoZXJvQmFzZVlcbiAgICAgIGJvdW5jZVZhbHVlID0gZ3Jhdml0eSArIDAuMDAxICAvL+inkuiJsuWcqOWcsOmdouaXtueahOi3s+WKqOWAvFxuICAgICAgc2VsZi5tb2RlbC5zZXRDb250cm9sKHttb3ZlRm9yd2FyZDp0cnVlfSkgLy/kvKDlr7zmlrnlkJHnu5nmqKHlnotcbiAgICAgIGlmIChEQi5kdXN0KSB7IERCLmR1c3QuZXhwbG9kZShEQi5oZXJvU3BoZXJlLnBvc2l0aW9uKSB9IC8v5r+A5Y+R5pWI5p6cXG4gICAgICBpZiAoREIuQ0Upe1xuICAgICAgICBEQi5DRS5zaGFrZS5zZXQoTWF0aC5yYW5kb20oKSAqIDAuMyArIDAuMiwgMC4zKSAvL+iQveWcsOaXtumaj+acuuaKluS4gOS4i1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGJvdW5jZVZhbHVlIC09IGdyYXZpdHk7IC8v5oyB57ut5YeP5bCR5by56Lez5YC8XG4gICAgICBpZihEQi5kdXN0KSBEQi5kdXN0LnN0b3AoKVxuICAgIH1cblxuXG4gICAgc2VsZi5tb2RlbC5wb3NpdGlvbi55ICs9IGJvdW5jZVZhbHVlOyAvL+WbuuWumuWIt+aWsOacrOWcsOmrmOW6plxuXG4gICAgLy/orqHnrpfmsLTlubPkvY3nva7kuYvpl7TnmoTmj5LlgLwgIOaUvuWIsG1haW7kuK3nu5nlpKflrrbnlKhcbiAgICAvLyBob3JpU3BlZWQgPSAyICogREIuY2xvY2suZ2V0RGVsdGEoKVxuICAgIC8vIGhvcmlTcGVlZCAqPSBEQi5pc1dYID8gMTAwMCA6IDFcbiAgICAvLyDmoLnmja4g56ys5LiAIOWSjCDnrKzkuowg5Liq5Y+C5pWw77yM55So56ys5LiJ5Liq5YC86K6h566X6L+Z5LmL6Ze055qE5Lit6Ze05YC8XG4gICAgc2VsZi5tb2RlbC5wb3NpdGlvbi54ID0gVEhSRUUuTWF0aC5sZXJwKHNlbGYubW9kZWwucG9zaXRpb24ueCwgY3VycmVudExhbmUsIERCLmxlcnBWYWwpOyAvL+ivpeWHveaVsOacrOasoeiwg+eUqOWSjOS4iuasoeiwg+eUqOS5i+mXtOeahOaXtumXtOmXtOmalOOAglxuICB9XG5cblxuICBzZWxmLmFuaW1hdGlvbjIgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYoIXNlbGYubW9kZWwpe2NvbnNvbGUuZXJyb3IoJ+ayoeacieiHquW3sScpOyByZXR1cm4gfVxuICAgIC8vIHNlbGYubW9kZWwucm90YXRpb24ueCAtPSBoZXJvUm9sbGluZ1NwZWVkOyAgLy/kurrnianmnKzouqvliqjkvZxcbiAgICBzZWxmLm1vZGVsLmFuaW1hdGUoKSAvL+S6uueJqeWIt+aWsFxuXG4gICAgaWYoc2VsZi5tb2RlbC5wb3NpdGlvbi55IDw9IGhlcm9CYXNlWSl7XG4gICAgICBqdW1waW5nID0gZmFsc2U7XG4gICAgICBib3VuY2VWYWx1ZT0oTWF0aC5yYW5kb20oKSowLjAyKSArIGdyYXZpdHk7ICAvL+inkuiJsuWcqOWcsOmdouaXtueahOi3s+WKqOWAvFxuXG4gICAgICBzZWxmLm1vZGVsLnNldENvbnRyb2woe21vdmVGb3J3YXJkOnRydWV9KSAvL+S8oOWvvOaWueWQkee7meaooeWei1xuICAgIH1cbiAgICBzZWxmLm1vZGVsLnBvc2l0aW9uLnkgKz0gYm91bmNlVmFsdWU7XG4gICAgLy/orqHnrpfkvY3nva7kuYvpl7TnmoTmj5LlgLxcbiAgICAvLyBob3JpU3BlZWQgPSAyICogREIuY2xvY2suZ2V0RGVsdGEoKVxuICAgIC8vIGhvcmlTcGVlZCAqPSBEQi5pc1dYID8gMTAwMCA6IDFcbiAgICAvLyDmoLnmja4g56ys5LiAIOWSjCDnrKzkuowg5Liq5Y+C5pWw77yM55So56ys5LiJ5Liq5YC86K6h566X6L+Z5LmL6Ze055qE5Lit6Ze05YC8XG4gICAgc2VsZi5tb2RlbC5wb3NpdGlvbi54ID0gVEhSRUUuTWF0aC5sZXJwKHNlbGYubW9kZWwucG9zaXRpb24ueCwgY3VycmVudExhbmUsIERCLmxlcnBWYWwpOyAvL+ivpeWHveaVsOacrOasoeiwg+eUqOWSjOS4iuasoeiwg+eUqOS5i+mXtOeahOaXtumXtOmXtOmalOOAglxuICAgIC8vY2xvY2suZ2V0RWxhcHNlZFRpbWUoKSk7IC8v5pe26ZKf5bey6L+Q6KGM5pe26Ze044CCXG4gICAgYm91bmNlVmFsdWUgLT0gZ3Jhdml0eTsgLy/mjIHnu63lh4/lsJHlvLnot7PlgLxcbiAgfVxuXG5cbi8v56e75Yqo6Iux6ZuEXG4gIGxldCB2YWxpZE1vdmU7XG4gIHNlbGYubW92ZSA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAvLyBjb25zb2xlLmxvZygn56e75Yqo5pa55ZCRJywgZGlyZWN0aW9uKVxuICAgIGlmKGp1bXBpbmcpIHJldHVybiAgLy/liKTmlq3mmK/lkKblnKjnp7vliqjmiJbot7Pot4PkuK1cbiAgICB2YWxpZE1vdmUgPSB0cnVlXG4gICAgc3dpdGNoIChkaXJlY3Rpb24pe1xuICAgICAgY2FzZSAnbGVmdCc6ICAvL+aMieW3plxuICAgICAgICBpZihjdXJyZW50TGFuZSA9PSBtaWRkbGVMYW5lKXtcbiAgICAgICAgICAgY3VycmVudExhbmUgPSBsZWZ0TGFuZTtcbiAgICAgICAgfWVsc2UgaWYoIGN1cnJlbnRMYW5lID09IHJpZ2h0TGFuZSl7XG4gICAgICAgICAgIGN1cnJlbnRMYW5lID0gbWlkZGxlTGFuZTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgdmFsaWRNb3ZlPWZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdyaWdodCc6ICAvL+WPs1xuICAgICAgICBpZiggY3VycmVudExhbmUgPT0gbWlkZGxlTGFuZSl7XG4gICAgICAgICAgY3VycmVudExhbmUgPSByaWdodExhbmU7XG4gICAgICAgIH1lbHNlIGlmKGN1cnJlbnRMYW5lID09IGxlZnRMYW5lKXtcbiAgICAgICAgICBjdXJyZW50TGFuZSA9IG1pZGRsZUxhbmU7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIHZhbGlkTW92ZT1mYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAndXAnOiAgLy/ot7Pot4NcbiAgICAgICAgICBib3VuY2VWYWx1ZSA9IDAuMTtcbiAgICAgICAganVtcGluZyA9IHRydWU7XG4gICAgICAgIGlzT25GbG9vciA9IGZhbHNlXG4gICAgICAgICAgdmFsaWRNb3ZlID0gZmFsc2U7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdwbGF5ZXLkvY3nva4nLHNlbGYubW9kZWwucG9zaXRpb24ueSwgYm91bmNlVmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzdXBlclVwJzpcbiAgICAgICAgYm91bmNlVmFsdWUgPSAwLjEzO1xuICAgICAgICBqdW1waW5nPXRydWU7XG4gICAgICAgIGlzT25GbG9vciA9IGZhbHNlXG4gICAgICAgIHZhbGlkTW92ZT1mYWxzZTtcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3N1cGVyVXAyJzpcbiAgICAgICAgYm91bmNlVmFsdWUgPSAwLjE2O1xuICAgICAgICBqdW1waW5nPXRydWU7XG4gICAgICAgIGlzT25GbG9vciA9IGZhbHNlXG4gICAgICAgIHZhbGlkTW92ZT1mYWxzZTtcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgaWYodmFsaWRNb3ZlKXsgLy/np7vliqjmnInmlYjvvIzlsLHmiorlvZPliY3nirbmgIHliIfmjaJcbiAgICAgIGp1bXBpbmcgPSB0cnVlO1xuICAgICAgYm91bmNlVmFsdWU9MC4wNjtcblxuICAgICAgaXNPbkZsb29yID0gZmFsc2VcbiAgICAgIGlmKCFzZWxmLm1vZGVsKSByZXR1cm4gLy/msqHmnInmqKHlnovlsLHkuI3ot7Pot4Pnp7vliqjkuoZcbiAgICAgIGNvbnN0IGRhdGEgPSB7fVxuICAgICAgaWYoZGlyZWN0aW9uID09PSAndXAnKSBkaXJlY3Rpb24gPSAnbW92ZUZvcndhcmQnXG4gICAgICBkYXRhW2RpcmVjdGlvbl0gPSB0cnVlXG4gICAgICBzZWxmLm1vZGVsLnNldENvbnRyb2woZGF0YSkgLy/kvKDlr7zmlrnlkJHnu5nmqKHlnotcblxuICAgICAgLy8gREIuQ0Uuc2xvdy5zZXQoMTAsIDMpXG4gICAgICAvLyBEQi5DRS5zaGFrZS5zZXQoMSwgMC4yKVxuXG4gICAgfVxuXG4gICAgaWYoanVtcGluZyl7ICAvL+a3u+WKoOi3s+i3g+WJjeWumuS4gOS4i1xuICAgICAgREIuQ0Uuc2xlZXAuc2V0KDQpXG4gICAgfVxuXG5cbiAgfSAvL3NlbGYubW92ZVxuXG4vL+iiq+aSnuS4reeahOaViOaenFxuICBzZWxmLmdldEhpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZihEQi5DRSl7XG4gICAgICBEQi5DRS5zbGVlcC5zZXQoMyArIE1hdGgucmFuZG9tKCkgKiA1KVxuICAgICAgREIuQ0Uuc2hha2Uuc2V0KE1hdGgucmFuZG9tKCkgKiAxICsgMSwgMC4wOClcbiAgICAgIC8vIERCLkNFLnNsb3cuc2V0KDgsIDMpXG4gICAgfVxuICAgIGlmIChEQi5lZmZlY3QpIHsgREIuZWZmZWN0LmV4cGxvZGUoREIuaGVyb1NwaGVyZS5wb3NpdGlvbikgfSAvL+a/gOWPkeaViOaenFxuICAgIHNlbGYubW9kZWwuZW1pc3NpdmUoKSAgLy/lj5joibJcbiAgICAvLyBEQi5yb2xsaW5nR3JvdW5kU3BoZXJlLnJvdGF0aW9uLnggLT0gMC4wMVxuICAgIERCLnJvbGxpbmdTcGVlZCA9IDAuMDAwM1xuICB9XG5cbiAgLy/mjqfliLbot5HmraXooYzov5vpgJ/luqZcbiAgc2VsZi5jb250cm9sU3BlZWQgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgaWYodmFsID09PSAndXAnKXtcbiAgICAgIERCLnJvbGxpbmdTcGVlZCArPSAwLjAwMDFcbiAgICAgIERCLnJvbGxpbmdTcGVlZCA9IE1hdGgubWluKERCLnJvbGxpbmdTcGVlZCwgREIucm9sbGluZ1NwZWVkTWF4KVxuICAgIH1cblxuICAgIGVsc2UgaWYodmFsID09PSAnZG93bicpe1xuICAgICAgREIucm9sbGluZ1NwZWVkIC09IDAuMDAwMVxuICAgICAgREIucm9sbGluZ1NwZWVkID0gTWF0aC5tYXgoREIucm9sbGluZ1NwZWVkLCAwLjAwMDUpXG4gICAgfVxuXG4gICAgaWYoREIuZHVzdCkgREIuZHVzdC5zZXRDb2xvcigpXG4gIH1cblxuICByZXR1cm4gc2VsZlxufVxuXG4vLyBpZihtb2R1bGUpe1xuICBtb2R1bGUuZXhwb3J0cyA9IFBsYXllclxuLy8gfVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjbGllbnQvUm9ja1J1bi9QbGF5ZXIuanMiXSwibWFwcGluZ3MiOiI7Ozs7QUFFQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7Ozs7Ozs7QUFBQTtBQUZBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2Q0E7QUFDQTtBQXlDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./databus'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.databus);\n    global.PlayerMesh = mod.exports;\n  }\n})(undefined, function (module, DB) {\n  'use strict';\n\n  //模型\n  var PlayerMesh = function PlayerMesh(model) {\n    if (!(model instanceof THREE.SkinnedMesh)) {\n      console.error('PlayerMesh Type error', model.type);\n    }\n    if (!model.children || model.children.length < 0) {\n      console.error('PlayerMesh children error', model.children);\n    }\n\n    var self = model;\n\n    // self = new PlayerEffect( self ) //导入特效\n\n\n    self.status = 1; //当前状态 0静止 1跑动\n    self.direction = 0; //控制输入的朝向  下半身转向\n    self.weaponType = 1; //武器类型 0空手 1刀， 2手枪， 3，长枪\n    self.isAttack = false; //是否在攻击\n\n    self.headerY = 0; //存头部给外面赋值，用于上下抬头\n    var header = null; //将骨骼绑给头部\n\n\n    //todo: 走路滑步校验\n    //内部运动模型参数\n    var footRate = DB.PlayerMeshFootRate; //跑步速度\n    var footAmplitude = 1; //跑动幅度\n    var footAngle = 0.9; //角度\n    var footCycle = 0; //周期\n\n\n    var bodyRate = footRate * 2; //跑步速度  越大越块\n    var bodyRunAmplitude = 0.1; //跑步时身体上下抖动幅度\n\n    var bodyIdleAmplitude = bodyRunAmplitude / 20; //静止时身体幅度\n\n    var bodyAngle = footAngle / 2; //角度\n    var bodyCycle = 0; //周期\n\n    var armAmplitude = 0.05; //无武器时手摆动幅度\n\n    var bones = model.children || []; //存所有骨头\n    // console.log('self bone', bones);\n\n    // self.helper = null;\n    // if(DEBUG){\n    //   self.helper = new THREE.SkeletonHelper( self );\n    //   self.helper.material.linewidth = 10;\n    //   scene.add( self.helper );\n    // }\n\n\n    self.setControl = function (data) {\n      //接收输入信息\n      console.log('获取到输入信息', data);\n\n      //静止\n      if (!data.moveForward && !data.moveBackward && !data.left && !data.right) {\n        self.status = 0;\n        return;\n      }\n      //跑动状态\n      // else if(data.moveForward || data.moveBackward || data.moveLeft || data.moveRight){\n      self.status = 1;\n      // }\n\n      //判断下半身朝向\n      var val = 0;\n      if (data.moveForward && data.left) val = 0.25; //左上\n      else if (data.moveForward && data.right) val = -0.25; //右上\n        else if (data.moveBackward && data.left) val = -0.25; //左下\n          else if (data.moveBackward && data.right) val = 0.25; //左下\n\n            else if (data.moveForward) val = 0; //上\n\n              else if (data.right) val = -0.45; //右走\n\n                else if (data.left) val = 0.45;else if (data.moveBackward) val = 0; //后退\n\n      self.direction = Math.PI * val; // 180 * val 得到下半身转向\n    };\n\n    //击中所有方法\n\n    //初始化模型位置\n    self.setPose = function () {\n\n      //降低高度\n      // self.position.y = -6\n\n      var bone = void 0;\n      for (var i in bones) {\n        bone = bones[i];\n        bone.applyMatrix(new THREE.Matrix4().makeScale(2, 2, 2));\n        if (bone.name === 'mainBone') {\n          //上半身\n          // console.log('headBone', bone.children[0].name, i)\n          header = bone.children[0];\n          // PlayerMesh.topMove(bone.children);\n          // var leftArm = bone.children[1]; //左手位置调整\n          // leftArm.position.z -= 2;\n          // leftArm.applyMatrix(new THREE.Matrix4().makeTranslation(0,0,4));\n        } else if (bone.name === 'downBone') {//下半身\n          // bone.position.y = 0;  //设置一个高度，防止开始后下半身不见\n          // var leftLeg = (bone.children[1]);\n          // leftLeg.position.y -= 1;\n          // leftLeg.position.x += 1;\n        }\n      }\n    };\n\n    //所有动作控制动作\n    self.animate = function () {\n      self.emissiveUpdate(); //发光颜色改变\n      // if(self.EffectAnimate){  //运行特效\n      //   self.EffectAnimate()\n      // }\n      // console.log('运行动作', self.status, footRate, option.footRate)\n      if (!DB.isWX) {\n        footRate = DB.PlayerMeshFootRate; //响应参数变化\n      }\n\n      if (bones.length <= 0) return;\n\n      //控制头部玉栋\n      if (header) {\n        // self.header.rotation.x += (self.headerY - self.header.rotation.x) * 0.05\n        header.rotation.x = self.headerY;\n      }\n\n      bodyCycle = Math.cos(bodyAngle); //身体循环 比脚短一半\n      footCycle = Math.cos(footAngle);\n\n      if (self.status === 0) {\n        //静止\n        self.idle();\n      } else if (self.status === 1) {\n        //跑动\n        // console.log('run')\n        self.run();\n      }\n\n      // self.downMove2(bones[2], bones[3]);\n      bodyAngle += bodyRate; //角度+频率\n      footAngle += footRate; //角度+频率\n    };\n\n    //静止动作\n    self.idle = function () {\n      var bone;\n      for (var i in bones) {\n        bone = bones[i];\n\n        if (bone.name === 'mainBone') {\n          //上半身\n          //用腿部周期 乘静止时身体幅度\n          // console.log('格式',bone.position.y, footCycle * bodyIdleAmplitude)\n          bone.position.y += footCycle * bodyIdleAmplitude;\n          //静止时上半身攻击 不攻击动作重置\n          if (self.isAttack) {\n            self.topAttack(bone.children);\n            return;\n          }\n          //不攻击的情况\n          if (self.weaponType === 2) {\n            self.PistolPose(bone.children); //手枪动作\n            return;\n          }\n          if (self.weaponType === 3) {\n            self.MachineGunPose(bone.children); //冲锋枪动作\n            return;\n          }\n\n          //空手和拿刀的情况就重置动作\n          self.resetTop(bone.children);\n        } else if (bone.name === 'downBone') {\n          //下半身动作重置\n          var leg = bone.children;\n          //腿部动作重置，静止\n          if (leg[0].rotation.x != 0 || leg[1].rotation.x != 0) {\n            leg[0].rotation.x = 0;\n            leg[1].rotation.x = 0;\n          }\n        }\n      } //for\n    };\n\n    //上半身动作重置\n    self.resetTop = function (bones) {\n      // bones[0].rotation.x = self.headerY\n      //不攻击时动作重置\n      // bones[0].rotation.y = bones[0].rotation.z = 0;\n      // console.log('上半身动作重置',bones)\n      if (bones[1].rotation.x !== 0 || bones[1].rotation.z !== 0) {\n        bones[1].rotation.x = bones[1].rotation.y = bones[1].rotation.z = 0;\n      }\n      if (bones[2].rotation.x !== 0 || bones[2].rotation.z !== 0) {\n        bones[2].rotation.x = bones[2].rotation.y = bones[2].rotation.z = 0;\n      }\n    };\n\n    //跑动状态  根据武器类型来判断上半身\n    self.run = function () {\n      var bone;\n      for (var i in bones) {\n        bone = bones[i];\n        bone.position.y = bodyCycle * bodyRunAmplitude; //全身根据跑步动作起伏\n\n        if (bone.name === 'mainBone') {\n          //上半身\n          // self.isAttack ? self.topRun(bone) : self.resetTop(bone.children)\n          self.topRun(bone);\n        } else if (bone.name === 'downBone') {\n          //下半身\n          self.downRun(bone);\n        }\n      } //for\n    };\n\n    //上半身 跑步时 行动\n    self.topRun = function (mainBone) {\n      // mainBone.rotation.y = self.direction; //上半身同样转动\n      //上半身根据输入转动方向\n      if (mainBone.rotation.y !== self.direction) {\n        var isDir = mainBone.rotation.y - self.direction / 2;\n        if (Math.abs(isDir) > 0.05) {\n          var d = isDir > 0 ? -1 : 1;\n          mainBone.rotation.y += d * 0.05;\n        }\n        // console.log('转动方向', isDir)\n      }\n\n      var bone = mainBone.children;\n      if (bone.length <= 0) return;\n      //分开攻击还是不攻击的情况\n      self.isAttack ? self.topAttack(bone) : self.topNotAttack(bone);\n    };\n\n    //攻击的情况\n    self.topAttack = function (hands) {\n      //空手的情况\n      if (self.weaponType === 0) return;\n      //单手武器  需要砍的情况\n      else if (self.weaponType === 1) {\n          var la = bodyCycle * armAmplitude * 6; //手摆动幅度\n          // if(Math.random() > 0.5) { //type 2 attack\n          hands[1].rotation.x = -la;\n          hands[1].rotation.z = la / 2;\n          //     return\n          // }\n          // hands[1].rotation.x = 0.05\n          // hands[1].rotation.y = -0.15\n          // hands[1].rotation.z = la\n\n          //单手武器需要射击的情况\n        } else if (self.weaponType === 2) {\n          self.PistolPose(hands);\n          // console.log('位置', hands[1].position.x)\n\n          //双手武器需要射击\n        } else if (self.weaponType === 3) {\n          self.MachineGunPose(hands);\n        }\n    };\n\n    //没攻击的情况\n    self.topNotAttack = function (hands) {\n      //空手的情况\n      if (self.weaponType === 0) {\n        var la = footCycle * armAmplitude; //手摆动幅度\n        hands[1].rotation.x = -la; //右手\n        hands[2].rotation.x = la; //左手\n\n        //用刀等单手武器的情况\n      } else if (self.weaponType === 1) {\n        var la = footCycle * armAmplitude * 4; //手摆动幅度\n        hands[1].rotation.x = -la / 4; //右手持刀幅度变慢\n        hands[2].rotation.x = la;\n\n        //单手持枪的情况\n      } else if (self.weaponType === 2) {\n        self.PistolPose(hands);\n\n        //双手武器\n      } else if (self.weaponType === 3) {\n        self.MachineGunPose(hands);\n      }\n    };\n\n    //握手枪的姿势\n    self.PistolPose = function (hands) {\n      // hands[1].rotation.z = 0\n      // hands[1].position.x = -1.06658\n      hands[1].rotation.x = halfPI; //右手\n      hands[1].rotation.z = -halfPI * 0.25;\n\n      hands[1].position.x = 1.4;\n      // hands[1].position.y = 0.3\n      // hands[1].position.z = 1.6\n    };\n\n    //冲锋枪双手的姿势\n    self.MachineGunPose = function (hands) {\n      hands[1].rotation.x = halfPI * 0.8; //右手\n      // hands[1].rotation.y = halfPI / 2  //右手\n      hands[1].rotation.z = -halfPI * 0.75;\n\n      hands[1].position.x = 1.4;\n      // hands[1].position.y = 0.3\n      // hands[1].position.z = -0.6\n\n\n      hands[2].rotation.x = halfPI; //左手\n      hands[2].rotation.z = halfPI * 0.5;\n\n      hands[2].position.x = -1.4;\n      // hands[2].position.y = 0\n      // hands[2].position.z = 1.5\n    };\n\n    //下半身 跑步时 行动\n    self.downRun = function (downBone) {\n\n      //下半身根据输入转动方向\n      if (downBone.rotation.y !== self.direction) {\n        var isDir = downBone.rotation.y - self.direction;\n        if (Math.abs(isDir) > 0.05) {\n          var d = isDir > 0 ? -1 : 1;\n          downBone.rotation.y += d * 0.05;\n        }\n      }\n\n      var bone = downBone.children;\n      if (bone.length <= 0) return;\n\n      // 每根头发将周期性的基础上原始大小的75%至100%之间作调整。\n      // h.scale.y = .75 + Math.cos(this.angleHairs+i/3)*.25;\n      var RightLang = footCycle * footAmplitude; //每次步伐距离\n\n      // bone[0].position.x = RightLang;\n      // bone[1].position.x = -RightLang;\n      bone[0].rotation.x = RightLang;\n      bone[1].rotation.x = -RightLang;\n    };\n\n    //模型贴图颜色改变\n    self.emissive = function () {\n      console.log('自己模型', self.material);\n      self.material[0].emissive.setHex(0xff3300);\n    };\n    //每帧衰减\n    var color = void 0;\n    self.emissiveUpdate = function () {\n      if (!self.material || self.material.length <= 0) return;\n      color = self.material[0].emissive.getHex();\n      color = THREE.Math.lerp(color, 0x000000, DB.lerpVal * 5);\n      self.material[0].emissive.setHex(color);\n    };\n\n    self.setPose(); //初始化模型\n    return self;\n  };\n\n  module.exports = PlayerMesh;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY2xpZW50L1JvY2tSdW4vUGxheWVyTWVzaC5qcz8yOWMwIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBEQiA9IHJlcXVpcmUoJy4vZGF0YWJ1cycpXG5cblxuLy/mqKHlnotcbmNvbnN0IFBsYXllck1lc2ggPSBmdW5jdGlvbiAobW9kZWwpIHtcbiAgaWYoIShtb2RlbCBpbnN0YW5jZW9mIFRIUkVFLlNraW5uZWRNZXNoKSl7XG4gICAgY29uc29sZS5lcnJvcignUGxheWVyTWVzaCBUeXBlIGVycm9yJywgbW9kZWwudHlwZSk7XG4gIH1cbiAgaWYoIW1vZGVsLmNoaWxkcmVuIHx8IG1vZGVsLmNoaWxkcmVuLmxlbmd0aCA8IDApe1xuICAgIGNvbnNvbGUuZXJyb3IoJ1BsYXllck1lc2ggY2hpbGRyZW4gZXJyb3InLCBtb2RlbC5jaGlsZHJlbik7XG4gIH1cblxuICBsZXQgc2VsZiA9IG1vZGVsO1xuXG4gIC8vIHNlbGYgPSBuZXcgUGxheWVyRWZmZWN0KCBzZWxmICkgLy/lr7zlhaXnibnmlYhcblxuXG4gIHNlbGYuc3RhdHVzID0gMTsgLy/lvZPliY3nirbmgIEgMOmdmeatoiAx6LeR5YqoXG4gIHNlbGYuZGlyZWN0aW9uID0gMDsgLy/mjqfliLbovpPlhaXnmoTmnJ3lkJEgIOS4i+WNiui6q+i9rOWQkVxuICBzZWxmLndlYXBvblR5cGUgPSAxOyAvL+atpuWZqOexu+WeiyAw56m65omLIDHliIDvvIwgMuaJi+aequ+8jCAz77yM6ZW/5p6qXG4gIHNlbGYuaXNBdHRhY2sgPSBmYWxzZTsgLy/mmK/lkKblnKjmlLvlh7tcblxuICBzZWxmLmhlYWRlclkgPSAwIC8v5a2Y5aS06YOo57uZ5aSW6Z2i6LWL5YC877yM55So5LqO5LiK5LiL5oqs5aS0XG4gIGxldCBoZWFkZXIgPSBudWxsICAvL+WwhumqqOmqvOe7kee7meWktOmDqFxuXG5cbi8vdG9kbzog6LWw6Lev5ruR5q2l5qCh6aqMXG4gIC8v5YaF6YOo6L+Q5Yqo5qih5Z6L5Y+C5pWwXG4gIGxldCBmb290UmF0ZSA9IERCLlBsYXllck1lc2hGb290UmF0ZTsgLy/ot5HmraXpgJ/luqZcbiAgY29uc3QgZm9vdEFtcGxpdHVkZSA9IDE7IC8v6LeR5Yqo5bmF5bqmXG4gIGxldCBmb290QW5nbGUgPSAwLjk7IC8v6KeS5bqmXG4gIGxldCBmb290Q3ljbGUgPSAwOyAvL+WRqOacn1xuXG5cblxuICBsZXQgYm9keVJhdGUgPSBmb290UmF0ZSAqIDI7IC8v6LeR5q2l6YCf5bqmICDotorlpKfotorlnZdcbiAgbGV0IGJvZHlSdW5BbXBsaXR1ZGUgPSAwLjE7IC8v6LeR5q2l5pe26Lqr5L2T5LiK5LiL5oqW5Yqo5bmF5bqmXG5cbiAgbGV0IGJvZHlJZGxlQW1wbGl0dWRlID0gYm9keVJ1bkFtcGxpdHVkZSAvIDIwICAvL+mdmeatouaXtui6q+S9k+W5heW6plxuXG4gIGxldCBib2R5QW5nbGUgPSBmb290QW5nbGUgLyAyOyAvL+inkuW6plxuICBsZXQgYm9keUN5Y2xlID0gMDsgLy/lkajmnJ9cblxuICBsZXQgYXJtQW1wbGl0dWRlID0gMC4wNTsgLy/ml6Dmrablmajml7bmiYvmkYbliqjluYXluqZcblxuICBsZXQgYm9uZXMgPSBtb2RlbC5jaGlsZHJlbiB8fCBbXTsgLy/lrZjmiYDmnInpqqjlpLRcbiAgLy8gY29uc29sZS5sb2coJ3NlbGYgYm9uZScsIGJvbmVzKTtcblxuICAvLyBzZWxmLmhlbHBlciA9IG51bGw7XG4gIC8vIGlmKERFQlVHKXtcbiAgLy8gICBzZWxmLmhlbHBlciA9IG5ldyBUSFJFRS5Ta2VsZXRvbkhlbHBlciggc2VsZiApO1xuICAvLyAgIHNlbGYuaGVscGVyLm1hdGVyaWFsLmxpbmV3aWR0aCA9IDEwO1xuICAvLyAgIHNjZW5lLmFkZCggc2VsZi5oZWxwZXIgKTtcbiAgLy8gfVxuXG5cbiAgc2VsZi5zZXRDb250cm9sID0gZnVuY3Rpb24gKGRhdGEpIHsgLy/mjqXmlLbovpPlhaXkv6Hmga9cbiAgICBjb25zb2xlLmxvZygn6I635Y+W5Yiw6L6T5YWl5L+h5oGvJywgZGF0YSlcblxuICAgIC8v6Z2Z5q2iXG4gICAgaWYoIWRhdGEubW92ZUZvcndhcmQgJiYgIWRhdGEubW92ZUJhY2t3YXJkICYmICFkYXRhLmxlZnQgJiYgIWRhdGEucmlnaHQpe1xuICAgICAgc2VsZi5zdGF0dXMgPSAwO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvL+i3keWKqOeKtuaAgVxuICAgIC8vIGVsc2UgaWYoZGF0YS5tb3ZlRm9yd2FyZCB8fCBkYXRhLm1vdmVCYWNrd2FyZCB8fCBkYXRhLm1vdmVMZWZ0IHx8IGRhdGEubW92ZVJpZ2h0KXtcbiAgICBzZWxmLnN0YXR1cyA9IDE7XG4gICAgLy8gfVxuXG4gICAgLy/liKTmlq3kuIvljYrouqvmnJ3lkJFcbiAgICB2YXIgdmFsID0gMDtcbiAgICBpZihkYXRhLm1vdmVGb3J3YXJkICYmIGRhdGEubGVmdCkgdmFsID0gMC4yNSAvL+W3puS4ilxuICAgIGVsc2UgaWYoZGF0YS5tb3ZlRm9yd2FyZCAmJiBkYXRhLnJpZ2h0KSB2YWwgPSAtMC4yNSAvL+WPs+S4ilxuICAgIGVsc2UgaWYoZGF0YS5tb3ZlQmFja3dhcmQgJiYgZGF0YS5sZWZ0KSB2YWwgPSAtMC4yNSAvL+W3puS4i1xuICAgIGVsc2UgaWYoZGF0YS5tb3ZlQmFja3dhcmQgJiYgZGF0YS5yaWdodCkgdmFsID0gMC4yNSAvL+W3puS4i1xuXG4gICAgZWxzZSBpZihkYXRhLm1vdmVGb3J3YXJkKSB2YWwgPSAwOyAvL+S4ilxuXG4gICAgZWxzZSBpZihkYXRhLnJpZ2h0KSB2YWwgPSAtMC40NTsgLy/lj7PotbBcblxuICAgIGVsc2UgaWYoZGF0YS5sZWZ0KSB2YWwgPSAwLjQ1O1xuXG4gICAgZWxzZSBpZihkYXRhLm1vdmVCYWNrd2FyZCkgdmFsID0gMDsgLy/lkI7pgIBcblxuICAgIHNlbGYuZGlyZWN0aW9uID0gIE1hdGguUEkgKiB2YWw7ICAvLyAxODAgKiB2YWwg5b6X5Yiw5LiL5Y2K6Lqr6L2s5ZCRXG4gIH1cblxuXG5cblxuXG4vL+WHu+S4reaJgOacieaWueazlVxuXG4gIC8v5Yid5aeL5YyW5qih5Z6L5L2N572uXG4gIHNlbGYuc2V0UG9zZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgIC8v6ZmN5L2O6auY5bqmXG4gICAgLy8gc2VsZi5wb3NpdGlvbi55ID0gLTZcblxuICAgIGxldCBib25lXG4gICAgZm9yKGxldCBpIGluIGJvbmVzKXtcbiAgICAgIGJvbmUgPSBib25lc1tpXTtcbiAgICAgIGJvbmUuYXBwbHlNYXRyaXgobmV3IFRIUkVFLk1hdHJpeDQoKS5tYWtlU2NhbGUoMiwgMiwgMikpO1xuICAgICAgaWYoYm9uZS5uYW1lID09PSAnbWFpbkJvbmUnKXsgLy/kuIrljYrouqtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2hlYWRCb25lJywgYm9uZS5jaGlsZHJlblswXS5uYW1lLCBpKVxuICAgICAgICBoZWFkZXIgPSBib25lLmNoaWxkcmVuWzBdXG4gICAgICAgIC8vIFBsYXllck1lc2gudG9wTW92ZShib25lLmNoaWxkcmVuKTtcbiAgICAgICAgLy8gdmFyIGxlZnRBcm0gPSBib25lLmNoaWxkcmVuWzFdOyAvL+W3puaJi+S9jee9ruiwg+aVtFxuICAgICAgICAvLyBsZWZ0QXJtLnBvc2l0aW9uLnogLT0gMjtcbiAgICAgICAgLy8gbGVmdEFybS5hcHBseU1hdHJpeChuZXcgVEhSRUUuTWF0cml4NCgpLm1ha2VUcmFuc2xhdGlvbigwLDAsNCkpO1xuICAgICAgfSBlbHNlIGlmKGJvbmUubmFtZSA9PT0gJ2Rvd25Cb25lJyl7IC8v5LiL5Y2K6LqrXG4gICAgICAgIC8vIGJvbmUucG9zaXRpb24ueSA9IDA7ICAvL+iuvue9ruS4gOS4qumrmOW6pu+8jOmYsuatouW8gOWni+WQjuS4i+WNiui6q+S4jeingVxuICAgICAgICAvLyB2YXIgbGVmdExlZyA9IChib25lLmNoaWxkcmVuWzFdKTtcbiAgICAgICAgLy8gbGVmdExlZy5wb3NpdGlvbi55IC09IDE7XG4gICAgICAgIC8vIGxlZnRMZWcucG9zaXRpb24ueCArPSAxO1xuICAgICAgfVxuICAgIH1cblxuICB9XG5cblxuXG4gIC8v5omA5pyJ5Yqo5L2c5o6n5Yi25Yqo5L2cXG4gIHNlbGYuYW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBzZWxmLmVtaXNzaXZlVXBkYXRlKCkgIC8v5Y+R5YWJ6aKc6Imy5pS55Y+YXG4gICAgLy8gaWYoc2VsZi5FZmZlY3RBbmltYXRlKXsgIC8v6L+Q6KGM54m55pWIXG4gICAgLy8gICBzZWxmLkVmZmVjdEFuaW1hdGUoKVxuICAgIC8vIH1cbiAgICAvLyBjb25zb2xlLmxvZygn6L+Q6KGM5Yqo5L2cJywgc2VsZi5zdGF0dXMsIGZvb3RSYXRlLCBvcHRpb24uZm9vdFJhdGUpXG4gICAgaWYoIURCLmlzV1gpe1xuICAgICAgZm9vdFJhdGUgPSBEQi5QbGF5ZXJNZXNoRm9vdFJhdGUgIC8v5ZON5bqU5Y+C5pWw5Y+Y5YyWXG4gICAgfVxuXG4gICAgaWYoYm9uZXMubGVuZ3RoIDw9IDApIHJldHVybjtcblxuICAgIC8v5o6n5Yi25aS06YOo546J5qCLXG4gICAgaWYoaGVhZGVyKXtcbiAgICAgIC8vIHNlbGYuaGVhZGVyLnJvdGF0aW9uLnggKz0gKHNlbGYuaGVhZGVyWSAtIHNlbGYuaGVhZGVyLnJvdGF0aW9uLngpICogMC4wNVxuICAgICAgaGVhZGVyLnJvdGF0aW9uLnggPSBzZWxmLmhlYWRlcllcbiAgICB9XG5cbiAgICBib2R5Q3ljbGUgPSBNYXRoLmNvcyhib2R5QW5nbGUpOyAvL+i6q+S9k+W+queOryDmr5TohJrnn63kuIDljYpcbiAgICBmb290Q3ljbGUgPSBNYXRoLmNvcyhmb290QW5nbGUpO1xuXG4gICAgaWYoc2VsZi5zdGF0dXMgPT09IDApeyAvL+mdmeatolxuICAgICAgc2VsZi5pZGxlKCk7XG4gICAgfWVsc2UgaWYoc2VsZi5zdGF0dXMgPT09IDEpeyAvL+i3keWKqFxuICAgICAgLy8gY29uc29sZS5sb2coJ3J1bicpXG4gICAgICBzZWxmLnJ1bigpO1xuICAgIH1cblxuICAgIC8vIHNlbGYuZG93bk1vdmUyKGJvbmVzWzJdLCBib25lc1szXSk7XG4gICAgYm9keUFuZ2xlICs9IGJvZHlSYXRlOyAvL+inkuW6pivpopHnjodcbiAgICBmb290QW5nbGUgKz0gZm9vdFJhdGU7IC8v6KeS5bqmK+mikeeOh1xuICB9XG5cblxuXG5cblxuICAvL+mdmeatouWKqOS9nFxuICBzZWxmLmlkbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJvbmU7XG4gICAgZm9yKHZhciBpIGluIGJvbmVzKSB7XG4gICAgICBib25lID0gYm9uZXNbaV07XG5cbiAgICAgIGlmKGJvbmUubmFtZSA9PT0gJ21haW5Cb25lJykgeyAvL+S4iuWNiui6q1xuICAgICAgICAvL+eUqOiFv+mDqOWRqOacnyDkuZjpnZnmraLml7bouqvkvZPluYXluqZcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ+agvOW8jycsYm9uZS5wb3NpdGlvbi55LCBmb290Q3ljbGUgKiBib2R5SWRsZUFtcGxpdHVkZSlcbiAgICAgICAgYm9uZS5wb3NpdGlvbi55ICs9IGZvb3RDeWNsZSAqIGJvZHlJZGxlQW1wbGl0dWRlO1xuICAgICAgICAvL+mdmeatouaXtuS4iuWNiui6q+aUu+WHuyDkuI3mlLvlh7vliqjkvZzph43nva5cbiAgICAgICAgaWYoc2VsZi5pc0F0dGFjayl7XG4gICAgICAgICAgc2VsZi50b3BBdHRhY2soYm9uZS5jaGlsZHJlbilcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICAvL+S4jeaUu+WHu+eahOaDheWGtVxuICAgICAgICBpZihzZWxmLndlYXBvblR5cGUgPT09IDIpe1xuICAgICAgICAgIHNlbGYuUGlzdG9sUG9zZShib25lLmNoaWxkcmVuKSAgLy/miYvmnqrliqjkvZxcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBpZihzZWxmLndlYXBvblR5cGUgPT09IDMpe1xuICAgICAgICAgIHNlbGYuTWFjaGluZUd1blBvc2UoYm9uZS5jaGlsZHJlbikgLy/lhrLplIvmnqrliqjkvZxcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIC8v56m65omL5ZKM5ou/5YiA55qE5oOF5Ya15bCx6YeN572u5Yqo5L2cXG4gICAgICAgIHNlbGYucmVzZXRUb3AoYm9uZS5jaGlsZHJlbilcblxuICAgICAgfWVsc2UgaWYgKGJvbmUubmFtZSA9PT0gJ2Rvd25Cb25lJykgeyAvL+S4i+WNiui6q+WKqOS9nOmHjee9rlxuICAgICAgICB2YXIgbGVnID0gKGJvbmUuY2hpbGRyZW4pO1xuICAgICAgICAvL+iFv+mDqOWKqOS9nOmHjee9ru+8jOmdmeatolxuICAgICAgICBpZihsZWdbMF0ucm90YXRpb24ueCAhPSAwIHx8IGxlZ1sxXS5yb3RhdGlvbi54ICE9IDApIHtcbiAgICAgICAgICBsZWdbMF0ucm90YXRpb24ueCA9IDA7XG4gICAgICAgICAgbGVnWzFdLnJvdGF0aW9uLnggPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfS8vZm9yXG4gIH1cblxuXG4gIC8v5LiK5Y2K6Lqr5Yqo5L2c6YeN572uXG4gIHNlbGYucmVzZXRUb3AgPSBmdW5jdGlvbiAoYm9uZXMpIHtcbiAgICAvLyBib25lc1swXS5yb3RhdGlvbi54ID0gc2VsZi5oZWFkZXJZXG4gICAgLy/kuI3mlLvlh7vml7bliqjkvZzph43nva5cbiAgICAvLyBib25lc1swXS5yb3RhdGlvbi55ID0gYm9uZXNbMF0ucm90YXRpb24ueiA9IDA7XG4gICAgLy8gY29uc29sZS5sb2coJ+S4iuWNiui6q+WKqOS9nOmHjee9ricsYm9uZXMpXG4gICAgaWYoYm9uZXNbMV0ucm90YXRpb24ueCAhPT0gMCB8fCBib25lc1sxXS5yb3RhdGlvbi56ICE9PSAwKXtcbiAgICAgIGJvbmVzWzFdLnJvdGF0aW9uLnggPSBib25lc1sxXS5yb3RhdGlvbi55ID0gYm9uZXNbMV0ucm90YXRpb24ueiA9IDA7XG4gICAgfVxuICAgIGlmKGJvbmVzWzJdLnJvdGF0aW9uLnggIT09IDAgfHwgYm9uZXNbMl0ucm90YXRpb24ueiAhPT0gMCkge1xuICAgICAgYm9uZXNbMl0ucm90YXRpb24ueCA9IGJvbmVzWzJdLnJvdGF0aW9uLnkgPSBib25lc1syXS5yb3RhdGlvbi56ID0gMDtcbiAgICB9XG4gIH1cblxuICAvL+i3keWKqOeKtuaAgSAg5qC55o2u5q2m5Zmo57G75Z6L5p2l5Yik5pat5LiK5Y2K6LqrXG4gIHNlbGYucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBib25lO1xuICAgIGZvcih2YXIgaSBpbiBib25lcyl7XG4gICAgICBib25lID0gYm9uZXNbaV07XG4gICAgICBib25lLnBvc2l0aW9uLnkgPSBib2R5Q3ljbGUgKiBib2R5UnVuQW1wbGl0dWRlOyAvL+WFqOi6q+agueaNrui3keatpeWKqOS9nOi1t+S8j1xuXG4gICAgICBpZihib25lLm5hbWUgPT09ICdtYWluQm9uZScpeyAvL+S4iuWNiui6q1xuICAgICAgICAvLyBzZWxmLmlzQXR0YWNrID8gc2VsZi50b3BSdW4oYm9uZSkgOiBzZWxmLnJlc2V0VG9wKGJvbmUuY2hpbGRyZW4pXG4gICAgICAgIHNlbGYudG9wUnVuKGJvbmUpXG5cbiAgICAgIH0gZWxzZSBpZihib25lLm5hbWUgPT09ICdkb3duQm9uZScpeyAvL+S4i+WNiui6q1xuICAgICAgICBzZWxmLmRvd25SdW4oYm9uZSk7XG4gICAgICB9XG4gICAgfSAvL2ZvclxuICB9XG5cblxuXG4gIC8v5LiK5Y2K6LqrIOi3keatpeaXtiDooYzliqhcbiAgc2VsZi50b3BSdW4gPSBmdW5jdGlvbiAobWFpbkJvbmUpIHtcbiAgICAvLyBtYWluQm9uZS5yb3RhdGlvbi55ID0gc2VsZi5kaXJlY3Rpb247IC8v5LiK5Y2K6Lqr5ZCM5qC36L2s5YqoXG4gICAgLy/kuIrljYrouqvmoLnmja7ovpPlhaXovazliqjmlrnlkJFcbiAgICBpZihtYWluQm9uZS5yb3RhdGlvbi55ICE9PSBzZWxmLmRpcmVjdGlvbikge1xuICAgICAgdmFyIGlzRGlyID0gbWFpbkJvbmUucm90YXRpb24ueSAtIChzZWxmLmRpcmVjdGlvbi8yKVxuICAgICAgaWYgKE1hdGguYWJzKGlzRGlyKSA+IDAuMDUpe1xuICAgICAgICB2YXIgZCA9IGlzRGlyID4gMCA/IC0xIDogMTtcbiAgICAgICAgbWFpbkJvbmUucm90YXRpb24ueSArPSAoZCAqIDAuMDUpO1xuICAgICAgfVxuICAgICAgLy8gY29uc29sZS5sb2coJ+i9rOWKqOaWueWQkScsIGlzRGlyKVxuICAgIH1cblxuXG4gICAgdmFyIGJvbmUgPSBtYWluQm9uZS5jaGlsZHJlbjtcbiAgICBpZihib25lLmxlbmd0aCA8PSAwKSByZXR1cm47XG4gICAgLy/liIblvIDmlLvlh7vov5jmmK/kuI3mlLvlh7vnmoTmg4XlhrVcbiAgICBzZWxmLmlzQXR0YWNrID8gc2VsZi50b3BBdHRhY2soYm9uZSkgOiBzZWxmLnRvcE5vdEF0dGFjayhib25lKTtcblxuICB9XG5cbiAgLy/mlLvlh7vnmoTmg4XlhrVcbiAgc2VsZi50b3BBdHRhY2sgPSBmdW5jdGlvbihoYW5kcyl7XG4gICAgLy/nqbrmiYvnmoTmg4XlhrVcbiAgICBpZihzZWxmLndlYXBvblR5cGUgPT09IDApIHJldHVybjtcbiAgICAvL+WNleaJi+atpuWZqCAg6ZyA6KaB56CN55qE5oOF5Ya1XG4gICAgZWxzZSBpZihzZWxmLndlYXBvblR5cGUgPT09IDEpe1xuICAgICAgdmFyIGxhID0gYm9keUN5Y2xlICogYXJtQW1wbGl0dWRlICogNjsgLy/miYvmkYbliqjluYXluqZcbiAgICAgIC8vIGlmKE1hdGgucmFuZG9tKCkgPiAwLjUpIHsgLy90eXBlIDIgYXR0YWNrXG4gICAgICBoYW5kc1sxXS5yb3RhdGlvbi54ID0gLWxhXG4gICAgICBoYW5kc1sxXS5yb3RhdGlvbi56ID0gbGEgLyAyXG4gICAgICAvLyAgICAgcmV0dXJuXG4gICAgICAvLyB9XG4gICAgICAvLyBoYW5kc1sxXS5yb3RhdGlvbi54ID0gMC4wNVxuICAgICAgLy8gaGFuZHNbMV0ucm90YXRpb24ueSA9IC0wLjE1XG4gICAgICAvLyBoYW5kc1sxXS5yb3RhdGlvbi56ID0gbGFcblxuICAgICAgLy/ljZXmiYvmrablmajpnIDopoHlsITlh7vnmoTmg4XlhrVcbiAgICB9ZWxzZSBpZihzZWxmLndlYXBvblR5cGUgPT09IDIpe1xuICAgICAgc2VsZi5QaXN0b2xQb3NlKGhhbmRzKVxuICAgICAgLy8gY29uc29sZS5sb2coJ+S9jee9ricsIGhhbmRzWzFdLnBvc2l0aW9uLngpXG5cbiAgICAgIC8v5Y+M5omL5q2m5Zmo6ZyA6KaB5bCE5Ye7XG4gICAgfWVsc2UgaWYoIHNlbGYud2VhcG9uVHlwZSA9PT0gMyl7XG4gICAgICBzZWxmLk1hY2hpbmVHdW5Qb3NlKGhhbmRzKVxuICAgIH1cbiAgfVxuXG4gIC8v5rKh5pS75Ye755qE5oOF5Ya1XG4gIHNlbGYudG9wTm90QXR0YWNrID0gZnVuY3Rpb24gKGhhbmRzKSB7XG4gICAgLy/nqbrmiYvnmoTmg4XlhrVcbiAgICBpZihzZWxmLndlYXBvblR5cGUgPT09IDApe1xuICAgICAgdmFyIGxhID0gZm9vdEN5Y2xlICogYXJtQW1wbGl0dWRlOyAvL+aJi+aRhuWKqOW5heW6plxuICAgICAgaGFuZHNbMV0ucm90YXRpb24ueCA9IC1sYSAvL+WPs+aJi1xuICAgICAgaGFuZHNbMl0ucm90YXRpb24ueCA9IGxhIC8v5bem5omLXG5cbiAgICAgIC8v55So5YiA562J5Y2V5omL5q2m5Zmo55qE5oOF5Ya1XG4gICAgfSBlbHNlIGlmKHNlbGYud2VhcG9uVHlwZSA9PT0gMSkge1xuICAgICAgdmFyIGxhID0gZm9vdEN5Y2xlICogYXJtQW1wbGl0dWRlICogNDsgLy/miYvmkYbliqjluYXluqZcbiAgICAgIGhhbmRzWzFdLnJvdGF0aW9uLnggPSAtbGEgLyA0IC8v5Y+z5omL5oyB5YiA5bmF5bqm5Y+Y5oWiXG4gICAgICBoYW5kc1syXS5yb3RhdGlvbi54ID0gbGFcblxuICAgICAgLy/ljZXmiYvmjIHmnqrnmoTmg4XlhrVcbiAgICB9ZWxzZSBpZihzZWxmLndlYXBvblR5cGUgPT09IDIpe1xuICAgICAgc2VsZi5QaXN0b2xQb3NlKGhhbmRzKVxuXG5cbiAgICAgIC8v5Y+M5omL5q2m5ZmoXG4gICAgfWVsc2UgaWYoc2VsZi53ZWFwb25UeXBlID09PSAzKXtcbiAgICAgIHNlbGYuTWFjaGluZUd1blBvc2UoaGFuZHMpXG4gICAgfVxuICB9XG5cbiAgLy/mj6HmiYvmnqrnmoTlp7/lir9cbiAgc2VsZi5QaXN0b2xQb3NlID0gZnVuY3Rpb24gKGhhbmRzKSB7XG4gICAgLy8gaGFuZHNbMV0ucm90YXRpb24ueiA9IDBcbiAgICAvLyBoYW5kc1sxXS5wb3NpdGlvbi54ID0gLTEuMDY2NThcbiAgICBoYW5kc1sxXS5yb3RhdGlvbi54ID0gaGFsZlBJICAvL+WPs+aJi1xuICAgIGhhbmRzWzFdLnJvdGF0aW9uLnogPSAtaGFsZlBJICogMC4yNVxuXG4gICAgaGFuZHNbMV0ucG9zaXRpb24ueCA9IDEuNFxuICAgIC8vIGhhbmRzWzFdLnBvc2l0aW9uLnkgPSAwLjNcbiAgICAvLyBoYW5kc1sxXS5wb3NpdGlvbi56ID0gMS42XG5cbiAgfVxuXG4gIC8v5Yay6ZSL5p6q5Y+M5omL55qE5ae/5Yq/XG4gIHNlbGYuTWFjaGluZUd1blBvc2UgPSBmdW5jdGlvbiAoaGFuZHMpIHtcbiAgICBoYW5kc1sxXS5yb3RhdGlvbi54ID0gaGFsZlBJICogMC44IC8v5Y+z5omLXG4gICAgLy8gaGFuZHNbMV0ucm90YXRpb24ueSA9IGhhbGZQSSAvIDIgIC8v5Y+z5omLXG4gICAgaGFuZHNbMV0ucm90YXRpb24ueiA9IC1oYWxmUEkgKiAwLjc1XG5cbiAgICBoYW5kc1sxXS5wb3NpdGlvbi54ID0gMS40XG4gICAgLy8gaGFuZHNbMV0ucG9zaXRpb24ueSA9IDAuM1xuICAgIC8vIGhhbmRzWzFdLnBvc2l0aW9uLnogPSAtMC42XG5cblxuXG4gICAgaGFuZHNbMl0ucm90YXRpb24ueCA9IGhhbGZQSSAgLy/lt6bmiYtcbiAgICBoYW5kc1syXS5yb3RhdGlvbi56ID0gaGFsZlBJICogMC41XG5cbiAgICBoYW5kc1syXS5wb3NpdGlvbi54ID0gLTEuNFxuICAgIC8vIGhhbmRzWzJdLnBvc2l0aW9uLnkgPSAwXG4gICAgLy8gaGFuZHNbMl0ucG9zaXRpb24ueiA9IDEuNVxuICB9XG5cblxuICAvL+S4i+WNiui6qyDot5HmraXml7Yg6KGM5YqoXG4gIHNlbGYuZG93blJ1biA9IGZ1bmN0aW9uIChkb3duQm9uZSkge1xuXG4gICAgLy/kuIvljYrouqvmoLnmja7ovpPlhaXovazliqjmlrnlkJFcbiAgICBpZihkb3duQm9uZS5yb3RhdGlvbi55ICE9PSBzZWxmLmRpcmVjdGlvbikge1xuICAgICAgdmFyIGlzRGlyID0gZG93bkJvbmUucm90YXRpb24ueSAtIChzZWxmLmRpcmVjdGlvbilcbiAgICAgIGlmIChNYXRoLmFicyhpc0RpcikgPiAwLjA1KSB7XG4gICAgICAgIHZhciBkID0gaXNEaXIgPiAwID8gLTEgOiAxO1xuICAgICAgICBkb3duQm9uZS5yb3RhdGlvbi55ICs9IChkICogMC4wNSk7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICB2YXIgYm9uZSA9IGRvd25Cb25lLmNoaWxkcmVuO1xuICAgIGlmKGJvbmUubGVuZ3RoIDw9IDApIHJldHVybjtcblxuXG4gICAgLy8g5q+P5qC55aS05Y+R5bCG5ZGo5pyf5oCn55qE5Z+656GA5LiK5Y6f5aeL5aSn5bCP55qENzUl6IezMTAwJeS5i+mXtOS9nOiwg+aVtOOAglxuICAgIC8vIGguc2NhbGUueSA9IC43NSArIE1hdGguY29zKHRoaXMuYW5nbGVIYWlycytpLzMpKi4yNTtcbiAgICB2YXIgUmlnaHRMYW5nID0gZm9vdEN5Y2xlICogZm9vdEFtcGxpdHVkZTsgLy/mr4/mrKHmraXkvJDot53nprtcblxuICAgIC8vIGJvbmVbMF0ucG9zaXRpb24ueCA9IFJpZ2h0TGFuZztcbiAgICAvLyBib25lWzFdLnBvc2l0aW9uLnggPSAtUmlnaHRMYW5nO1xuICAgIGJvbmVbMF0ucm90YXRpb24ueCA9IFJpZ2h0TGFuZztcbiAgICBib25lWzFdLnJvdGF0aW9uLnggPSAtUmlnaHRMYW5nO1xuXG4gIH1cblxuXG4gIC8v5qih5Z6L6LS05Zu+6aKc6Imy5pS55Y+YXG4gIHNlbGYuZW1pc3NpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS5sb2coJ+iHquW3seaooeWeiycsIHNlbGYubWF0ZXJpYWwpXG4gICAgc2VsZi5tYXRlcmlhbFswXS5lbWlzc2l2ZS5zZXRIZXgoIDB4ZmYzMzAwICk7XG4gIH1cbiAgLy/mr4/luKfoobDlh49cbiAgbGV0IGNvbG9yXG4gIHNlbGYuZW1pc3NpdmVVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYoICFzZWxmLm1hdGVyaWFsIHx8IHNlbGYubWF0ZXJpYWwubGVuZ3RoIDw9IDAgKSByZXR1cm5cbiAgICBjb2xvciA9IHNlbGYubWF0ZXJpYWxbMF0uZW1pc3NpdmUuZ2V0SGV4KClcbiAgICBjb2xvciA9IFRIUkVFLk1hdGgubGVycCggY29sb3IsIDB4MDAwMDAwLCBEQi5sZXJwVmFsICogNSApXG4gICAgc2VsZi5tYXRlcmlhbFswXS5lbWlzc2l2ZS5zZXRIZXgoIGNvbG9yIClcbiAgfVxuXG4gIHNlbGYuc2V0UG9zZSgpOyAvL+WIneWni+WMluaooeWei1xuICByZXR1cm4gc2VsZjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQbGF5ZXJNZXNoXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNsaWVudC9Sb2NrUnVuL1BsYXllck1lc2guanMiXSwibWFwcGluZ3MiOiI7Ozs7QUFFQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7Ozs7Ozs7QUFBQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n");

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./databus'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.databus);\n    global.CameraEffect = mod.exports;\n  }\n})(undefined, function (module, DB) {\n  'use strict';\n\n  //使用方法\n  // main.cameraShake = new CameraShake()\n  // main.cameraShake.strength = 5\n  // main.cameraShake.damper = 1\n\n  var CameraShake = function CameraShake(scene, camera) {\n    var self = {};\n    var originalPos = null; //存相机原始位置\n\n    self.strength = 0; //震动力量\n    self.damper = 0.1; //减震系数\n\n    self.init = function () {\n      originalPos = camera.position.clone();\n      // scene.add(cameraObj)\n      // console.log('加入obj', cameraObj, camera.position)\n    };\n\n    var randx = void 0,\n        randy = void 0;\n    self.update = function () {\n      // return //del\n      // as long as there is strength left to shake...\n      if (self.strength <= 0 && camera.position.x === originalPos.x && camera.position.y === originalPos.y) {\n        return;\n      } else if (self.strength <= 0) {\n        camera.position.x = originalPos.x;\n        camera.position.y = originalPos.y;\n        return;\n      }\n\n      // get random acceleration on the interval [-strength, strength)\n      randx = Math.random() * 2 * self.strength - self.strength;\n      randy = Math.random() * 4 * self.strength - self.strength;\n\n      // add in the shaking acceleration\n      camera.position.x = THREE.Math.lerp(camera.position.x, randx, 0.1);\n      camera.position.y = THREE.Math.lerp(camera.position.y, randy, 0.1);\n\n      // reduce strength 衰减强度\n      self.strength -= self.damper;\n    };\n\n    //设置强度和衰减\n    self.set = function (s, d) {\n      self.strength = s;\n      self.damper = d;\n    };\n\n    self.init();\n    return self;\n  };\n\n  //停顿\n  var CameraSleep = function CameraSleep() {\n    var self = {};\n    var time = 0;\n    self.isStopUpdate = function () {\n      if (time <= 0) return false;\n      time -= 1;\n      return true;\n    };\n\n    self.set = function (t) {\n      time = t;\n    };\n    return self;\n  };\n\n  //慢动作\n  var SlowMotion = function SlowMotion() {\n    var self = {};\n\n    var slowTime = 0; //10\n    var slowSpeed = 2; //数值越大越慢\n\n    var frame = slowSpeed;\n    self.isStopUpdate = function () {\n      if (slowTime <= 0) return false;\n      frame -= 1; //跳帧\n      if (frame >= 0) return true;\n      frame = slowSpeed;\n\n      slowTime -= 1; //控制时常\n      // if(self.slowTime >= 0) return true\n      return false;\n    };\n\n    self.set = function (time, speed) {\n      slowTime = time;\n      slowSpeed = speed || slowSpeed; //默认慢一半\n    };\n    return self;\n  };\n\n  var CameraEffect = function CameraEffect(scene, camera) {\n    var self = {};\n    //相机特效\n    self.shake = new CameraShake(scene, camera);\n    self.slow = new SlowMotion();\n    self.sleep = new CameraSleep();\n\n    self.update = function () {\n      if (self.slow.isStopUpdate()) return;\n      if (self.sleep.isStopUpdate()) return;\n      self.shake.update();\n    };\n    return self;\n  };\n\n  module.exports = CameraEffect;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY2xpZW50L1JvY2tSdW4vQ2FtZXJhRWZmZWN0LmpzPzRhODkiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG4gIGNvbnN0IERCID0gcmVxdWlyZSgnLi9kYXRhYnVzJylcbi8v5L2/55So5pa55rOVXG4vLyBtYWluLmNhbWVyYVNoYWtlID0gbmV3IENhbWVyYVNoYWtlKClcbi8vIG1haW4uY2FtZXJhU2hha2Uuc3RyZW5ndGggPSA1XG4vLyBtYWluLmNhbWVyYVNoYWtlLmRhbXBlciA9IDFcblxuY29uc3QgQ2FtZXJhU2hha2UgPSBmdW5jdGlvbiAoc2NlbmUsIGNhbWVyYSkge1xuICBsZXQgc2VsZiA9IHt9XG4gIGxldCBvcmlnaW5hbFBvcyA9IG51bGwgLy/lrZjnm7jmnLrljp/lp4vkvY3nva5cblxuICBzZWxmLnN0cmVuZ3RoID0gMCAgLy/pnIfliqjlipvph49cbiAgc2VsZi5kYW1wZXIgPSAwLjEgLy/lh4/pnIfns7vmlbBcblxuICBzZWxmLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgb3JpZ2luYWxQb3MgPSBjYW1lcmEucG9zaXRpb24uY2xvbmUoKVxuICAgIC8vIHNjZW5lLmFkZChjYW1lcmFPYmopXG4gICAgLy8gY29uc29sZS5sb2coJ+WKoOWFpW9iaicsIGNhbWVyYU9iaiwgY2FtZXJhLnBvc2l0aW9uKVxuICB9XG5cblxuICBsZXQgcmFuZHgsIHJhbmR5XG4gIHNlbGYudXBkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gcmV0dXJuIC8vZGVsXG4gICAgLy8gYXMgbG9uZyBhcyB0aGVyZSBpcyBzdHJlbmd0aCBsZWZ0IHRvIHNoYWtlLi4uXG4gICAgaWYgKHNlbGYuc3RyZW5ndGggPD0gMCAmJlxuICAgICAgY2FtZXJhLnBvc2l0aW9uLnggPT09IG9yaWdpbmFsUG9zLnggJiZcbiAgICAgIGNhbWVyYS5wb3NpdGlvbi55ID09PSBvcmlnaW5hbFBvcy55XG4gICAgKSB7IHJldHVybiB9XG4gICAgZWxzZSBpZiggc2VsZi5zdHJlbmd0aCA8PSAwICkge1xuICAgICAgY2FtZXJhLnBvc2l0aW9uLnggPSBvcmlnaW5hbFBvcy54XG4gICAgICBjYW1lcmEucG9zaXRpb24ueSA9IG9yaWdpbmFsUG9zLnlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIGdldCByYW5kb20gYWNjZWxlcmF0aW9uIG9uIHRoZSBpbnRlcnZhbCBbLXN0cmVuZ3RoLCBzdHJlbmd0aClcbiAgICByYW5keCA9IE1hdGgucmFuZG9tKCkgKiAyICogc2VsZi5zdHJlbmd0aCAtIHNlbGYuc3RyZW5ndGg7XG4gICAgcmFuZHkgPSBNYXRoLnJhbmRvbSgpICogNCAqIHNlbGYuc3RyZW5ndGggLSBzZWxmLnN0cmVuZ3RoO1xuXG4gICAgLy8gYWRkIGluIHRoZSBzaGFraW5nIGFjY2VsZXJhdGlvblxuICAgIGNhbWVyYS5wb3NpdGlvbi54ID0gVEhSRUUuTWF0aC5sZXJwKGNhbWVyYS5wb3NpdGlvbi54LCByYW5keCwgMC4xKTtcbiAgICBjYW1lcmEucG9zaXRpb24ueSA9IFRIUkVFLk1hdGgubGVycChjYW1lcmEucG9zaXRpb24ueSwgcmFuZHksIDAuMSk7XG5cbiAgICAvLyByZWR1Y2Ugc3RyZW5ndGgg6KGw5YeP5by65bqmXG4gICAgc2VsZi5zdHJlbmd0aCAtPSBzZWxmLmRhbXBlcjtcbiAgfVxuXG4gIC8v6K6+572u5by65bqm5ZKM6KGw5YePXG4gIHNlbGYuc2V0ID0gZnVuY3Rpb24gKHMsIGQpIHtcbiAgICBzZWxmLnN0cmVuZ3RoID0gc1xuICAgIHNlbGYuZGFtcGVyID0gZFxuICB9XG5cbiAgc2VsZi5pbml0KClcbiAgcmV0dXJuIHNlbGZcbn1cblxuLy/lgZzpob9cbmNvbnN0IENhbWVyYVNsZWVwID0gZnVuY3Rpb24gKCkge1xuICBsZXQgc2VsZiA9IHt9XG4gIGxldCB0aW1lID0gMFxuICBzZWxmLmlzU3RvcFVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiggdGltZSA8PSAwICkgcmV0dXJuIGZhbHNlXG4gICAgdGltZSAtPSAxXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHNlbGYuc2V0ID0gZnVuY3Rpb24gKHQpIHtcbiAgICB0aW1lID0gdFxuICB9XG4gIHJldHVybiBzZWxmXG59XG5cbi8v5oWi5Yqo5L2cXG5jb25zdCBTbG93TW90aW9uID0gZnVuY3Rpb24gKCkge1xuICBsZXQgc2VsZiA9IHt9XG5cbiAgbGV0IHNsb3dUaW1lID0gMCAvLzEwXG4gIGxldCBzbG93U3BlZWQgPSAyIC8v5pWw5YC86LaK5aSn6LaK5oWiXG5cbiAgbGV0IGZyYW1lID0gc2xvd1NwZWVkXG4gIHNlbGYuaXNTdG9wVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmKCBzbG93VGltZSA8PSAwICkgcmV0dXJuIGZhbHNlXG4gICAgZnJhbWUgLT0gMSAvL+i3s+W4p1xuICAgIGlmKCBmcmFtZSA+PSAwICkgcmV0dXJuIHRydWVcbiAgICBmcmFtZSA9IHNsb3dTcGVlZFxuXG4gICAgc2xvd1RpbWUgLT0gMSAvL+aOp+WItuaXtuW4uFxuICAgIC8vIGlmKHNlbGYuc2xvd1RpbWUgPj0gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHNlbGYuc2V0ID0gZnVuY3Rpb24gKHRpbWUsIHNwZWVkKSB7XG4gICAgc2xvd1RpbWUgPSB0aW1lXG4gICAgc2xvd1NwZWVkID0gc3BlZWQgfHwgc2xvd1NwZWVkIC8v6buY6K6k5oWi5LiA5Y2KXG4gIH1cbiAgcmV0dXJuIHNlbGZcbn1cblxuXG5jb25zdCBDYW1lcmFFZmZlY3QgPSBmdW5jdGlvbiAoc2NlbmUsIGNhbWVyYSkge1xuICBsZXQgc2VsZiA9IHt9XG4gIC8v55u45py654m55pWIXG4gIHNlbGYuc2hha2UgPSBuZXcgQ2FtZXJhU2hha2Uoc2NlbmUsIGNhbWVyYSlcbiAgc2VsZi5zbG93ID0gbmV3IFNsb3dNb3Rpb24oKVxuICBzZWxmLnNsZWVwID0gbmV3IENhbWVyYVNsZWVwKClcblxuICBzZWxmLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmKHNlbGYuc2xvdy5pc1N0b3BVcGRhdGUoKSkgcmV0dXJuXG4gICAgICBpZihzZWxmLnNsZWVwLmlzU3RvcFVwZGF0ZSgpKSByZXR1cm5cbiAgICBzZWxmLnNoYWtlLnVwZGF0ZSgpXG4gIH1cbiAgcmV0dXJuIHNlbGZcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDYW1lcmFFZmZlY3RcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2xpZW50L1JvY2tSdW4vQ2FtZXJhRWZmZWN0LmpzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7O0FBQUE7Ozs7Ozs7O0FBQUE7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod);\n    global.effect = mod.exports;\n  }\n})(undefined, function (module) {\n  'use strict';\n\n  var Effect = function Effect(THREE) {\n    var url = '../images/ball.png';\n    var particleCount = 1000;\n    var explosionPower = 1.08;\n\n    var self = {};\n    self.particles = null;\n\n    var particleGeometry = null;\n\n    self.init = function () {\n      //初始化内容，创建粒子效果\n\n      var sprite = new THREE.TextureLoader().load(url);\n      var colors = [];\n      var vertexX = void 0;\n\n      particleGeometry = new THREE.Geometry();\n      for (var i = 0; i < particleCount; i++) {\n        var vertex = new THREE.Vector3();\n        particleGeometry.vertices.push(vertex);\n\n        vertexX = 1000 * Math.random() - 500;\n        colors[i] = new THREE.Color(0xffffff);\n        colors[i].setHSL((vertexX + 500) / 1000, 1, 0.5);\n      }\n      particleGeometry.colors = colors;\n\n      var pMaterial = new THREE.PointsMaterial({\n        size: 0.3,\n        map: sprite,\n        vertexColors: THREE.VertexColors,\n        alphaTest: 0.5,\n        transparent: true,\n        blending: THREE.AdditiveBlending\n        // color: 0xfffafa,\n        // size: 0.05\n      });\n\n      self.particles = new THREE.Points(particleGeometry, pMaterial);\n      self.particles.visible = false;\n    };\n\n    //触发效果\n    self.explode = function (pos) {\n      if (!self.particles) {\n        console.error('effect error no particles');return;\n      }\n      // self.particles.position.y=2;\n      // self.particles.position.z=4.8;\n      // self.particles.position.x = pos.x || 0 //heroSphere.position.x;\n\n      self.particles.position.copy(pos);\n\n      for (var i = 0; i < particleCount; i++) {\n        var vertex = new THREE.Vector3();\n        vertex.x = -0.2 + Math.random() * 0.4;\n        vertex.y = -0.2 + Math.random() * 0.4;\n        vertex.z = -0.2 + Math.random() * 0.4;\n        particleGeometry.vertices[i] = vertex;\n      }\n      explosionPower = 1.06;\n      self.particles.visible = true;\n    };\n\n    //每帧循环处理 爆炸效果\n    self.doExplosionLogic = function () {\n      if (!self.particles.visible) return; //粒子消失的情况就不处理\n      for (var i = 0; i < particleCount; i++) {\n        particleGeometry.vertices[i].multiplyScalar(explosionPower);\n      }\n      if (explosionPower > 1.005) {\n        explosionPower -= 0.0003; //在最远处急停\n        // particleGeometry.vertices[i].y -= 0.01\n      } else {\n        self.particles.visible = false;\n      }\n      particleGeometry.verticesNeedUpdate = true;\n    };\n\n    self.init(); //自动初始化\n    return self;\n  };\n\n  module.exports = Effect;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY2xpZW50L1JvY2tSdW4vZWZmZWN0LmpzPzE5MzYiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cbmNvbnN0IEVmZmVjdCA9IGZ1bmN0aW9uIChUSFJFRSkge1xuICBjb25zdCB1cmwgPSAnLi4vaW1hZ2VzL2JhbGwucG5nJ1xuICBjb25zdCBwYXJ0aWNsZUNvdW50ID0gMTAwMDtcbiAgbGV0IGV4cGxvc2lvblBvd2VyID0gMS4wODtcblxuICBsZXQgc2VsZiA9IHt9XG4gIHNlbGYucGFydGljbGVzID0gbnVsbFxuXG4gIGxldCBwYXJ0aWNsZUdlb21ldHJ5ID0gbnVsbFxuXG4gIHNlbGYuaW5pdCA9IGZ1bmN0aW9uICgpIHsgLy/liJ3lp4vljJblhoXlrrnvvIzliJvlu7rnspLlrZDmlYjmnpxcblxuICAgIGNvbnN0IHNwcml0ZSA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCkubG9hZCh1cmwpO1xuICAgIGNvbnN0IGNvbG9ycyA9IFtdXG4gICAgbGV0IHZlcnRleFhcblxuXG4gICAgcGFydGljbGVHZW9tZXRyeSA9IG5ldyBUSFJFRS5HZW9tZXRyeSgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydGljbGVDb3VudDsgaSsrKSB7XG4gICAgICB2YXIgdmVydGV4ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICAgIHBhcnRpY2xlR2VvbWV0cnkudmVydGljZXMucHVzaCh2ZXJ0ZXgpO1xuXG4gICAgICB2ZXJ0ZXhYID0gMTAwMCAqIE1hdGgucmFuZG9tKCkgLSA1MDA7XG4gICAgICBjb2xvcnNbIGkgXSA9IG5ldyBUSFJFRS5Db2xvciggMHhmZmZmZmYgKTtcbiAgICAgIGNvbG9yc1sgaSBdLnNldEhTTCggKCB2ZXJ0ZXhYICsgNTAwICkgLyAxMDAwLCAxLCAwLjUgKTtcbiAgICB9XG4gICAgcGFydGljbGVHZW9tZXRyeS5jb2xvcnMgPSBjb2xvcnM7XG5cblxuICAgIHZhciBwTWF0ZXJpYWwgPSBuZXcgVEhSRUUuUG9pbnRzTWF0ZXJpYWwoe1xuICAgICAgc2l6ZTogMC4zLFxuICAgICAgbWFwOiBzcHJpdGUsXG4gICAgICB2ZXJ0ZXhDb2xvcnM6IFRIUkVFLlZlcnRleENvbG9ycyxcbiAgICAgIGFscGhhVGVzdDogMC41LFxuICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXG4gICAgICBibGVuZGluZzogVEhSRUUuQWRkaXRpdmVCbGVuZGluZ1xuICAgICAgLy8gY29sb3I6IDB4ZmZmYWZhLFxuICAgICAgLy8gc2l6ZTogMC4wNVxuICAgIH0pO1xuXG5cbiAgICBzZWxmLnBhcnRpY2xlcyA9IG5ldyBUSFJFRS5Qb2ludHMocGFydGljbGVHZW9tZXRyeSwgcE1hdGVyaWFsKTtcbiAgICBzZWxmLnBhcnRpY2xlcy52aXNpYmxlID0gZmFsc2U7XG4gIH1cblxuXG4gIC8v6Kem5Y+R5pWI5p6cXG4gIHNlbGYuZXhwbG9kZSA9IGZ1bmN0aW9uICggcG9zICl7XG4gICAgaWYoIXNlbGYucGFydGljbGVzKXtjb25zb2xlLmVycm9yKCdlZmZlY3QgZXJyb3Igbm8gcGFydGljbGVzJyk7IHJldHVybn1cbiAgICAvLyBzZWxmLnBhcnRpY2xlcy5wb3NpdGlvbi55PTI7XG4gICAgLy8gc2VsZi5wYXJ0aWNsZXMucG9zaXRpb24uej00Ljg7XG4gICAgLy8gc2VsZi5wYXJ0aWNsZXMucG9zaXRpb24ueCA9IHBvcy54IHx8IDAgLy9oZXJvU3BoZXJlLnBvc2l0aW9uLng7XG5cbiAgICBzZWxmLnBhcnRpY2xlcy5wb3NpdGlvbi5jb3B5KCBwb3MgKVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0aWNsZUNvdW50OyBpICsrICkge1xuICAgICAgdmFyIHZlcnRleCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgICB2ZXJ0ZXgueCA9IC0wLjIrTWF0aC5yYW5kb20oKSAqIDAuNDtcbiAgICAgIHZlcnRleC55ID0gLTAuMitNYXRoLnJhbmRvbSgpICogMC40IDtcbiAgICAgIHZlcnRleC56ID0gLTAuMitNYXRoLnJhbmRvbSgpICogMC40O1xuICAgICAgcGFydGljbGVHZW9tZXRyeS52ZXJ0aWNlc1tpXT12ZXJ0ZXg7XG4gICAgfVxuICAgIGV4cGxvc2lvblBvd2VyPTEuMDY7XG4gICAgc2VsZi5wYXJ0aWNsZXMudmlzaWJsZT10cnVlO1xuICB9XG5cbiAgLy/mr4/luKflvqrnjq/lpITnkIYg54iG54K45pWI5p6cXG4gIHNlbGYuZG9FeHBsb3Npb25Mb2dpYyA9IGZ1bmN0aW9uICgpe1xuICAgIGlmKCFzZWxmLnBhcnRpY2xlcy52aXNpYmxlKXJldHVybjsgLy/nspLlrZDmtojlpLHnmoTmg4XlhrXlsLHkuI3lpITnkIZcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcnRpY2xlQ291bnQ7IGkgKysgKSB7XG4gICAgICBwYXJ0aWNsZUdlb21ldHJ5LnZlcnRpY2VzW2ldLm11bHRpcGx5U2NhbGFyKGV4cGxvc2lvblBvd2VyKTtcbiAgICB9XG4gICAgaWYoZXhwbG9zaW9uUG93ZXI+MS4wMDUpe1xuICAgICAgZXhwbG9zaW9uUG93ZXItPTAuMDAwMzsgIC8v5Zyo5pyA6L+c5aSE5oCl5YGcXG4gICAgICAvLyBwYXJ0aWNsZUdlb21ldHJ5LnZlcnRpY2VzW2ldLnkgLT0gMC4wMVxuICAgIH1lbHNle1xuICAgICAgc2VsZi5wYXJ0aWNsZXMudmlzaWJsZT1mYWxzZTtcbiAgICB9XG4gICAgcGFydGljbGVHZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGUgPSB0cnVlO1xuXG4gIH1cblxuICBzZWxmLmluaXQoKSAvL+iHquWKqOWIneWni+WMllxuICByZXR1cm4gc2VsZlxufVxuXG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBFZmZlY3RcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjbGllbnQvUm9ja1J1bi9lZmZlY3QuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13\n");

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./databus'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.databus);\n    global.Dust = mod.exports;\n  }\n})(undefined, function (module, DB) {\n  'use strict';\n\n  var Dust = function Dust() {\n    var color = 0x555555,\n        //0xfcf8cf,\n    particleCount = 2500,\n        size = 0.05,\n        width = 0.25,\n        height = 0.08,\n        long = 1.2,\n        xSpeed = function xSpeed() {\n      var xSpd = 0.05;\n      var halfxSpeed = xSpd / 2;\n      return Math.random() * xSpd - halfxSpeed;\n    },\n        zSpeed = function zSpeed() {\n      return (Math.random() * 0.05 + 0.05) * (DB.rollingSpeed / DB.rollingSpeedMax);\n    };\n\n    var isStop = false; //停止粒子运动\n\n    var points = null,\n        particles = null;\n\n    var self = {};\n    self.particles = null;\n\n    self.init = function () {\n      // particle // transparentとblendingたぶん効いてない\n      var material = new THREE.PointsMaterial({\n        color: color,\n        size: size,\n        transparent: true,\n        blending: THREE.AdditiveBlending\n      });\n\n      particles = new THREE.Geometry();\n\n      for (var i = 0; i < particleCount; i++) {\n        var px = Math.random() * width * 2 - width;\n        var py = Math.random() * height * 2 - height;\n        var pz = Math.random() * width * 2 - width;\n        var particle = new THREE.Vector3(px, py, pz);\n        // let particle = new THREE.Vector3()\n        setV(particle);\n        particles.vertices.push(particle);\n      }\n\n      points = new THREE.Points(particles, material);\n      points.sortParticles = true;\n      self.particles = points; //这个才是要添加到scene中的内容\n    };\n\n    self.dustUpdate = function () {\n      if (!points || !particles) return;\n      var i = particleCount;\n      var particle = void 0;\n      while (i--) {\n        particle = particles.vertices[i];\n\n        particle.add(particle.velocity);\n        if (isStop) continue; //如果粒子停止产生就返回\n\n        // x\n        // if (particle.x > width * 2) {\n        //   particle.x = -width\n        //   particle.velocity.x = Math.random() * xSpeed\n        // }\n        // particle.velocity.x += Math.random() * xSpeed\n        if (Math.abs(particle.x) > width && particle.z > long) {\n          particle.x = 0;\n        }\n\n        // y\n        // if (particle.y > height) {\n        //   particle.y = -height\n        //   particle.velocity.y = Math.random() * ySpeed\n        // }\n        // particle.velocity.y += Math.random() * ySpeed\n\n        //重置粒子，重设速度\n        if (particle.z > long) {\n          // particle.x = 0\n          // particle.y = 0\n          particle.z = 0;\n          setV(particle);\n        }\n      }\n\n      points.geometry.verticesNeedUpdate = true;\n    };\n\n    function setV(particle) {\n      // particle.velocity.z = Math.random() + 0.01\n      particle.velocity = new THREE.Vector3(xSpeed(), 0, zSpeed() + 0.005);\n    }\n\n    self.follow = function (pos) {\n      self.particles.position.x = THREE.Math.lerp(self.particles.position.x, pos.x, DB.lerpVal * 4);\n      self.particles.position.y = pos.y - height * 1.5;\n      self.particles.position.z = pos.z;\n      // self.particles.position.set(pos.x, pos.y - height, pos.z)\n    };\n\n    self.explode = function (pos) {\n      // console.log('灰尘效果', self.particles.position, pos)\n      // self.particles.visible = true\n      isStop = false;\n    };\n\n    self.stop = function () {\n      //停止产生粒子效果\n      // self.particles.visible = false\n      isStop = true;\n    };\n\n    self.setColor = function () {\n      //调整粒子颜色\n      // console.log('粒子颜色值', percent)\n      var percent = DB.rollingSpeed / DB.rollingSpeedMax * 0.6;\n      self.particles.material.color.setHSL(0.05, 0.8, percent * 0.6);\n    };\n\n    self.init();\n    self.setColor(0);\n    return self;\n  };\n\n  module.exports = Dust;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY2xpZW50L1JvY2tSdW4vRHVzdC5qcz9mOWZhIl0sInNvdXJjZXNDb250ZW50IjpbIiAgJ3VzZSBzdHJpY3QnXG4gIGNvbnN0IERCID0gcmVxdWlyZSgnLi9kYXRhYnVzJylcblxuY29uc3QgRHVzdCA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgY29sb3IgPSAweDU1NTU1NSwgLy8weGZjZjhjZixcbiAgICBwYXJ0aWNsZUNvdW50PSAyNTAwLFxuICAgIHNpemUgPSAwLjA1LFxuICAgIHdpZHRoPSAwLjI1LFxuICAgIGhlaWdodD0gMC4wOCxcbiAgICBsb25nID0gMS4yLFxuICAgIHhTcGVlZCA9IGZ1bmN0aW9uKCl7XG4gICAgICBjb25zdCB4U3BkPSAwLjA1XG4gICAgICBjb25zdCBoYWxmeFNwZWVkID0geFNwZCAvIDJcbiAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogeFNwZCAtIGhhbGZ4U3BlZWRcbiAgICB9LFxuICAgIHpTcGVlZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgcmV0dXJuIChNYXRoLnJhbmRvbSgpICogMC4wNSArIDAuMDUpICogKERCLnJvbGxpbmdTcGVlZCAvIERCLnJvbGxpbmdTcGVlZE1heClcbiAgICAgICAgfVxuXG5cbiAgbGV0IGlzU3RvcCA9IGZhbHNlIC8v5YGc5q2i57KS5a2Q6L+Q5YqoXG5cbiAgbGV0IHBvaW50cz0gbnVsbCxcbiAgICBwYXJ0aWNsZXM9IG51bGxcblxuICBsZXQgc2VsZiA9IHt9XG4gIHNlbGYucGFydGljbGVzID0gbnVsbFxuXG4gIHNlbGYuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBwYXJ0aWNsZSAvLyB0cmFuc3BhcmVudOOBqGJsZW5kaW5n44Gf44G244KT5Yq544GE44Gm44Gq44GEXG4gICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuUG9pbnRzTWF0ZXJpYWwoe1xuICAgICAgY29sb3I6IGNvbG9yLFxuICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgIHRyYW5zcGFyZW50OiB0cnVlLFxuICAgICAgYmxlbmRpbmc6IFRIUkVFLkFkZGl0aXZlQmxlbmRpbmdcbiAgICB9KVxuXG4gICAgcGFydGljbGVzID0gbmV3IFRIUkVFLkdlb21ldHJ5KClcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydGljbGVDb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBweCA9IE1hdGgucmFuZG9tKCkgKiB3aWR0aCAqIDIgLSB3aWR0aFxuICAgICAgY29uc3QgcHkgPSBNYXRoLnJhbmRvbSgpICogaGVpZ2h0ICogMiAtIGhlaWdodFxuICAgICAgY29uc3QgcHogPSBNYXRoLnJhbmRvbSgpICogd2lkdGggKiAyIC0gd2lkdGhcbiAgICAgIGxldCBwYXJ0aWNsZSA9IG5ldyBUSFJFRS5WZWN0b3IzKHB4LCBweSwgcHopXG4gICAgICAvLyBsZXQgcGFydGljbGUgPSBuZXcgVEhSRUUuVmVjdG9yMygpXG4gICAgICBzZXRWKHBhcnRpY2xlKVxuICAgICAgcGFydGljbGVzLnZlcnRpY2VzLnB1c2gocGFydGljbGUpXG4gICAgfVxuXG4gICAgcG9pbnRzID0gbmV3IFRIUkVFLlBvaW50cyhwYXJ0aWNsZXMsIG1hdGVyaWFsKVxuICAgIHBvaW50cy5zb3J0UGFydGljbGVzID0gdHJ1ZVxuICAgIHNlbGYucGFydGljbGVzID0gcG9pbnRzICAvL+i/meS4quaJjeaYr+imgea3u+WKoOWIsHNjZW5l5Lit55qE5YaF5a65XG4gIH1cblxuICBzZWxmLmR1c3RVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFwb2ludHMgfHwgIXBhcnRpY2xlcykgcmV0dXJuXG4gICAgbGV0IGkgPSBwYXJ0aWNsZUNvdW50XG4gICAgbGV0IHBhcnRpY2xlXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgIHBhcnRpY2xlID0gcGFydGljbGVzLnZlcnRpY2VzW2ldXG5cbiAgICAgIHBhcnRpY2xlLmFkZChwYXJ0aWNsZS52ZWxvY2l0eSlcbiAgICAgIGlmKGlzU3RvcCkgY29udGludWUgLy/lpoLmnpznspLlrZDlgZzmraLkuqfnlJ/lsLHov5Tlm55cblxuICAgICAgLy8geFxuICAgICAgLy8gaWYgKHBhcnRpY2xlLnggPiB3aWR0aCAqIDIpIHtcbiAgICAgIC8vICAgcGFydGljbGUueCA9IC13aWR0aFxuICAgICAgLy8gICBwYXJ0aWNsZS52ZWxvY2l0eS54ID0gTWF0aC5yYW5kb20oKSAqIHhTcGVlZFxuICAgICAgLy8gfVxuICAgICAgLy8gcGFydGljbGUudmVsb2NpdHkueCArPSBNYXRoLnJhbmRvbSgpICogeFNwZWVkXG4gICAgICBpZiAoTWF0aC5hYnMocGFydGljbGUueCkgPiB3aWR0aCAmJiBwYXJ0aWNsZS56ID4gbG9uZyl7XG4gICAgICAgICBwYXJ0aWNsZS54ID0gMFxuICAgICAgfVxuXG4gICAgICAvLyB5XG4gICAgICAvLyBpZiAocGFydGljbGUueSA+IGhlaWdodCkge1xuICAgICAgLy8gICBwYXJ0aWNsZS55ID0gLWhlaWdodFxuICAgICAgLy8gICBwYXJ0aWNsZS52ZWxvY2l0eS55ID0gTWF0aC5yYW5kb20oKSAqIHlTcGVlZFxuICAgICAgLy8gfVxuICAgICAgLy8gcGFydGljbGUudmVsb2NpdHkueSArPSBNYXRoLnJhbmRvbSgpICogeVNwZWVkXG5cbiAgICAgIC8v6YeN572u57KS5a2Q77yM6YeN6K6+6YCf5bqmXG4gICAgICBpZiAocGFydGljbGUueiA+IGxvbmcpIHtcbiAgICAgICAgIC8vIHBhcnRpY2xlLnggPSAwXG4gICAgICAgIC8vIHBhcnRpY2xlLnkgPSAwXG4gICAgICAgIHBhcnRpY2xlLnogPSAwXG4gICAgICAgIHNldFYocGFydGljbGUpXG4gICAgICB9XG5cblxuICAgIH1cblxuICAgIHBvaW50cy5nZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGUgPSB0cnVlXG4gIH1cblxuXG4gIGZ1bmN0aW9uIHNldFYgKHBhcnRpY2xlKSB7XG4gICAgLy8gcGFydGljbGUudmVsb2NpdHkueiA9IE1hdGgucmFuZG9tKCkgKyAwLjAxXG4gICAgcGFydGljbGUudmVsb2NpdHkgPSBuZXcgVEhSRUUuVmVjdG9yMyhcbiAgICAgIHhTcGVlZCgpLFxuICAgICAgMCxcbiAgICAgIHpTcGVlZCgpICsgMC4wMDVcbiAgICApXG4gIH1cblxuICBzZWxmLmZvbGxvdyA9IGZ1bmN0aW9uIChwb3MpIHtcbiAgICBzZWxmLnBhcnRpY2xlcy5wb3NpdGlvbi54ID0gVEhSRUUuTWF0aC5sZXJwKHNlbGYucGFydGljbGVzLnBvc2l0aW9uLngsIHBvcy54LCBEQi5sZXJwVmFsICogNCk7XG4gICAgc2VsZi5wYXJ0aWNsZXMucG9zaXRpb24ueSA9IHBvcy55IC0gKGhlaWdodCAqIDEuNSlcbiAgICBzZWxmLnBhcnRpY2xlcy5wb3NpdGlvbi56ID0gcG9zLnpcbiAgICAvLyBzZWxmLnBhcnRpY2xlcy5wb3NpdGlvbi5zZXQocG9zLngsIHBvcy55IC0gaGVpZ2h0LCBwb3MueilcbiAgfVxuXG4gIHNlbGYuZXhwbG9kZSA9IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAvLyBjb25zb2xlLmxvZygn54Gw5bCY5pWI5p6cJywgc2VsZi5wYXJ0aWNsZXMucG9zaXRpb24sIHBvcylcbiAgICAvLyBzZWxmLnBhcnRpY2xlcy52aXNpYmxlID0gdHJ1ZVxuICAgIGlzU3RvcCA9IGZhbHNlXG4gIH1cblxuICBzZWxmLnN0b3AgPSBmdW5jdGlvbiAoKSB7IC8v5YGc5q2i5Lqn55Sf57KS5a2Q5pWI5p6cXG4gICAgLy8gc2VsZi5wYXJ0aWNsZXMudmlzaWJsZSA9IGZhbHNlXG4gICAgaXNTdG9wID0gdHJ1ZVxuICB9XG5cbiAgc2VsZi5zZXRDb2xvciA9IGZ1bmN0aW9uICgpIHsgLy/osIPmlbTnspLlrZDpopzoibJcbiAgICAvLyBjb25zb2xlLmxvZygn57KS5a2Q6aKc6Imy5YC8JywgcGVyY2VudClcbiAgICBjb25zdCBwZXJjZW50ID0gREIucm9sbGluZ1NwZWVkIC8gREIucm9sbGluZ1NwZWVkTWF4ICogMC42XG4gICAgc2VsZi5wYXJ0aWNsZXMubWF0ZXJpYWwuY29sb3Iuc2V0SFNMKCAwLjA1LCAwLjgsIHBlcmNlbnQgKiAwLjYgKTtcbiAgfVxuXG4gIHNlbGYuaW5pdCgpXG4gIHNlbGYuc2V0Q29sb3IoMClcbiAgcmV0dXJuIHNlbGZcbn1cblxuICBtb2R1bGUuZXhwb3J0cyA9IER1c3RcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2xpZW50L1JvY2tSdW4vRHVzdC5qcyJdLCJtYXBwaW5ncyI6Ijs7OztBQUNBO0FBQUE7QUFBQTtBQUFBOztBQUFBOzs7Ozs7OztBQUFBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFZQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///14\n");

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0), __webpack_require__(16)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./databus'), require('./TouchInput'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.databus, global.TouchInput);\n    global.input = mod.exports;\n  }\n})(undefined, function (module, DB, TouchInput) {\n  'use strict';\n\n  var Input = function Input(THREE) {\n\n    var self = {};\n    self.dom = null;\n    self.touch = null; //供外部拿到touch的内容\n\n    var joystick = void 0;\n\n    self.init = function () {\n      self.initKeyInput();\n      // self.initJoystick()\n      self.initTouch();\n    };\n\n    self.initTouch = function () {\n      joystick = new TouchInput(THREE);\n      joystick.dom = self.dom;\n      joystick.directionFunc = handleTouch;\n      joystick.clickFunc = clickFunc;\n      joystick.pressFunc = pressFunc;\n      joystick.init();\n      self.touch = joystick;\n    };\n\n    function handleTouch(dir) {\n      //控制方向移动\n      // console.log('触摸的方向是', dir)\n      if (dir === 'up' || dir === 'down') {\n        DB.heroSphere.controlSpeed(dir);\n        return;\n      }\n      DB.heroSphere.move(dir);\n    }\n\n    function clickFunc() {\n      //单纯点击\n      DB.heroSphere.move('up');\n    }\n\n    function pressFunc(time) {\n      console.log('蓄力时间', time, DB.heroSphere.model.position);\n      if (time > 200 && time <= 500) {\n        DB.heroSphere.move('up');\n      } else if (time > 500 && time <= 900) {\n        DB.heroSphere.move('superUp');\n      } else if (time > 900) {\n        DB.heroSphere.move('superUp2');\n      }\n    }\n\n    //键盘输入\n    self.initKeyInput = function () {\n      //输入控制\n      document.onkeydown = handleKeyDown;\n    };\n\n    return self;\n  };\n\n  function handleKeyDown(keyEvent) {\n    if (!DB.heroSphere) {\n      console.error('没创建人物');return;\n    }\n    // console.log('输入中', keyEvent)\n\n    switch (keyEvent.keyCode) {\n      case 38:\n        //up\n        DB.heroSphere.controlSpeed('up');\n        break;\n      case 40:\n        //down\n        DB.heroSphere.controlSpeed('down');\n        break;\n      case 37:\n        DB.heroSphere.move('left');\n        break;\n      case 39:\n        DB.heroSphere.move('right');\n        break;\n      case 32:\n        //space\n        DB.heroSphere.move('up');\n        break;\n      default:\n        break;\n    }\n  }\n\n  module.exports = Input;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY2xpZW50L1JvY2tSdW4vaW5wdXQuanM/YjJiMSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBEQiA9IHJlcXVpcmUoJy4vZGF0YWJ1cycpXG5jb25zdCBUb3VjaElucHV0ID0gcmVxdWlyZSgnLi9Ub3VjaElucHV0JylcblxudmFyIElucHV0ID0gZnVuY3Rpb24gICggVEhSRUUgKSB7XG5cbiAgY29uc3Qgc2VsZiA9IHt9XG4gIHNlbGYuZG9tID0gbnVsbFxuICBzZWxmLnRvdWNoID0gbnVsbCAvL+S+m+WklumDqOaLv+WIsHRvdWNo55qE5YaF5a65XG5cbiAgbGV0IGpveXN0aWNrXG5cbiAgc2VsZi5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIHNlbGYuaW5pdEtleUlucHV0KClcbiAgICAvLyBzZWxmLmluaXRKb3lzdGljaygpXG4gICAgc2VsZi5pbml0VG91Y2goKVxuICB9XG5cbiAgc2VsZi5pbml0VG91Y2ggPSBmdW5jdGlvbigpIHtcbiAgICBqb3lzdGljayA9IG5ldyBUb3VjaElucHV0KFRIUkVFKVxuICAgIGpveXN0aWNrLmRvbSA9IHNlbGYuZG9tXG4gICAgam95c3RpY2suZGlyZWN0aW9uRnVuYyA9IGhhbmRsZVRvdWNoXG4gICAgam95c3RpY2suY2xpY2tGdW5jID0gY2xpY2tGdW5jXG4gICAgam95c3RpY2sucHJlc3NGdW5jID0gcHJlc3NGdW5jXG4gICAgam95c3RpY2suaW5pdCgpXG4gICAgc2VsZi50b3VjaCA9IGpveXN0aWNrXG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVUb3VjaCAoZGlyKSB7ICAvL+aOp+WItuaWueWQkeenu+WKqFxuICAgIC8vIGNvbnNvbGUubG9nKCfop6bmkbjnmoTmlrnlkJHmmK8nLCBkaXIpXG4gICAgaWYoZGlyID09PSAndXAnIHx8IGRpciA9PT0gJ2Rvd24nKXtcbiAgICAgIERCLmhlcm9TcGhlcmUuY29udHJvbFNwZWVkKCBkaXIgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIERCLmhlcm9TcGhlcmUubW92ZSggZGlyIClcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsaWNrRnVuYyAoKSB7IC8v5Y2V57qv54K55Ye7XG4gICAgREIuaGVyb1NwaGVyZS5tb3ZlKCd1cCcpXG4gIH1cblxuICBmdW5jdGlvbiBwcmVzc0Z1bmMgKCB0aW1lICkge1xuICAgIGNvbnNvbGUubG9nKCfok4Tlipvml7bpl7QnLCB0aW1lLCBEQi5oZXJvU3BoZXJlLm1vZGVsLnBvc2l0aW9uKVxuICAgIGlmKCB0aW1lID4gMjAwICYmIHRpbWUgPD0gNTAwKXtcbiAgICAgIERCLmhlcm9TcGhlcmUubW92ZSgndXAnKVxuICAgIH1cbiAgICBlbHNlIGlmKCB0aW1lID4gNTAwICYmIHRpbWUgPD0gOTAwKSB7XG4gICAgICBEQi5oZXJvU3BoZXJlLm1vdmUoJ3N1cGVyVXAnKVxuICAgIH1cbiAgICBlbHNlIGlmKCB0aW1lID4gOTAwICl7XG4gICAgICBEQi5oZXJvU3BoZXJlLm1vdmUoJ3N1cGVyVXAyJylcbiAgICB9XG4gIH1cblxuXG5cbiAgLy/plK7nm5jovpPlhaVcbiAgc2VsZi5pbml0S2V5SW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy/ovpPlhaXmjqfliLZcbiAgICBkb2N1bWVudC5vbmtleWRvd24gPSBoYW5kbGVLZXlEb3duO1xuICB9XG5cbiAgcmV0dXJuIHNlbGZcbn1cblxuZnVuY3Rpb24gaGFuZGxlS2V5RG93biAoa2V5RXZlbnQpIHtcbiAgaWYgKCFEQi5oZXJvU3BoZXJlKSB7IGNvbnNvbGUuZXJyb3IoJ+ayoeWIm+W7uuS6uueJqScpOyByZXR1cm4gfVxuICAvLyBjb25zb2xlLmxvZygn6L6T5YWl5LitJywga2V5RXZlbnQpXG5cbiAgc3dpdGNoIChrZXlFdmVudC5rZXlDb2RlKXtcbiAgICBjYXNlIDM4OiAvL3VwXG4gICAgICBEQi5oZXJvU3BoZXJlLmNvbnRyb2xTcGVlZCgndXAnKVxuICAgICAgYnJlYWtcbiAgICBjYXNlIDQwOiAgLy9kb3duXG4gICAgICBEQi5oZXJvU3BoZXJlLmNvbnRyb2xTcGVlZCgnZG93bicpXG4gICAgICBicmVha1xuICAgIGNhc2UgMzc6XG4gICAgICBEQi5oZXJvU3BoZXJlLm1vdmUoJ2xlZnQnKVxuICAgICAgYnJlYWtcbiAgICBjYXNlIDM5OlxuICAgICAgREIuaGVyb1NwaGVyZS5tb3ZlKCdyaWdodCcpXG4gICAgICBicmVha1xuICAgIGNhc2UgMzI6IC8vc3BhY2VcbiAgICAgIERCLmhlcm9TcGhlcmUubW92ZSgndXAnKVxuICAgICAgYnJlYWtcbiAgICBkZWZhdWx0OlxuICAgICAgYnJlYWtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IElucHV0XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjbGllbnQvUm9ja1J1bi9pbnB1dC5qcyJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBOzs7Ozs7OztBQUFBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakJBO0FBbUJBO0FBQ0E7QUFDQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///15\n");

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0), __webpack_require__(1)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./databus'), require('./core'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.databus, global.core);\n    global.TouchInput = mod.exports;\n  }\n})(undefined, function (module, DB, core) {\n  'use strict';\n\n  //触摸输入\n  var TouchInput = function TouchInput(THREE) {\n\n    var self = {},\n        dist,\n        //距离\n    radian,\n        direction,\n        threshold = 100,\n        //判读是否属于滑动的最小距离\n\n    allowedTime = 200,\n        // 200 maximum time allowed to travel that distance\n    elapsedTime,\n        //所用时间\n    startTime,\n        isTouch = false,\n        overField = false,\n        //判断操作是否超出过范围\n    startPoint = { x: 0, y: 0 },\n        movePoint = { x: 0, y: 0 },\n        screenPoint; //用鼠标判断当前所在位置 显示位置\n\n\n    self.dom = null; //要加入的监听的dom\n    self.directionFunc = null; //存方向的func，用于调用\n    self.clickFunc = null; //点击效果，外部输入的func\n    self.pressFunc = null; //蓄力点击\n\n    self.HUD = null; //界面指示，外部加入，方便控制UI效果\n\n    //启动\n    self.init = function () {\n      if (!self.dom) {\n        console.error('no touch dom');return;\n      }\n      self.dom.addEventListener('touchstart', touchstart, true);\n      self.dom.addEventListener('touchmove', touchmove, true);\n      self.dom.addEventListener('touchend', touchend, true);\n      // self.dom.addEventListener('touchcancel', touchcancel, true);\n      // self.addIndicator()  //加入指示\n    };\n\n    function touchstart(e) {\n      //触摸开始\n      e.preventDefault();\n\n      startPoint = {\n        x: e.touches[0].clientX,\n        y: e.touches[0].clientY\n      };\n      isTouch = true; //重置数据\n      overField = false;\n      dist = 0;\n      radian = null;\n      // elapsedTime = 0  //记录点击时间\n      startTime = Date.now(); // new Date().getTime() //记录触摸开始的时间\n\n      // console.log('触摸开始的位置', startPoint)\n      self.startIndicator(); //增加HUD点击显示\n    }\n\n    function touchmove(e) {\n      e.preventDefault();\n      // elapsedTime += 1 //点击时间累加\n\n      movePoint = {\n        x: e.touches[0].clientX,\n        y: e.touches[0].clientY\n      };\n\n      self.moveIndicator(); //显示操作的HUD\n\n      dist = core.distance(startPoint, movePoint); //计算距离\n      if (dist < threshold) return; //距离过短返回\n      overField = true; //记录超出范围，方便判断是否蓄力\n      radian = core.angle(movePoint, startPoint); //计算角度\n      direction = core.direction(radian);\n      // console.log('弧度', radian, Math.PI / 4)\n      if (!self.directionFunc) return; //是否运行方向控制功能\n      self.directionFunc(direction);\n\n      // console.log('8方向测试', core.eightDirection(radian))\n    }\n\n    function touchend(e) {\n      e.preventDefault();\n      isTouch = false;\n      self.endIndicator(); //结束HUD上点击\n\n      elapsedTime = Date.now(); //new Date().getTime() //获得按钮按下时间\n      elapsedTime -= startTime;\n      // console.log('结果时间', elapsedTime, elapsedTime < allowedTime)\n      if (elapsedTime < allowedTime) {\n        //短暂轻触\n        if (!self.clickFunc) return;\n        self.clickFunc(); //触发点击效果\n        return;\n      }\n\n      if (overField) return; //长按超出距离的情况就不计算蓄力\n\n      //超时就是蓄力攻击的情况\n      dist = core.distance(startPoint, movePoint); //计算距离\n      if (dist < threshold) {\n        //距离过短 并且没有出过范围 蓄力攻击\n        console.log('蓄力攻击', elapsedTime);\n        if (!self.pressFunc) return;\n        self.pressFunc(elapsedTime); //传送蓄力时间\n        return;\n      }\n\n      //距离长了选择相应技能攻击\n      // radian = u.angle( movePoint, startPoint ) //计算角度\n      // direction = u.direction(radian)\n      // console.log('蓄力弧度', radian, Math.PI / 4)\n    }\n\n    // function touchcancel (e) {\n    //   e.preventDefault()\n    //   isTouch = false\n    // }\n\n    /*\n      //加入操作指示\n      self.addIndicator = function () {\n    \n        self.indicator = core.spirteCircle(THREE)\n    \n    \n        self.indicator.position.set(0,3,5);\n    \n      }\n    */\n\n    // 每次点击的时候出现按钮控制\n    self.startIndicator = function () {\n      if (!self.HUD) {\n        console.error('no indicator');return;\n      }\n      // 传值到HUD UI层中的indicator换位置\n      self.HUD.moveIndicatorBG(startPoint);\n    };\n\n    //结束点击\n    self.endIndicator = function () {\n      if (!self.HUD) {\n        console.error('no indicator');return;\n      }\n      self.HUD.indicatorBG.visible = false; //不移动就不显示\n      self.HUD.indicator.visible = false;\n      // console.log('结束点击')\n    };\n\n    //移动的时候出现的按钮控制\n    self.moveIndicator = function () {\n      if (!self.HUD) {\n        console.error('no indicator');return;\n      }\n      self.HUD.indicatorBG.visible = true; //移动才显示\n      self.HUD.indicator.visible = true;\n\n      screenPoint = {\n        x: getMaxDis(movePoint.x, startPoint.x),\n        y: getMaxDis(movePoint.y, startPoint.y)\n      };\n\n      self.HUD.moveIndicator(screenPoint);\n    };\n\n    return self;\n  };\n\n  module.exports = TouchInput;\n\n  //取出最大移动距离\n  var distance = void 0,\n      whichway = void 0;\n  function getMaxDis(movePoint, startPoint) {\n    distance = movePoint - startPoint; //求出之前的差值\n    whichway = distance > 0 ? 1 : -1; //位于哪个方向\n    distance = Math.min(Math.abs(distance), 50); //差值的最大限度\n    movePoint = startPoint + whichway * distance;\n    return movePoint;\n  }\n\n  /*\n  function makeCanvas (THREE) {\n    //微信创建canvas\n    var canvas = DB.isWX ? wx.createCanvas() : document.createElement('canvas')\n    canvas.width = 500\n    canvas.height = 500\n    var cxt=canvas.getContext(\"2d\");\n  //画一个空心圆\n    cxt.beginPath();\n    cxt.arc(200,200,50,0,360,false);\n    cxt.lineWidth=5;\n    cxt.strokeStyle=\"green\";\n    cxt.stroke();//画空心圆\n    cxt.closePath();\n  \n    // canvas contents will be used for a texture\n    var texture = new THREE.Texture(canvas)\n    // texture.needsUpdate = true;\n  \n    var spriteMaterial = new THREE.SpriteMaterial(\n      {\n        map: texture,\n        // useScreenCoordinates: false,\n        fog:false\n      })\n    // 贴图更新\n    var sprite = new THREE.Sprite(spriteMaterial)\n    return sprite\n  }\n  */\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY2xpZW50L1JvY2tSdW4vVG91Y2hJbnB1dC5qcz8yOTZkIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IERCID0gcmVxdWlyZSgnLi9kYXRhYnVzJylcbmNvbnN0IGNvcmUgPSByZXF1aXJlKCcuL2NvcmUnKVxuXG5cbi8v6Kem5pG46L6T5YWlXG52YXIgVG91Y2hJbnB1dCA9IGZ1bmN0aW9uIChUSFJFRSkge1xuXG4gIHZhciBzZWxmID0ge30sXG4gICAgZGlzdCwgLy/ot53nprtcbiAgICByYWRpYW4sXG4gICAgZGlyZWN0aW9uLFxuICAgIHRocmVzaG9sZCA9IDEwMCwgLy/liKTor7vmmK/lkKblsZ7kuo7mu5HliqjnmoTmnIDlsI/ot53nprtcblxuICAgIGFsbG93ZWRUaW1lID0gMjAwLCAvLyAyMDAgbWF4aW11bSB0aW1lIGFsbG93ZWQgdG8gdHJhdmVsIHRoYXQgZGlzdGFuY2VcbiAgICBlbGFwc2VkVGltZSwgLy/miYDnlKjml7bpl7RcbiAgICBzdGFydFRpbWUsXG5cbiAgICBpc1RvdWNoID0gZmFsc2UsXG4gICAgb3ZlckZpZWxkID0gZmFsc2UsIC8v5Yik5pat5pON5L2c5piv5ZCm6LaF5Ye66L+H6IyD5Zu0XG4gICAgc3RhcnRQb2ludCA9IHt4OjAsIHk6MH0sXG4gICAgbW92ZVBvaW50ID0ge3g6MCwgeTowfSxcbiAgICBzY3JlZW5Qb2ludCAgLy/nlKjpvKDmoIfliKTmlq3lvZPliY3miYDlnKjkvY3nva4g5pi+56S65L2N572uXG5cblxuICBzZWxmLmRvbSA9IG51bGwgLy/opoHliqDlhaXnmoTnm5HlkKznmoRkb21cbiAgc2VsZi5kaXJlY3Rpb25GdW5jID0gbnVsbCAvL+WtmOaWueWQkeeahGZ1bmPvvIznlKjkuo7osIPnlKhcbiAgc2VsZi5jbGlja0Z1bmMgPSBudWxsIC8v54K55Ye75pWI5p6c77yM5aSW6YOo6L6T5YWl55qEZnVuY1xuICBzZWxmLnByZXNzRnVuYyA9IG51bGwgLy/ok4Tlipvngrnlh7tcblxuICBzZWxmLkhVRCA9IG51bGwgLy/nlYzpnaLmjIfnpLrvvIzlpJbpg6jliqDlhaXvvIzmlrnkvr/mjqfliLZVSeaViOaenFxuXG4gIC8v5ZCv5YqoXG4gIHNlbGYuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZighc2VsZi5kb20peyBjb25zb2xlLmVycm9yKCdubyB0b3VjaCBkb20nKTsgcmV0dXJuIH1cbiAgICBzZWxmLmRvbS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdG91Y2hzdGFydCwgdHJ1ZSk7XG4gICAgc2VsZi5kb20uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdG91Y2htb3ZlLCB0cnVlKTtcbiAgICBzZWxmLmRvbS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRvdWNoZW5kLCB0cnVlKTtcbiAgICAvLyBzZWxmLmRvbS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIHRvdWNoY2FuY2VsLCB0cnVlKTtcbiAgICAvLyBzZWxmLmFkZEluZGljYXRvcigpICAvL+WKoOWFpeaMh+ekulxuICB9XG5cbiAgZnVuY3Rpb24gdG91Y2hzdGFydCAoZSkgeyAvL+inpuaRuOW8gOWni1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgc3RhcnRQb2ludCA9IHtcbiAgICAgIHggOiBlLnRvdWNoZXNbMF0uY2xpZW50WCxcbiAgICAgIHkgOiBlLnRvdWNoZXNbMF0uY2xpZW50WVxuICAgIH1cbiAgICBpc1RvdWNoID0gdHJ1ZSAgLy/ph43nva7mlbDmja5cbiAgICBvdmVyRmllbGQgPSBmYWxzZVxuICAgIGRpc3QgPSAwXG4gICAgcmFkaWFuID0gbnVsbFxuICAgIC8vIGVsYXBzZWRUaW1lID0gMCAgLy/orrDlvZXngrnlh7vml7bpl7RcbiAgICBzdGFydFRpbWUgPSBEYXRlLm5vdygpIC8vIG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8v6K6w5b2V6Kem5pG45byA5aeL55qE5pe26Ze0XG5cbiAgICAvLyBjb25zb2xlLmxvZygn6Kem5pG45byA5aeL55qE5L2N572uJywgc3RhcnRQb2ludClcbiAgICBzZWxmLnN0YXJ0SW5kaWNhdG9yKCkgLy/lop7liqBIVUTngrnlh7vmmL7npLpcblxuICB9XG5cblxuICBmdW5jdGlvbiB0b3VjaG1vdmUgKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAvLyBlbGFwc2VkVGltZSArPSAxIC8v54K55Ye75pe26Ze057Sv5YqgXG5cbiAgICBtb3ZlUG9pbnQgPSB7XG4gICAgICB4IDogZS50b3VjaGVzWzBdLmNsaWVudFgsXG4gICAgICB5IDogZS50b3VjaGVzWzBdLmNsaWVudFlcbiAgICB9XG5cbiAgICBzZWxmLm1vdmVJbmRpY2F0b3IoKSAvL+aYvuekuuaTjeS9nOeahEhVRFxuXG4gICAgZGlzdCA9IGNvcmUuZGlzdGFuY2Uoc3RhcnRQb2ludCwgbW92ZVBvaW50KSAgLy/orqHnrpfot53nprtcbiAgICBpZiggZGlzdCA8IHRocmVzaG9sZCApIHJldHVybiAvL+i3neemu+i/h+efrei/lOWbnlxuICAgIG92ZXJGaWVsZCA9IHRydWUgLy/orrDlvZXotoXlh7rojIPlm7TvvIzmlrnkvr/liKTmlq3mmK/lkKbok4TliptcbiAgICByYWRpYW4gPSBjb3JlLmFuZ2xlKCBtb3ZlUG9pbnQsIHN0YXJ0UG9pbnQgKSAvL+iuoeeul+inkuW6plxuICAgIGRpcmVjdGlvbiA9IGNvcmUuZGlyZWN0aW9uKHJhZGlhbilcbiAgICAvLyBjb25zb2xlLmxvZygn5byn5bqmJywgcmFkaWFuLCBNYXRoLlBJIC8gNClcbiAgICBpZighc2VsZi5kaXJlY3Rpb25GdW5jKSByZXR1cm4gIC8v5piv5ZCm6L+Q6KGM5pa55ZCR5o6n5Yi25Yqf6IO9XG4gICAgc2VsZi5kaXJlY3Rpb25GdW5jKCBkaXJlY3Rpb24gKVxuXG5cbiAgICAvLyBjb25zb2xlLmxvZygnOOaWueWQkea1i+ivlScsIGNvcmUuZWlnaHREaXJlY3Rpb24ocmFkaWFuKSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvdWNoZW5kIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaXNUb3VjaCA9IGZhbHNlXG4gICAgc2VsZi5lbmRJbmRpY2F0b3IoKSAgLy/nu5PmnZ9IVUTkuIrngrnlh7tcblxuICAgIGVsYXBzZWRUaW1lID0gRGF0ZS5ub3coKSAvL25ldyBEYXRlKCkuZ2V0VGltZSgpIC8v6I635b6X5oyJ6ZKu5oyJ5LiL5pe26Ze0XG4gICAgZWxhcHNlZFRpbWUgLT0gc3RhcnRUaW1lXG4gICAgLy8gY29uc29sZS5sb2coJ+e7k+aenOaXtumXtCcsIGVsYXBzZWRUaW1lLCBlbGFwc2VkVGltZSA8IGFsbG93ZWRUaW1lKVxuICAgIGlmKCBlbGFwc2VkVGltZSA8IGFsbG93ZWRUaW1lKSB7IC8v55+t5pqC6L276KemXG4gICAgICBpZighc2VsZi5jbGlja0Z1bmMpIHJldHVyblxuICAgICAgc2VsZi5jbGlja0Z1bmMoKSAvL+inpuWPkeeCueWHu+aViOaenFxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYoIG92ZXJGaWVsZCApIHJldHVybiAvL+mVv+aMiei2heWHuui3neemu+eahOaDheWGteWwseS4jeiuoeeul+iThOWKm1xuXG4gICAgLy/otoXml7blsLHmmK/ok4TlipvmlLvlh7vnmoTmg4XlhrVcbiAgICBkaXN0ID0gY29yZS5kaXN0YW5jZShzdGFydFBvaW50LCBtb3ZlUG9pbnQpICAvL+iuoeeul+i3neemu1xuICAgIGlmKCBkaXN0IDwgdGhyZXNob2xkICl7IC8v6Led56a76L+H55+tIOW5tuS4lOayoeacieWHuui/h+iMg+WbtCDok4TlipvmlLvlh7tcbiAgICAgIGNvbnNvbGUubG9nKCfok4TlipvmlLvlh7snLCBlbGFwc2VkVGltZSlcbiAgICAgIGlmKCFzZWxmLnByZXNzRnVuYykgcmV0dXJuXG4gICAgICBzZWxmLnByZXNzRnVuYyhlbGFwc2VkVGltZSkgIC8v5Lyg6YCB6JOE5Yqb5pe26Ze0XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvL+i3neemu+mVv+S6humAieaLqeebuOW6lOaKgOiDveaUu+WHu1xuICAgIC8vIHJhZGlhbiA9IHUuYW5nbGUoIG1vdmVQb2ludCwgc3RhcnRQb2ludCApIC8v6K6h566X6KeS5bqmXG4gICAgLy8gZGlyZWN0aW9uID0gdS5kaXJlY3Rpb24ocmFkaWFuKVxuICAgIC8vIGNvbnNvbGUubG9nKCfok4TlipvlvKfluqYnLCByYWRpYW4sIE1hdGguUEkgLyA0KVxuICB9XG5cblxuICAvLyBmdW5jdGlvbiB0b3VjaGNhbmNlbCAoZSkge1xuICAvLyAgIGUucHJldmVudERlZmF1bHQoKVxuICAvLyAgIGlzVG91Y2ggPSBmYWxzZVxuICAvLyB9XG5cbi8qXG4gIC8v5Yqg5YWl5pON5L2c5oyH56S6XG4gIHNlbGYuYWRkSW5kaWNhdG9yID0gZnVuY3Rpb24gKCkge1xuXG4gICAgc2VsZi5pbmRpY2F0b3IgPSBjb3JlLnNwaXJ0ZUNpcmNsZShUSFJFRSlcblxuXG4gICAgc2VsZi5pbmRpY2F0b3IucG9zaXRpb24uc2V0KDAsMyw1KTtcblxuICB9XG4qL1xuXG4vLyDmr4/mrKHngrnlh7vnmoTml7blgJnlh7rnjrDmjInpkq7mjqfliLZcbnNlbGYuc3RhcnRJbmRpY2F0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYoIXNlbGYuSFVEKXtjb25zb2xlLmVycm9yKCdubyBpbmRpY2F0b3InKTsgcmV0dXJuIH1cbiAgLy8g5Lyg5YC85YiwSFVEIFVJ5bGC5Lit55qEaW5kaWNhdG9y5o2i5L2N572uXG4gIHNlbGYuSFVELm1vdmVJbmRpY2F0b3JCRyggc3RhcnRQb2ludCApXG59XG5cbi8v57uT5p2f54K55Ye7XG4gIHNlbGYuZW5kSW5kaWNhdG9yID0gZnVuY3Rpb24gKCkge1xuICAgIGlmKCFzZWxmLkhVRCl7Y29uc29sZS5lcnJvcignbm8gaW5kaWNhdG9yJyk7IHJldHVybiB9XG4gICAgc2VsZi5IVUQuaW5kaWNhdG9yQkcudmlzaWJsZSA9IGZhbHNlIC8v5LiN56e75Yqo5bCx5LiN5pi+56S6XG4gICAgc2VsZi5IVUQuaW5kaWNhdG9yLnZpc2libGUgPSBmYWxzZVxuICAgIC8vIGNvbnNvbGUubG9nKCfnu5PmnZ/ngrnlh7snKVxuICB9XG5cbi8v56e75Yqo55qE5pe25YCZ5Ye6546w55qE5oyJ6ZKu5o6n5Yi2XG4gIHNlbGYubW92ZUluZGljYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZighc2VsZi5IVUQpe2NvbnNvbGUuZXJyb3IoJ25vIGluZGljYXRvcicpOyByZXR1cm4gfVxuICAgIHNlbGYuSFVELmluZGljYXRvckJHLnZpc2libGUgPSB0cnVlICAvL+enu+WKqOaJjeaYvuekulxuICAgIHNlbGYuSFVELmluZGljYXRvci52aXNpYmxlID0gdHJ1ZVxuXG4gICAgc2NyZWVuUG9pbnQgPSB7XG4gICAgICB4IDogZ2V0TWF4RGlzKG1vdmVQb2ludC54LCBzdGFydFBvaW50LngpICxcbiAgICAgIHkgOiBnZXRNYXhEaXMobW92ZVBvaW50LnksIHN0YXJ0UG9pbnQueSlcbiAgICB9XG5cbiAgICBzZWxmLkhVRC5tb3ZlSW5kaWNhdG9yKCBzY3JlZW5Qb2ludCApXG4gIH1cblxuXG5cbiAgcmV0dXJuIHNlbGZcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUb3VjaElucHV0XG5cblxuLy/lj5blh7rmnIDlpKfnp7vliqjot53nprtcbmxldCBkaXN0YW5jZSwgd2hpY2h3YXlcbmZ1bmN0aW9uIGdldE1heERpcyAobW92ZVBvaW50LCBzdGFydFBvaW50KSB7XG4gIGRpc3RhbmNlID0gbW92ZVBvaW50IC0gc3RhcnRQb2ludCAgLy/msYLlh7rkuYvliY3nmoTlt67lgLxcbiAgd2hpY2h3YXkgPSBkaXN0YW5jZSA+IDAgPyAxIDogLTEgIC8v5L2N5LqO5ZOq5Liq5pa55ZCRXG4gIGRpc3RhbmNlID0gTWF0aC5taW4oIE1hdGguYWJzKGRpc3RhbmNlKSwgNTAgKSAgLy/lt67lgLznmoTmnIDlpKfpmZDluqZcbiAgbW92ZVBvaW50ID0gc3RhcnRQb2ludCArICggd2hpY2h3YXkgKiBkaXN0YW5jZSApXG4gIHJldHVybiBtb3ZlUG9pbnRcbn1cblxuLypcbmZ1bmN0aW9uIG1ha2VDYW52YXMgKFRIUkVFKSB7XG4gIC8v5b6u5L+h5Yib5bu6Y2FudmFzXG4gIHZhciBjYW52YXMgPSBEQi5pc1dYID8gd3guY3JlYXRlQ2FudmFzKCkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxuICBjYW52YXMud2lkdGggPSA1MDBcbiAgY2FudmFzLmhlaWdodCA9IDUwMFxuICB2YXIgY3h0PWNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4vL+eUu+S4gOS4quepuuW/g+WchlxuICBjeHQuYmVnaW5QYXRoKCk7XG4gIGN4dC5hcmMoMjAwLDIwMCw1MCwwLDM2MCxmYWxzZSk7XG4gIGN4dC5saW5lV2lkdGg9NTtcbiAgY3h0LnN0cm9rZVN0eWxlPVwiZ3JlZW5cIjtcbiAgY3h0LnN0cm9rZSgpOy8v55S756m65b+D5ZyGXG4gIGN4dC5jbG9zZVBhdGgoKTtcblxuICAvLyBjYW52YXMgY29udGVudHMgd2lsbCBiZSB1c2VkIGZvciBhIHRleHR1cmVcbiAgdmFyIHRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZShjYW52YXMpXG4gIC8vIHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xuXG4gIHZhciBzcHJpdGVNYXRlcmlhbCA9IG5ldyBUSFJFRS5TcHJpdGVNYXRlcmlhbChcbiAgICB7XG4gICAgICBtYXA6IHRleHR1cmUsXG4gICAgICAvLyB1c2VTY3JlZW5Db29yZGluYXRlczogZmFsc2UsXG4gICAgICBmb2c6ZmFsc2VcbiAgICB9KVxuICAvLyDotLTlm77mm7TmlrBcbiAgdmFyIHNwcml0ZSA9IG5ldyBUSFJFRS5TcHJpdGUoc3ByaXRlTWF0ZXJpYWwpXG4gIHJldHVybiBzcHJpdGVcbn1cbiovXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNsaWVudC9Sb2NrUnVuL1RvdWNoSW5wdXQuanMiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7Ozs7Ozs7QUFBQTs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFGQTtBQUFBO0FBQUE7QUFDQTtBQUtBO0FBTkE7QUFPQTtBQVBBO0FBUUE7QUFSQTtBQUFBO0FBQUE7QUFZQTtBQVpBO0FBQUE7QUFDQTtBQUNBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQVlBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///16\n");

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod);\n    global.Loader = mod.exports;\n  }\n})(undefined, function (module) {\n  'use strict';\n\n  //读取模型\n  var loadModel = function loadModel(cb) {\n    //读取模型 //'blenderJSON/eva-animated.json';\n    var URL = '../blender/blenderJSON/hauptRoller.json';\n    loadJSONModel(URL, 0.05, function (mesh) {\n      // Zscene.add(mesh)\n      // console.log('asdfmmesh', mesh.skeleton)\n      if (!mesh.skeleton) {\n        console.error('no skeleton');return;\n      }\n      if (!mesh.skeleton.bones) {\n        console.error('no bones');return;\n      }\n      if (mesh.skeleton.bones.length <= 0) {\n        console.error('0 bones');return;\n      }\n      console.log('骨头内容', mesh.skeleton.bones);\n\n      // model = mesh\n      // model.animat = function () {\n      //   modelAnimation( mesh )\n      // }\n      // const help = new THREE.SkeletonHelper(mesh);\n      // Zscene.add(help);\n      cb(mesh);\n    });\n  };\n\n  function loadJSONModel(URL, scaleSize, cb) {\n    var manager = new THREE.LoadingManager();\n    manager.onProgress = function (item, loaded, total) {\n      console.log(item, loaded, total);\n    };\n\n    var loader = new THREE.JSONLoader(manager);\n    //        loader.options.convertUpAxis = true;\n\n    loader.load(URL, function (obj, materials) {\n      //动画，也要放在render中update\n      for (var i = 0; i < materials.length; i++) {\n        materials[i].skinning = true;\n        //            materials[i].morphTargets = true;  //需要这个才能移动\n      }\n\n      //        var mat = new THREE.MultiMaterial(materials);\n      var mesh = new THREE.SkinnedMesh(obj, materials);\n\n      //            var s = THREE.Math.randFloat( 0.00075, 0.001 );\n      var s = scaleSize || 1;\n      mesh.scale.set(s, s, s);\n      // mesh.position.set(2,0,2);\n\n      // mesh.rotation.y = THREE.Math.randFloat( -0.25, 0.25 );\n\n      // mesh.matrixAutoUpdate = false;\n      // mesh.updateMatrix();\n\n      mesh.name = URL;\n      //            scene.add( mesh );\n      cb(mesh);\n    });\n  }\n\n  module.exports = loadModel;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY2xpZW50L1JvY2tSdW4vTG9hZGVyLmpzPzBjM2IiXSwic291cmNlc0NvbnRlbnQiOlsiLy/or7vlj5bmqKHlnotcbmNvbnN0IGxvYWRNb2RlbCA9IGZ1bmN0aW9uICAoY2IpIHtcbiAgLy/or7vlj5bmqKHlnosgLy8nYmxlbmRlckpTT04vZXZhLWFuaW1hdGVkLmpzb24nO1xuICBjb25zdCBVUkwgPSAnLi4vYmxlbmRlci9ibGVuZGVySlNPTi9oYXVwdFJvbGxlci5qc29uJ1xuICBsb2FkSlNPTk1vZGVsKFVSTCwgMC4wNSwgZnVuY3Rpb24gKG1lc2gpIHtcbiAgICAvLyBac2NlbmUuYWRkKG1lc2gpXG4gICAgLy8gY29uc29sZS5sb2coJ2FzZGZtbWVzaCcsIG1lc2guc2tlbGV0b24pXG4gICAgaWYoIW1lc2guc2tlbGV0b24peyBjb25zb2xlLmVycm9yKCdubyBza2VsZXRvbicpOyByZXR1cm4gfVxuICAgIGlmKCFtZXNoLnNrZWxldG9uLmJvbmVzKSB7Y29uc29sZS5lcnJvcignbm8gYm9uZXMnKTsgcmV0dXJufVxuICAgIGlmKG1lc2guc2tlbGV0b24uYm9uZXMubGVuZ3RoIDw9IDApIHtjb25zb2xlLmVycm9yKCcwIGJvbmVzJyk7IHJldHVybn1cbiAgICBjb25zb2xlLmxvZygn6aqo5aS05YaF5a65JywgbWVzaC5za2VsZXRvbi5ib25lcylcblxuICAgIC8vIG1vZGVsID0gbWVzaFxuICAgIC8vIG1vZGVsLmFuaW1hdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgIG1vZGVsQW5pbWF0aW9uKCBtZXNoIClcbiAgICAvLyB9XG4gICAgLy8gY29uc3QgaGVscCA9IG5ldyBUSFJFRS5Ta2VsZXRvbkhlbHBlcihtZXNoKTtcbiAgICAvLyBac2NlbmUuYWRkKGhlbHApO1xuICAgIGNiKG1lc2gpXG4gIH0pXG59XG5cblxuXG5mdW5jdGlvbiBsb2FkSlNPTk1vZGVsKFVSTCwgc2NhbGVTaXplLCBjYikge1xuICB2YXIgbWFuYWdlciA9IG5ldyBUSFJFRS5Mb2FkaW5nTWFuYWdlcigpO1xuICBtYW5hZ2VyLm9uUHJvZ3Jlc3MgPSBmdW5jdGlvbihpdGVtLCBsb2FkZWQsIHRvdGFsKSB7XG4gICAgY29uc29sZS5sb2coaXRlbSwgbG9hZGVkLCB0b3RhbCk7XG4gIH07XG5cbiAgdmFyIGxvYWRlciA9IG5ldyBUSFJFRS5KU09OTG9hZGVyKG1hbmFnZXIpO1xuLy8gICAgICAgIGxvYWRlci5vcHRpb25zLmNvbnZlcnRVcEF4aXMgPSB0cnVlO1xuXG4gIGxvYWRlci5sb2FkKFVSTCwgZnVuY3Rpb24oIG9iaixtYXRlcmlhbHMgKXtcbiAgICAvL+WKqOeUu++8jOS5n+imgeaUvuWcqHJlbmRlcuS4rXVwZGF0ZVxuICAgIGZvciAodmFyIGkgPSAwOyBpPG1hdGVyaWFscy5sZW5ndGg7IGkrKykge1xuICAgICAgbWF0ZXJpYWxzW2ldLnNraW5uaW5nID0gdHJ1ZTtcbi8vICAgICAgICAgICAgbWF0ZXJpYWxzW2ldLm1vcnBoVGFyZ2V0cyA9IHRydWU7ICAvL+mcgOimgei/meS4quaJjeiDveenu+WKqFxuICAgIH1cblxuXG4vLyAgICAgICAgdmFyIG1hdCA9IG5ldyBUSFJFRS5NdWx0aU1hdGVyaWFsKG1hdGVyaWFscyk7XG4gICAgdmFyIG1lc2ggPSBuZXcgVEhSRUUuU2tpbm5lZE1lc2gob2JqLCBtYXRlcmlhbHMpO1xuXG5cbi8vICAgICAgICAgICAgdmFyIHMgPSBUSFJFRS5NYXRoLnJhbmRGbG9hdCggMC4wMDA3NSwgMC4wMDEgKTtcbiAgICB2YXIgcyA9IHNjYWxlU2l6ZSB8fCAxO1xuICAgIG1lc2guc2NhbGUuc2V0KCBzLCBzLCBzICk7XG4gICAgLy8gbWVzaC5wb3NpdGlvbi5zZXQoMiwwLDIpO1xuXG4gICAgLy8gbWVzaC5yb3RhdGlvbi55ID0gVEhSRUUuTWF0aC5yYW5kRmxvYXQoIC0wLjI1LCAwLjI1ICk7XG5cbiAgICAvLyBtZXNoLm1hdHJpeEF1dG9VcGRhdGUgPSBmYWxzZTtcbiAgICAvLyBtZXNoLnVwZGF0ZU1hdHJpeCgpO1xuXG4gICAgbWVzaC5uYW1lID0gVVJMO1xuLy8gICAgICAgICAgICBzY2VuZS5hZGQoIG1lc2ggKTtcbiAgICBjYihtZXNoKTtcblxuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsb2FkTW9kZWxcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2xpZW50L1JvY2tSdW4vTG9hZGVyLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///17\n");

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0), __webpack_require__(19)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./databus'), require('./Cloud'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.databus, global.Cloud);\n    global.Environment = mod.exports;\n  }\n})(undefined, function (module, DB, Cloud) {\n  'use strict';\n\n  var Environment = function Environment(THREE) {\n    var self = {};\n    var mesh = new THREE.Group();\n    mesh.position.copy(DB.rollingGroundSphere.position);\n\n    var cloud = void 0;\n    self.init = function () {\n      cloud = new Cloud(THREE);\n      mesh.add(cloud.mesh);\n    };\n\n    self.animation = function (val) {\n      cloud.animat(val);\n    };\n\n    self.init();\n    self.mesh = mesh;\n    return self;\n  };\n\n  module.exports = Environment;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY2xpZW50L1JvY2tSdW4vRW52aXJvbm1lbnQuanM/MGYwYyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBEQiA9IHJlcXVpcmUoJy4vZGF0YWJ1cycpXG5jb25zdCBDbG91ZCA9IHJlcXVpcmUoJy4vQ2xvdWQnKVxuXG5jb25zdCBFbnZpcm9ubWVudCA9IGZ1bmN0aW9uIChUSFJFRSkge1xuICBsZXQgc2VsZiA9IHt9XG4gIGNvbnN0IG1lc2ggPSBuZXcgVEhSRUUuR3JvdXAoKVxuICBtZXNoLnBvc2l0aW9uLmNvcHkoREIucm9sbGluZ0dyb3VuZFNwaGVyZS5wb3NpdGlvbilcblxuICBsZXQgY2xvdWRcbiAgc2VsZi5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIGNsb3VkID0gbmV3IENsb3VkKFRIUkVFKVxuICAgIG1lc2guYWRkKGNsb3VkLm1lc2gpXG4gIH1cblxuICBzZWxmLmFuaW1hdGlvbiA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICBjbG91ZC5hbmltYXQodmFsKVxuICB9XG5cbiAgc2VsZi5pbml0KClcbiAgc2VsZi5tZXNoID0gbWVzaFxuICByZXR1cm4gc2VsZlxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEVudmlyb25tZW50XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNsaWVudC9Sb2NrUnVuL0Vudmlyb25tZW50LmpzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7Ozs7Ozs7O0FBQUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///18\n");

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, require('./databus'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, global.databus);\n    global.Cloud = mod.exports;\n  }\n})(undefined, function (module, DB) {\n  'use strict';\n\n  var Cloud = function Cloud(THREE) {\n    var num = 30;\n    var distanz = DB.worldRadius + 50;\n    var url = '../images/cloud10.png';\n    // const fog ={\n    //   color : 0x4584b4,\n    //   near : -100,\n    //   far : 3000\n    // }\n\n    // let objects = []\n    // let positions = []\n\n\n    var self = {},\n        texture = void 0;\n    self.mesh = new THREE.Group();\n\n    self.sameInit = function () {\n      texture = new THREE.TextureLoader().load(url);\n      texture.magFilter = THREE.LinearMipMapLinearFilter;\n      texture.minFilter = THREE.LinearMipMapLinearFilter;\n    };\n\n    self.init = function () {\n      self.sameInit();\n      var spriteMaterial = new THREE.SpriteMaterial({ map: texture, color: 0xfefeff });\n\n      var stepAngle = Math.PI * 2 / num; // 我们需要根据统一的角度放置它们\n\n      for (var i = 0; i < num; i++) {\n        var plane = new THREE.Sprite(spriteMaterial);\n        plane.scale.set(100, 100, 1);\n\n        var a = stepAngle * i; //这是云的最终角度\n        var h = distanz + Math.random() * 50; // 这是轴的中心和云本身之间的距离\n\n        // plane.position.x = Math.random() * 1000 - 500;\n        plane.position.x = Math.random() * 150 - 75;\n        plane.position.y = Math.sin(a) * h;\n        plane.position.z = Math.cos(a) * h;\n        // plane.rotation.z = Math.random() * Math.PI;\n\n        self.mesh.add(plane);\n      }\n    };\n\n    self.animat = function (val) {\n      self.mesh.rotation.x += val;\n    };\n\n    self.init();\n    return self;\n  };\n\n  module.exports = Cloud;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY2xpZW50L1JvY2tSdW4vQ2xvdWQuanM/NTMzMSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBEQiA9IHJlcXVpcmUoJy4vZGF0YWJ1cycpXG5cbmNvbnN0IENsb3VkID0gZnVuY3Rpb24gKFRIUkVFKSB7XG4gIGNvbnN0IG51bSA9IDMwXG4gIGNvbnN0IGRpc3RhbnogPSBEQi53b3JsZFJhZGl1cyArIDUwXG4gIGNvbnN0IHVybCA9ICcuLi9pbWFnZXMvY2xvdWQxMC5wbmcnXG4gIC8vIGNvbnN0IGZvZyA9e1xuICAvLyAgIGNvbG9yIDogMHg0NTg0YjQsXG4gIC8vICAgbmVhciA6IC0xMDAsXG4gIC8vICAgZmFyIDogMzAwMFxuICAvLyB9XG5cbiAgLy8gbGV0IG9iamVjdHMgPSBbXVxuICAvLyBsZXQgcG9zaXRpb25zID0gW11cblxuXG4gIGxldCBzZWxmID0ge30sIHRleHR1cmVcbiAgc2VsZi5tZXNoID0gbmV3IFRIUkVFLkdyb3VwKClcblxuICBzZWxmLnNhbWVJbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpLmxvYWQodXJsKVxuICAgIHRleHR1cmUubWFnRmlsdGVyID0gVEhSRUUuTGluZWFyTWlwTWFwTGluZWFyRmlsdGVyO1xuICAgIHRleHR1cmUubWluRmlsdGVyID0gVEhSRUUuTGluZWFyTWlwTWFwTGluZWFyRmlsdGVyO1xuICB9XG5cbiAgc2VsZi5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIHNlbGYuc2FtZUluaXQoKVxuICAgIGNvbnN0IHNwcml0ZU1hdGVyaWFsID0gbmV3IFRIUkVFLlNwcml0ZU1hdGVyaWFsKCB7IG1hcDogdGV4dHVyZSwgY29sb3I6IDB4ZmVmZWZmIH0gKTtcblxuICAgIGNvbnN0IHN0ZXBBbmdsZSA9IE1hdGguUEkqMiAvIG51bSAvLyDmiJHku6zpnIDopoHmoLnmja7nu5/kuIDnmoTop5LluqbmlL7nva7lroPku6xcblxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IG51bTsgaSsrICkge1xuICAgICAgbGV0IHBsYW5lID0gbmV3IFRIUkVFLlNwcml0ZSggc3ByaXRlTWF0ZXJpYWwgKTtcbiAgICAgIHBsYW5lLnNjYWxlLnNldCgxMDAsIDEwMCwgMSlcblxuICAgICAgbGV0IGEgPSBzdGVwQW5nbGUqaTsgLy/ov5nmmK/kupHnmoTmnIDnu4jop5LluqZcbiAgICAgIGxldCBoID0gZGlzdGFueiArIE1hdGgucmFuZG9tKCkqNTA7IC8vIOi/meaYr+i9tOeahOS4reW/g+WSjOS6keacrOi6q+S5i+mXtOeahOi3neemu1xuXG4gICAgICAvLyBwbGFuZS5wb3NpdGlvbi54ID0gTWF0aC5yYW5kb20oKSAqIDEwMDAgLSA1MDA7XG4gICAgICBwbGFuZS5wb3NpdGlvbi54ID0gTWF0aC5yYW5kb20oKSAqIDE1MCAtIDc1O1xuICAgICAgcGxhbmUucG9zaXRpb24ueSA9IE1hdGguc2luKGEpKmg7XG4gICAgICBwbGFuZS5wb3NpdGlvbi56ID0gTWF0aC5jb3MoYSkqaDtcbiAgICAgIC8vIHBsYW5lLnJvdGF0aW9uLnogPSBNYXRoLnJhbmRvbSgpICogTWF0aC5QSTtcblxuICAgICAgc2VsZi5tZXNoLmFkZCggcGxhbmUgKVxuICAgIH1cbiAgfVxuXG5cbiAgc2VsZi5hbmltYXQgPSBmdW5jdGlvbih2YWwpe1xuICAgIHNlbGYubWVzaC5yb3RhdGlvbi54ICs9IHZhbFxuICB9XG5cblxuICBzZWxmLmluaXQoKVxuICByZXR1cm4gc2VsZlxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENsb3VkXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNsaWVudC9Sb2NrUnVuL0Nsb3VkLmpzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7Ozs7Ozs7O0FBQUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///19\n");

/***/ })
/******/ ]);